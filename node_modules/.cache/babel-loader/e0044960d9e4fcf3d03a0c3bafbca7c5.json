{"ast":null,"code":"import { GameParam } from './GameParam';\nimport { StateParam } from './StateParam';\n\nclass HeroModel {\n  constructor(timeFrame) {\n    this.RightArm = false;\n    this.RightArmTrigger = false;\n    this.LeftArm = false;\n    this.LeftArmTrigger = false;\n    this.Nose = 0;\n    this.X = 0;\n    this.Y = 0;\n    this.Health = 10;\n    this.TIME_FRAME = 400;\n    this.AnimDamage = false;\n    this.AnimDamageTime = 1000;\n    this.Score = 0;\n    this.RightArmElevate = 0;\n    this.LeftArmElevate = 0;\n    this.IdWeapon = 22;\n    this.DamageWeapon = 10;\n\n    this.SetNose = function (Nose) {\n      this.Nose = Nose;\n      this.X = Nose;\n    };\n\n    this.SetRightArm = function (rightArm) {\n      if (this.RightArmTrigger == false && rightArm) {\n        this.RightArmElevate += 1;\n      }\n\n      this.RightArmTrigger = rightArm;\n      this.RightArm = rightArm;\n    };\n\n    this.GetStateAttack = function () {\n      return this.RightArm;\n    };\n\n    this.SetLeftArm = function (leftArm) {\n      if (this.LeftArmTrigger == false && leftArm) {\n        this.LeftArmElevate += 1;\n      }\n\n      this.LeftArmTrigger = leftArm;\n      this.LeftArm = leftArm;\n    };\n\n    this.MinusHealth = function (Minus, currentFrameTime) {\n      this.Health -= Minus;\n\n      if (Minus > 0) {\n        if (this.AnimDamage == false) {\n          this.AnimDamage = true;\n          this.AnimDamageTime = currentFrameTime;\n        }\n      }\n    };\n\n    this.GetState = function (currentFrameTime) {\n      if (this.State.GetState(currentFrameTime).ChangeStatus == false) {\n        return this.State.GetState(currentFrameTime).StatePose;\n      }\n\n      if (this.AnimDamage) {\n        if (this.State.Name == \"InjureState\") {\n          if (this.State.GetState(currentFrameTime).ChangeStatus == true) {\n            this.AnimDamage = false;\n          }\n        }\n\n        document.PlayAudio.PlayEffect(\"Injure\");\n        this.State = new InjureState(currentFrameTime);\n        return this.State.GetState(currentFrameTime).StatePose;\n      }\n\n      if (this.RightArm) {\n        var maxAttack = 3;\n        var randomAttack = Math.floor(Math.random() * maxAttack);\n        document.PlayAudio.PlayEffect(\"Sword\");\n\n        if (randomAttack == 1) {\n          this.State = new AttackState_0(currentFrameTime);\n        } else {\n          //attack 1\n          this.State = new AttackState(currentFrameTime);\n        }\n\n        return this.State.GetState(currentFrameTime).StatePose;\n      } //defence\n\n\n      if (this.LeftArm) {\n        //defence 3\n        this.State = new DefenceState(currentFrameTime);\n        return this.State.GetState(currentFrameTime).StatePose;\n      }\n\n      this.State = new StateHero(0);\n      return this.State.GetState(currentFrameTime).StatePose;\n    };\n\n    this.SetIdWeapon = function (IdWeapon) {\n      var tableWeapon = new GameParam().TableWeapon;\n\n      for (var i = 0; i < tableWeapon.length; i++) {\n        if (IdWeapon == tableWeapon[i].Id) {\n          this.DamageWeapon = tableWeapon[i].Damage;\n          this.IdWeapon = tableWeapon[i].ImageId;\n        }\n      }\n    };\n\n    this.GetIdWeapon = function () {\n      return this.IdWeapon;\n    };\n\n    this.GetDamageWeapon = function () {\n      return this.DamageWeapon;\n    };\n\n    this.TIME_FRAME = timeFrame;\n\n    if (this.AnimDamage == false) {\n      this.AnimDamage = true;\n    }\n\n    this.State = new StateHero(0);\n  }\n\n}\n\nclass StateHero {\n  constructor(State) {\n    this.State = 0;\n    this.Name = \"StateHero\";\n\n    this.GetState = function () {\n      return new StateParam(true, null, null, null, null, this.State);\n    };\n\n    this.State = State;\n  }\n\n}\n\nclass DefenceState extends StateHero {\n  constructor(_currentFrameTime) {\n    super(1);\n\n    this.GetState = function (currentFrameTime) {\n      if (this.startCurrentFrameTime + this.timeFrame * 0 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 1 > currentFrameTime) {\n        //return 4;\n        return new StateParam(false, null, null, null, null, 4);\n      }\n\n      if (this.startCurrentFrameTime + this.timeFrame * 1 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 2 > currentFrameTime) {\n        //return 5;\n        return new StateParam(false, null, null, null, null, 5);\n      } //return 5;\n\n\n      return new StateParam(true, null, null, null, null, 5);\n    };\n\n    this.startCurrentFrameTime = _currentFrameTime;\n    this.timeFrame = new GameParam().TIME_FRAME;\n    this.Name = \"DefenceState\";\n  }\n\n}\n\nclass AttackState extends StateHero {\n  constructor(_currentFrameTime2) {\n    super(1);\n\n    this.GetState = function (currentFrameTime) {\n      if (this.startCurrentFrameTime + this.timeFrame * 0 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 1 > currentFrameTime) {\n        //return 1;\n        return new StateParam(false, null, null, null, null, 1);\n      }\n\n      if (this.startCurrentFrameTime + this.timeFrame * 1 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 2 > currentFrameTime) {\n        //return 2;\n        return new StateParam(false, null, null, null, null, 2);\n      }\n\n      if (this.startCurrentFrameTime + this.timeFrame * 2 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 3 > currentFrameTime) {\n        //return 3;\n        return new StateParam(false, null, null, null, null, 3);\n      } //return 3;\n\n\n      return new StateParam(true, null, null, null, null, 3);\n    };\n\n    this.startCurrentFrameTime = _currentFrameTime2;\n    this.timeFrame = new GameParam().TIME_FRAME;\n    this.Name = \"AttackState\";\n  }\n\n}\n\nclass AttackState_0 extends StateHero {\n  constructor(_currentFrameTime3) {\n    super(1);\n\n    this.GetState = function (currentFrameTime) {\n      if (this.startCurrentFrameTime + this.timeFrame * 0 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 1 > currentFrameTime) {\n        return new StateParam(false, null, null, null, null, 6);\n      }\n\n      if (this.startCurrentFrameTime + this.timeFrame * 1 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 2 > currentFrameTime) {\n        return new StateParam(false, null, null, null, null, 7);\n      }\n\n      if (this.startCurrentFrameTime + this.timeFrame * 2 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 3 > currentFrameTime) {\n        return new StateParam(false, null, null, null, null, 8);\n      }\n\n      return new StateParam(true, null, null, null, null, 8);\n    };\n\n    this.startCurrentFrameTime = _currentFrameTime3;\n    this.timeFrame = new GameParam().TIME_FRAME;\n    this.Name = \"AttackState\";\n  }\n\n}\n\nclass InjureState extends StateHero {\n  constructor(_currentFrameTime4) {\n    super(1);\n\n    this.GetState = function (currentFrameTime) {\n      if (this.startCurrentFrameTime + this.timeFrame * 0 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 1 > currentFrameTime) {\n        //dead 6\n        return new StateParam(false, null, null, null, null, 9);\n      }\n\n      if (this.startCurrentFrameTime + this.timeFrame * 1 < currentFrameTime && this.startCurrentFrameTime + this.timeFrame * 2 > currentFrameTime) {\n        //dead 7\n        return new StateParam(false, null, null, null, null, 10);\n      } //dead 7\n\n\n      return new StateParam(true, null, null, null, null, 10);\n    };\n\n    this.startCurrentFrameTime = _currentFrameTime4;\n    this.timeFrame = new GameParam().TIME_FRAME;\n    this.Name = \"InjureState\";\n  }\n\n}\n\nexport { HeroModel };","map":{"version":3,"sources":["C:/Users/bulga/poseswordvideo/src/HeroModel.js"],"names":["GameParam","StateParam","HeroModel","constructor","timeFrame","RightArm","RightArmTrigger","LeftArm","LeftArmTrigger","Nose","X","Y","Health","TIME_FRAME","AnimDamage","AnimDamageTime","Score","RightArmElevate","LeftArmElevate","IdWeapon","DamageWeapon","SetNose","SetRightArm","rightArm","GetStateAttack","SetLeftArm","leftArm","MinusHealth","Minus","currentFrameTime","GetState","State","ChangeStatus","StatePose","Name","document","PlayAudio","PlayEffect","InjureState","maxAttack","randomAttack","Math","floor","random","AttackState_0","AttackState","DefenceState","StateHero","SetIdWeapon","tableWeapon","TableWeapon","i","length","Id","Damage","ImageId","GetIdWeapon","GetDamageWeapon","startCurrentFrameTime"],"mappings":"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","sourcesContent":["import { GameParam } from './GameParam';\r\nimport { StateParam } from './StateParam';\r\n\r\nclass HeroModel {\r\n\tRightArm=false;\r\n\tRightArmTrigger=false;\r\n\tLeftArm=false;\r\n\tLeftArmTrigger=false;\r\n\tNose=0;\r\n\tX=0;\r\n\tY=0;\r\n\tHealth = 10;\r\n\tTIME_FRAME = 400;\r\n\tAnimDamage = false;\r\n\tAnimDamageTime =1000;\r\n\tState;\r\n\tScore = 0;\r\n\tRightArmElevate = 0;\r\n\tLeftArmElevate = 0;\r\n\tIdWeapon = 22;\r\n\tDamageWeapon = 10;\r\n\tconstructor(timeFrame){\r\n\t\tthis.TIME_FRAME = timeFrame;\t\t\r\n\t\tif (this.AnimDamage==false ){\r\n\t\t\tthis.AnimDamage = true;\r\n\t\t}\r\n\t\tthis.State = new StateHero(0);\r\n\t};\r\n\t\tSetNose = function(Nose){\r\n\t\tthis.Nose=Nose;\r\n\t\tthis.X =Nose;\r\n\t}\r\n\tSetRightArm = function(rightArm){\r\n\t\t\r\n\t\t\tif (this.RightArmTrigger == false && rightArm){\r\n\t\t\t\tthis.RightArmElevate+=1;\r\n\t\t\t}\r\n\r\n\t\tthis.RightArmTrigger = rightArm;\r\n\t\t\r\n\t\tthis.RightArm = rightArm;\r\n\t};\r\n\tGetStateAttack =function() {\r\n\t\treturn this.RightArm;\r\n\t}\r\n\tSetLeftArm= function(leftArm){\r\n\t\tif (this.LeftArmTrigger == false && leftArm){\r\n\t\t\t\tthis.LeftArmElevate+=1;\r\n\t\t\t}\r\n\r\n\t\tthis.LeftArmTrigger = leftArm;\r\n\t\t\r\n\t\tthis.LeftArm = leftArm;\r\n\t};\r\n\tMinusHealth= function(Minus, currentFrameTime){\r\n\t\tthis.Health -=Minus;\r\n\t\tif (Minus>0){\r\n\t\t\tif(this.AnimDamage==false){\r\n\t\t\t\tthis.AnimDamage = true;\r\n\t\t\t\tthis.AnimDamageTime = currentFrameTime;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tGetState = function(currentFrameTime) \r\n\t{\r\n\t\t\r\n\t\tif(this.State.GetState(currentFrameTime).ChangeStatus==false){\r\n\t\t\t\r\n\t\t\treturn this.State.GetState(currentFrameTime).StatePose;\r\n\t\t}\r\n\t\t\r\n\t\tif (this.AnimDamage){\r\n\t\t\tif (this.State.Name ==\"InjureState\"){\r\n\t\t\t\tif(this.State.GetState(currentFrameTime).ChangeStatus==true){\r\n\t\t\t\t\tthis.AnimDamage = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdocument.PlayAudio.PlayEffect(\"Injure\");\r\n\t\t\t\tthis.State = new InjureState(currentFrameTime);\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\treturn this.State.GetState(currentFrameTime).StatePose;\r\n\t\t}\r\n\r\n\t\tif(this.RightArm) \r\n\t\t{\r\n\t\t\tvar maxAttack =3;\r\n\t\t\tvar randomAttack = Math.floor(Math.random() * maxAttack);\r\n\t\t\tdocument.PlayAudio.PlayEffect(\"Sword\");\r\n\t\t\tif (randomAttack==1){\r\n\t\t\t\tthis.State = new AttackState_0(currentFrameTime);\r\n\t\t\t} else {\r\n\t\t\t\t//attack 1\r\n\t\t\t\tthis.State = new AttackState(currentFrameTime);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this.State.GetState(currentFrameTime).StatePose;\r\n\t\t}\r\n\t\t//defence\r\n\t\tif(this.LeftArm) {\r\n\t\t\t//defence 3\r\n\t\t\tthis.State = new DefenceState(currentFrameTime);\r\n\t\t\treturn this.State.GetState(currentFrameTime).StatePose;\r\n\t\t}\r\n\t\tthis.State = new StateHero(0);\r\n\t\t\r\n\t\treturn this.State.GetState(currentFrameTime).StatePose;\r\n\t};\r\n\tSetIdWeapon = function(IdWeapon){\r\n\t\t\r\n\t\tvar tableWeapon = new GameParam().TableWeapon;\r\n\t\tfor(var i=0;i<tableWeapon.length;i++){\r\n\t\t\tif (IdWeapon==tableWeapon[i].Id){\r\n\t\t\t\tthis.DamageWeapon = tableWeapon[i].Damage;\r\n\t\t\t\tthis.IdWeapon =tableWeapon[i].ImageId;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tGetIdWeapon = function(){\r\n\t\treturn this.IdWeapon;\r\n\t};\r\n\tGetDamageWeapon = function(){\r\n\t\t\r\n\t\treturn this.DamageWeapon;\r\n\t}\r\n\t\r\n}\r\nclass StateHero{\r\n\ttimeFrame;\r\n\tstartCurrentFrameTime;\r\n\tState=0;\r\n\tName =\"StateHero\";\r\n\tconstructor(State) {\r\n\t\tthis.State = State;\r\n\t};\r\n\tGetState = function(){\r\n\t\treturn new StateParam(true,null,null,null,null,this.State);\r\n\t}\r\n}\r\nclass DefenceState extends StateHero {\r\n\tconstructor(currentFrameTime) {\r\n\t\tsuper(1);\r\n\t\tthis.startCurrentFrameTime = currentFrameTime;\r\n\t\tthis.timeFrame = new GameParam().TIME_FRAME;\r\n\t\tthis.Name = \"DefenceState\";\r\n\t}\r\n\tGetState = function(currentFrameTime){\r\n\t\t\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*0)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*1)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\t//return 4;\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,4);\r\n\t\t}\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*1)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\t//return 5;\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,5);\r\n\t\t}\r\n\r\n\t\t//return 5;\r\n\t\treturn new StateParam(true,null,null,null,null,5);\r\n\t}\r\n}\r\nclass AttackState extends StateHero {\r\n\t\r\n\t\r\n\tconstructor(currentFrameTime) {\r\n\t\tsuper(1);\r\n\t\tthis.startCurrentFrameTime = currentFrameTime;\r\n\t\tthis.timeFrame = new GameParam().TIME_FRAME;\r\n\t\tthis.Name = \"AttackState\";\r\n\t}\r\n\tGetState = function(currentFrameTime){\r\n\t\t\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*0)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*1)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\t//return 1;\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,1);\r\n\t\t}\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*1)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\t//return 2;\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,2);\r\n\t\t}\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*2)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\t//return 3;\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,3);\r\n\t\t}\r\n\t\t//return 3;\r\n\t\treturn new StateParam(true,null,null,null,null,3);\r\n\t}\r\n}\r\nclass AttackState_0 extends StateHero {\r\n\t\r\n\t\r\n\tconstructor(currentFrameTime) {\r\n\t\tsuper(1);\r\n\t\tthis.startCurrentFrameTime = currentFrameTime;\r\n\t\tthis.timeFrame = new GameParam().TIME_FRAME;\r\n\t\tthis.Name = \"AttackState\";\r\n\t}\r\n\tGetState = function(currentFrameTime){\r\n\t\t\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*0)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*1)>currentFrameTime){\r\n\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,6);\r\n\t\t}\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*1)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*2)>currentFrameTime){\r\n\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,7);\r\n\t\t}\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*2)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*3)>currentFrameTime){\r\n\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,8);\r\n\t\t}\r\n\t\treturn new StateParam(true,null,null,null,null,8);\r\n\t}\r\n}\r\nclass InjureState extends StateHero {\r\n\tconstructor(currentFrameTime) {\r\n\t\tsuper(1);\r\n\t\tthis.startCurrentFrameTime = currentFrameTime;\r\n\t\tthis.timeFrame = new GameParam().TIME_FRAME;\r\n\t\tthis.Name = \"InjureState\";\r\n\t}\r\n\tGetState = function(currentFrameTime){\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*0)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*1)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\t//dead 6\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,9);\r\n\t\t}\r\n\t\tif (this.startCurrentFrameTime+(this.timeFrame*1)<currentFrameTime&&this.startCurrentFrameTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\t//dead 7\r\n\t\t\t\treturn new StateParam(false,null,null,null,null,10);\r\n\t\t}\r\n\t\t\r\n\t\t//dead 7\r\n\t\treturn new StateParam(true,null,null,null,null,10);\r\n\t}\r\n}\r\n\r\nexport { HeroModel }"]},"metadata":{},"sourceType":"module"}