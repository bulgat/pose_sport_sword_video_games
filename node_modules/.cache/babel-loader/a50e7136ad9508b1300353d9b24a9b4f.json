{"ast":null,"code":"import { ZonaAttack } from './ZonaAttack';\nimport { StateFiendBasic } from './StateFiendBasic';\nimport { StateParam } from './StateParam';\nimport { GameParam } from './GameParam';\nimport { InventoryState } from './InventoryState';\nimport { TimeFrameAnimModel } from './model/TimeFrameAnimModel'; //TimeFrameAnimModel\n\nclass TemplateFiend {\n  constructor(Id, _X, _Yline, ReserveY, timeFrame, CANVAS_WIDTH, ZONA_ATTACK, _currentFrameTime, StartX, TableMonster) {\n    this.MaxAttack = 25;\n    this.StateImage = 0;\n    this.Speed = 20;\n    this.Dead = false;\n    this.HPlife = 10;\n    this.LocationLineReserve = false;\n    this.NamePharmacy = \"pharmacy\";\n    this.Dealer = \"dealer\";\n    this.Master = \"master\";\n    this.Score = 0;\n\n    this.GetAdditionallyStateDraw = function () {\n      return this.State.GetAdditionallyStateDraw();\n    };\n\n    this.GetLocationLineReserve = function () {\n      return this.LocationLineReserve;\n    };\n\n    this.SetLinePositionReserve = function (Yline) {\n      if (Yline != undefined) {\n        if (Yline) {\n          this.LocationLineReserve = true;\n          this.Y = new GameParam().LineReserve;\n        } else {\n          this.LocationLineReserve = false;\n          this.Y = new GameParam().LineAttack;\n        }\n      }\n    };\n\n    this.GetId = function () {\n      return this.Id;\n    };\n\n    this.UpdateRandomAttack = function (currentFrameTime, HeroModel) {\n      this.HeroModel = HeroModel;\n\n      if (this.Name != this.NamePharmacy && this.Name != this.Dealer && this.Name != this.Master) {\n        if (this.State.GetAttackFiend() == false) {\n          if (this.State.Name != \"MoveJump\") {\n            var randomAttack = Math.floor(Math.random() * this.MaxAttack);\n\n            if (this.LocationLineReserve == false) {\n              if (randomAttack == 1) {\n                this.SetLinePositionReserve(false); //\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\n\n                this.SetState(new StateFiendAttack(this.LocationLineReserve, false, true, currentFrameTime, this.timeFrame));\n              }\n            }\n            /*\r\n            if(randomAttack==2){\r\n            \t\r\n            \t//move\r\n            \tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n            \t\r\n            }\r\n            */\n            //Jump\n\n\n            if (randomAttack == 3) {\n              //jump StateFiendJump\n              this.SetState(new StateFiendJump(this.LocationLineReserve, currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.ZONA_ATTACK, this.X, this.Y));\n            } //StateFiendBlock\n\n\n            if (randomAttack == 4) {\n              this.SetState(new StateFiendBlock(this.LocationLineReserve, currentFrameTime, this.timeFrame));\n            }\n          }\n        }\n      }\n    };\n\n    this.GetTypeUnit = function () {\n      return this.TypeUnit;\n    };\n\n    this.SetState = function (State) {\n      if (this.Dealer == \"dealer\") {}\n\n      this.State = State;\n    };\n\n    this.GetState = function () {\n      return this.State.GetState();\n    };\n\n    this.GetStateName = function () {\n      return this.State.Name;\n    };\n\n    this.GetAttackPlayer = function () {\n      return this.State.GetAttackPlayer();\n    };\n\n    this.SetAttackPlayer = function (AttackPlayer, currentFrameTime, DamageWeapon) {\n      if (this.Name == this.Dealer) {\n        this.AttackPlayer = false;\n        return 0;\n      }\n\n      if (this.Name == this.NamePharmacy) {\n        this.AttackPlayer = true;\n        this.Dead = true;\n        var hpLife = this.HPlife;\n        this.HPlife = 0;\n        return hpLife;\n      } else {\n        // block blow\n        if (this.State.Name != \"MoveBlow\") {\n          //this.Name =\"Block\"\n          if (this.State.Name != \"Block\") {\n            //block reserve line\n            if (this.LocationLineReserve == false) {\n              this.HPlife -= DamageWeapon; //GetDamageWeapon();\n\n              if (0 >= this.HPlife) {\n                if (this.State.Name != \"Dead\") {\n                  this.SetState(new StateFiendDead(this.LocationLineReserve, true, false, currentFrameTime, this.timeFrame, this.Ystatic));\n                  this.AttackPlayer = true;\n                }\n\n                return this.Score;\n              } else {\n                //State,AttackFiendTime,timeFrame,Speed\n                this.SetState(new StateFiendBlow(this.LocationLineReserve, currentFrameTime, this.timeFrame, 3));\n              }\n            }\n          }\n        }\n      }\n\n      return 0;\n    };\n\n    this.GetStateTime = function (currentFrameTime) {\n      var stateParam = this.UpdateState(currentFrameTime, this.X, this.Y, this.HeroModel); //var stateParam = this.State.Update(currentFrameTime,this.X,this.Y);\n\n      if (this.Name != this.NamePharmacy && this.Name != this.Dealer) {\n        if (stateParam.ChangeStatus) {\n          this.SetState(new StateFiendOld(this.LocationLineReserve, false, false, currentFrameTime, this.timeFrame, this.Ystatic)); //Update\n        }\n      }\n\n      this.X = stateParam.X;\n      this.Y = stateParam.Y;\n\n      if (stateParam.Dead == true) {\n        this.Dead = true;\n      }\n\n      if (this.Name != this.NamePharmacy && this.Name != this.Dealer && this.Name != this.Master) {\n        this.SetLinePositionReserve(stateParam.LocationLineReserve);\n      }\n\n      return this.State.GetState();\n    };\n\n    this.UpdateState = function (currentFrameTime, X, Y, HeroModel) {\n      return this.State.Update(currentFrameTime, X, Y, HeroModel);\n    };\n\n    //TypeUnit,HPlife\n    this.Id = Id;\n    this.Name = TableMonster.Name;\n    this.Time = 0;\n    this.timeFrame = timeFrame;\n    this.CANVAS_WIDTH = CANVAS_WIDTH;\n\n    switch (this.Name) {\n      case this.NamePharmacy:\n        var randomPharmacy = Math.floor(Math.random() * 8);\n        this.SetState(new InventoryState(StartX, 200, randomPharmacy));\n        this.Y = 30;\n        break;\n\n      case this.Dealer:\n        //70\n        this.SetState(new DealerState(StartX, 200, 10, this.timeFrame, _currentFrameTime, ZONA_ATTACK));\n        this.Y = 105;\n        break;\n\n      case this.Master:\n        this.SetState(new MasterState(StartX, 200, 17, this.timeFrame, _currentFrameTime, ZONA_ATTACK));\n        this.Y = 105;\n        break;\n\n      default:\n        this.SetLinePositionReserve(_Yline);\n        this.SetState(new StateFiendMoveFix(this.LocationLineReserve, _currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.ZONA_ATTACK, this.X, null, this.Y));\n        break;\n    }\n\n    this.X = StartX;\n    this.Ystatic = this.Y;\n    this.ReserveY = ReserveY;\n    this.ZONA_ATTACK = ZONA_ATTACK;\n    this.TypeUnit = TableMonster.TypeUnit;\n    this.HPlife = TableMonster.HPlife;\n    this.Score = TableMonster.Score;\n  }\n\n}\n\nclass ItemDrawSample {\n  constructor(id, X, Y, ItemId, FlagMode, _Text, ModeExit, Seller, WeaponId, ColorText) {\n    this.FlagMode = false;\n    this.Flag = false;\n    this.Text = false;\n    this.ModeExit = false;\n    this.Seller = false;\n    this.WeaponId = 0;\n\n    this.GetIdimage = function () {\n      if (this.FlagMode) {\n        if (this.Flag) {\n          // item flag.\n          return 21;\n        }\n      }\n\n      return this.ItemId;\n    };\n\n    this.Reset = function () {\n      this.Flag = false;\n    };\n\n    this.SetFlag = function () {\n      this.Flag = true;\n    };\n\n    this.IsText = function () {\n      return this.Text.length > 0;\n    };\n\n    this.SetText = function (Text) {\n      this.Text = Text;\n    };\n\n    this.GetText = function () {\n      return this.Text;\n    };\n\n    this.Id = id;\n    this.X = X;\n    this.Y = Y;\n    this.ItemId = this.BasicItemId = ItemId;\n    this.FlagMode = FlagMode;\n    this.Text = _Text;\n    this.ModeExit = ModeExit;\n    this.Seller = Seller;\n    this.WeaponId = WeaponId;\n    this.ColorText = ColorText;\n  }\n\n  GetModeExit() {\n    return this.ModeExit;\n  }\n\n  GetSellerMode() {\n    return this.Seller > 0;\n  }\n\n  GetSellerCost() {\n    return this.Seller;\n  }\n\n  GetId() {\n    return this.Id;\n  }\n\n  GetWeaponId() {\n    return this.WeaponId;\n  }\n\n}\n\nclass MasterState extends StateFiendBasic {\n  constructor(_X2, _Y, State, timeFrame, AttackFiendTime, ZONA_ATTACK) {\n    super();\n    this.TextCount = 0;\n\n    this.Update = function (currentFrameTime, X, Y, HeroModel) {\n      this.ListAdditionallyStateDraw[0].SetText(this.TextQuest.substr(0, Math.floor(this.TextCount)));\n      this.TextCount += 0.4;\n      console.log(\" ;;;; e --- \" + this.TextCount);\n      /*\r\n      if (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n      \tthis.SetState(17);\r\n      \tconsole.log( \"00  Weapo et = nderImage =  \" );\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      if (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n      \tthis.SetState(18);\r\n      \tconsole.log( \"01  stat  aster  Name = \" );\r\n      \treturn new StateParam(false,X,Y);\r\n      }\t\r\n      if (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n      \tthis.SetState(19);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      */\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 0, 20)) {\n        this.SetState(17);\n        console.log(\"00  Weapo et = nderImage =  \");\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 20, 30)) {\n        this.SetState(18);\n        console.log(\"01  stat  aster  Name = \");\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 30, 40)) {\n        this.SetState(19);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 110, 120)) {\n        this.SetState(17);\n        this.TextQuest = \"Марио спас, пора и тебе!\";\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 120, 130)) {\n        this.SetState(18);\n        console.log(\"01  stat  aster  Name = \");\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 130, 140)) {\n        this.SetState(19);\n        return new StateParam(false, X, Y);\n      }\n\n      this.SetState(17);\n      return new StateParam(false, X, Y);\n    };\n\n    this.X = _X2;\n    this.Y = _Y + 100;\n    this.Name = \"Master\";\n    this.State = State;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.ListAdditionallyStateDraw = [//new ItemDrawSample(1,-55,115,30,true,\"COST: 10\",false,10,0)\n    new ItemDrawSample(1, -255, 35, 31, true, \"Задание\", false, 10, 0, \"Black\")];\n    this.TextQuest = \"Привет искатель приключений! Надо спасти принцессу из замка.\";\n  }\n\n}\n/*\r\nclass TimeFrameAnimModel{\r\n\tTimeFrameCheck= function(CurrentFrameTime,AttackFiendTime,TimeFrame,First,Second){\r\n\t\tif (AttackFiendTime+(TimeFrame*First)<CurrentFrameTime&&AttackFiendTime+(TimeFrame*Second)>CurrentFrameTime){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n*/\n\n\nclass DealerState extends StateFiendBasic {\n  constructor(_X3, _Y2, State, timeFrame, AttackFiendTime, ZONA_ATTACK) {\n    super();\n\n    this.DestroyItemAdditionallyStateDraw = function (Id) {\n      for (var i = 0; i < this.ListAdditionallyStateDraw.length; i++) {\n        if (this.ListAdditionallyStateDraw[i].GetId() == Id) {\n          this.ListAdditionallyStateDraw.splice(i, 1);\n        }\n      }\n    };\n\n    this.Update = function (currentFrameTime, X, Y, HeroModel) {\n      if (HeroModel != undefined) {\n        for (var i = 0; i < this.ListAdditionallyStateDraw.length; i++) {\n          this.ListAdditionallyStateDraw[i].Reset();\n          var Ximage = this.ListAdditionallyStateDraw[i].X;\n\n          if (new ZonaAttack().ZoneAttack(Ximage, HeroModel.X, this.ZONA_ATTACK)) {\n            //stop move\n            this.ListAdditionallyStateDraw[i].SetFlag(); //return new StateParam(true,X,Y,false);\n\n            if (HeroModel.GetStateAttack()) {\n              if (this.ListAdditionallyStateDraw[i].GetModeExit()) {\n                console.log(\" Exit  !!!!!!!!! ==   g =\" + HeroModel.GetStateAttack());\n                this.AttackPlayer = true; //Exit\n\n                return new StateParam(false, X, Y, true, false);\n              } //buy\n\n\n              if (this.ListAdditionallyStateDraw[i].GetSellerMode()) {\n                console.log(\" ##########  V    =  \" + this.ListAdditionallyStateDraw[i].GetSellerCost());\n\n                if (HeroModel.Score >= this.ListAdditionallyStateDraw[i].GetSellerCost()) {\n                  HeroModel.Score -= this.ListAdditionallyStateDraw[i].GetSellerCost();\n                  var id = this.ListAdditionallyStateDraw[i].GetId();\n                  HeroModel.SetIdWeapon(this.ListAdditionallyStateDraw[i].GetWeaponId());\n                  console.log(\"id = \" + id + \"__ A i= \" + i + \" @@@@@@    DealerState  =  \" + this.ListAdditionallyStateDraw[i].GetWeaponId()); //destroy\n\n                  this.DestroyItemAdditionallyStateDraw(id);\n                }\n              }\n            }\n          }\n        }\n      } //Y += 2;\n\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 0, 2)) {\n        this.SetState(10);\n        Y -= 1;\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 2, 3)) {\n        this.SetState(11);\n        Y -= 1;\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 3, 4)) {\n        this.SetState(12);\n        Y -= 1;\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 4, 5)) {\n        this.SetState(13);\n        Y -= 1;\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 5, 6)) {\n        this.SetState(14);\n        Y -= 1;\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 6, 7)) {\n        this.SetState(15);\n        Y -= 1;\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 7, 8)) {\n        this.SetState(16);\n        Y -= 1;\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 8, 9)) {\n        //this.SetState(16);\n        //return new StateParam(false,X,Y);\n        Y -= 1;\n        return new StateParam(false, X, Y, false, false);\n      } //if (Y>=110)\n      //{\n      //\tthis.AttackPlayer = true;\n      //\treturn new StateParam(false,X,Y,true,false);\n      //}\n\n\n      return new StateParam(false, X, Y, false, false);\n    };\n\n    this.X = _X3;\n    this.Y = _Y2 + 100;\n    this.Name = \"Dealer\";\n    this.State = State;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    var gameParam = new GameParam();\n    this.ListAdditionallyStateDraw = [new ItemDrawSample(1, -600, 10, 20, true, \"COST: 10\", false, 10, 0), new ItemDrawSample(gameParam.TableWeapon[0].Id, -300, 10, 20, true, \"COST: \" + gameParam.TableWeapon[0].Cost, false, gameParam.TableWeapon[0].Cost, gameParam.TableWeapon[0].Id), new ItemDrawSample(gameParam.TableWeapon[1].Id, 0, 10, 20, true, \"COST: \" + gameParam.TableWeapon[1].Cost, false, gameParam.TableWeapon[1].Cost, gameParam.TableWeapon[1].Id), new ItemDrawSample(4, 300, 10, 20, true, \"EXIT\", true, 0, 0), new ItemDrawSample(1, -600 + 100, 10 + 10, 2, false, \"\", false, 0, 0), new ItemDrawSample(gameParam.TableWeapon[0].Id, -300, 10, gameParam.TableWeapon[0].ImageId, false, \"\", false, 0, gameParam.TableWeapon[0].Id), new ItemDrawSample(gameParam.TableWeapon[1].Id, 0, 10, gameParam.TableWeapon[1].ImageId, false, \"\", false, 0, gameParam.TableWeapon[1].Id)];\n    this.ZONA_ATTACK = ZONA_ATTACK;\n  }\n\n} // Move\n\n\nclass StateFiendMove extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, MoveFix, XfixMove, _Y3) {\n    super();\n    this.Jump = false;\n    this.MoveFix = false;\n    this.MoveInAttackLine = false;\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 9 < currentFrameTime) {\n        this.SetState(1);\n        return new StateParam(true, X, Y);\n      }\n\n      if (X != this.randomMoveX) {\n        if (X > this.randomMoveX) {\n          X -= this.Speed;\n          this.State = 12;\n        }\n\n        if (X < this.randomMoveX) {\n          X += this.Speed;\n          this.State = 11;\n        }\n      }\n\n      if (this.Jump) {\n        //jump  Math.abs   ReserveY\n        var pathLength = this.XstartJump - this.randomMoveX;\n        var residual = Math.abs(this.XstartJump - X);\n        var proc = Math.abs(residual / pathLength);\n\n        if (proc < .5) {\n          Y = 30 - 50 * proc;\n        }\n\n        if (proc >= .5) {\n          var procEnd = 0.5 - (proc - 0.5);\n          Y = 30 - 50 * procEnd;\n        }\n        /*\r\n        var setY = Math.sin(proc*10)*50+30;\r\n        if(setY<=30){\r\n        \t\r\n        \tY = setY;\r\n        }\r\n        */\n\n\n        if (proc < .7) {\n          this.SetState(0);\n          return new StateParam(false, X, Y, false, false);\n        }\n\n        if (proc > .7 && proc < .8) {\n          this.SetState(1);\n          return new StateParam(false, X, Y, false, false);\n        }\n\n        if (proc > .8 && proc < .9) {\n          this.SetState(2);\n          return new StateParam(false, X, Y, false, false);\n        }\n\n        if (proc > .9) {\n          this.SetState(3);\n\n          if (this.MoveInAttackLine == true) {\n            Y = this.AttackY;\n          }\n\n          return new StateParam(true, X, Y, false, false);\n        }\n      }\n\n      if (this.MoveFix != undefined) {\n        if (this.MoveFix) {\n          if (new ZonaAttack().ZoneAttack(X, this.randomMoveX, this.ZONA_ATTACK)) {\n            //stop move\n            return new StateParam(true, X, Y, false);\n          }\n        } else {\n          if (new ZonaAttack().ZoneAttack(X, this.HeroModel.X, this.ZONA_ATTACK)) {\n            //stop move\n            return new StateParam(true, X, Y, false);\n          }\n        }\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = 8;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Speed = Speed;\n    this.ZONA_ATTACK = ZONA_ATTACK;\n    this.HeroModel = HeroModel;\n    this.XstartJump = Xfiend;\n    this.Name = \"Move\";\n    this.ReserveY = new GameParam().LineReserve;\n    this.AttackY = new GameParam().LineAttack;\n\n    if (LocationLineReserve) {\n      this.MoveInAttackLine = true;\n    }\n\n    if (MoveFix == true) {\n      this.MoveFix = true;\n      this.randomMoveX = XfixMove;\n    } // move fiend\n\n\n    var random = false;\n\n    if (this.HeroModel != undefined) {\n      if (this.MoveFix) {} else {\n        if (random) {\n          this.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\n        } else {\n          this.randomMoveX = this.HeroModel.X;\n        }\n      }\n    }\n\n    this.lengthMove = this.randomMoveX - Xfiend;\n  }\n\n} // Blow\n\n\nclass StateFiendBlow extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, Speed) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      /*\r\n      if (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n      \t\tthis.SetState(1);\r\n      \t\treturn new StateParam(true,X,Y);\r\n      }*/\n      if (Y != this.randomMoveY) {\n        Y -= this.Speed;\n        this.SetState(15);\n        /*\r\n        if(Y>this.randomMoveY){\r\n        \tY-=this.Speed;\r\n        \t//11\r\n        \tthis.State =0;\r\n        }\r\n        if(Y<this.randomMoveY){\r\n        \tY+=this.Speed;\r\n        \t//10\r\n        \tthis.State =0;\r\n        }\r\n        */\n      }\n\n      if (new ZonaAttack().ZoneAttack(Y, this.randomMoveY, 5)) {\n        //stop blow\n        Y = this.MoveReserveY;\n        return new StateParam(true, X, Y, false, true);\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.MoveReserveY = new GameParam().LineReserve;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Speed = Speed;\n    this.randomMoveY = new GameParam().LineReserve;\n    this.Name = \"MoveBlow\"; //this.MoveFix = undefined;\n  }\n\n}\n\nclass StateFiendBlock extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 0, 2)) {\n        this.SetState(16);\n        return new StateParam(false, X, Y, false);\n      }\n\n      return new StateParam(true, X, Y, false);\n    };\n\n    this.MoveReserveY = new GameParam().LineReserve;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.randomMoveY = new GameParam().LineReserve;\n    this.Name = \"Block\"; //this.MoveFix = undefined;\n  }\n\n} // Move Fix\n\n\nclass StateFiendMoveFix extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, XfixMove, Y) {\n    super(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, true, XfixMove, Y);\n    this.Name = \"MoveFix\";\n    this.MoveFix = true;\n    this.randomMoveX = XfixMove;\n  }\n\n} // Move\n\n\nclass StateFiendJump extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, Y) {\n    super(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, null, null, Y);\n    this.Name = \"MoveJump\";\n    this.Jump = true;\n  }\n\n}\n\nclass StateFiendAttack extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 0, 2)) {\n        this.SetState(7);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 2, 3)) {\n        this.SetState(8);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 3, 4)) {\n        this.SetState(9);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 4, 5)) {\n        this.SetState(9);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 5 < currentFrameTime) {\n        //attack\n        return new StateParam(true, X, Y);\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = 7;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Name = \"Attack\";\n  }\n\n}\n\nclass StateFiendDead extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame, _Y4) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 0, 2)) {\n        //11\n        this.SetState(12);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 2, 3)) {\n        //12\n        this.SetState(13);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 3, 4)) {\n        this.SetState(14);\n        return new StateParam(false, X, Y);\n      }\n\n      this.State = 14;\n      return new StateParam(false, X, this.Y, true);\n    };\n\n    this.Y = _Y4;\n    this.State = 12;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Name = \"Dead\";\n  }\n\n} //statc pose\n\n\nclass StateFiendOld extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame, _Y5) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 0, 2)) {\n        this.SetState(4);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 2, 3)) {\n        this.SetState(5);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 3, 5)) {\n        this.SetState(6);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 5, 6)) {\n        this.SetState(5);\n        return new StateParam(false, X, Y);\n      }\n\n      if (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime, this.AttackFiendTime, this.timeFrame, 6, 7)) {\n        this.SetState(4);\n        return new StateParam(false, X, Y);\n      } //0\n\n\n      this.State = 4;\n      return new StateParam(false, X, this.Y);\n    };\n\n    this.Y = _Y5;\n    this.State = 4;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Name = \"StateFiendOld\";\n  }\n\n}\n\nexport { TemplateFiend, StateFiendOld };","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Fiend.js"],"names":["ZonaAttack","StateFiendBasic","StateParam","GameParam","InventoryState","TimeFrameAnimModel","TemplateFiend","constructor","Id","X","Yline","ReserveY","timeFrame","CANVAS_WIDTH","ZONA_ATTACK","currentFrameTime","StartX","TableMonster","MaxAttack","StateImage","Speed","Dead","HPlife","LocationLineReserve","NamePharmacy","Dealer","Master","Score","GetAdditionallyStateDraw","State","GetLocationLineReserve","SetLinePositionReserve","undefined","Y","LineReserve","LineAttack","GetId","UpdateRandomAttack","HeroModel","Name","GetAttackFiend","randomAttack","Math","floor","random","SetState","StateFiendAttack","StateFiendJump","StateFiendBlock","GetTypeUnit","TypeUnit","GetState","GetStateName","GetAttackPlayer","SetAttackPlayer","AttackPlayer","DamageWeapon","hpLife","StateFiendDead","Ystatic","StateFiendBlow","GetStateTime","stateParam","UpdateState","ChangeStatus","StateFiendOld","Update","Time","randomPharmacy","DealerState","MasterState","StateFiendMoveFix","ItemDrawSample","id","ItemId","FlagMode","Text","ModeExit","Seller","WeaponId","ColorText","Flag","GetIdimage","Reset","SetFlag","IsText","length","SetText","GetText","BasicItemId","GetModeExit","GetSellerMode","GetSellerCost","GetWeaponId","AttackFiendTime","TextCount","ListAdditionallyStateDraw","TextQuest","substr","console","log","TimeFrameCheck","DestroyItemAdditionallyStateDraw","i","splice","Ximage","ZoneAttack","GetStateAttack","SetIdWeapon","gameParam","TableWeapon","Cost","ImageId","StateFiendMove","Xfiend","MoveFix","XfixMove","Jump","MoveInAttackLine","randomMoveX","pathLength","XstartJump","residual","abs","proc","procEnd","AttackY","lengthMove","randomMoveY","MoveReserveY","AttackFiend"],"mappings":"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","sourcesContent":["import { ZonaAttack } from './ZonaAttack';\r\nimport { StateFiendBasic } from './StateFiendBasic';\r\nimport { StateParam } from './StateParam';\r\nimport { GameParam } from './GameParam';\r\nimport { InventoryState } from './InventoryState';\r\nimport { TimeFrameAnimModel } from './model/TimeFrameAnimModel';\r\n\r\n//TimeFrameAnimModel\r\nclass TemplateFiend {\r\n\tId;\r\n\tX;\r\n\tY;\r\n\tReserveY;\r\n\tYstatic;\r\n\tMaxAttack = 25;\r\n\tStateImage=0;\r\n\tState;\r\n\ttimeFrame;\r\n\tCANVAS_WIDTH;\r\n\tSpeed =20;\r\n\tHeroModel;\r\n\tZONA_ATTACK;\r\n\tDead = false;\r\n\tTypeUnit;\r\n\tHPlife = 10;\r\n\tLocationLineReserve = false;\r\n\tNamePharmacy = \"pharmacy\";\r\n\tDealer = \"dealer\";\r\n\tMaster = \"master\";\r\n\tScore =0;\r\n\tconstructor(Id,X,Yline,ReserveY,timeFrame,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,StartX,TableMonster){\r\n\r\n\t\t//TypeUnit,HPlife\r\n\t\tthis.Id = Id;\r\n\t\tthis.Name = TableMonster.Name;\r\n\t\t\r\n\t\tthis.Time =0;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.CANVAS_WIDTH = CANVAS_WIDTH;\r\n\r\n\t\tswitch(this.Name) \r\n\t\t{\r\n\t\t  case this.NamePharmacy:  \r\n\t\t\t\r\n\t\t\tvar randomPharmacy = Math.floor(Math.random() * 8);\r\n\t\t\tthis.SetState(new InventoryState(StartX, 200,randomPharmacy));\r\n\t\t\tthis.Y =30;\r\n\t\t\t break;\r\n\r\n\t\t  case this.Dealer:  \r\n\t\t\t\r\n\t\t\t//70\r\n\t\t\tthis.SetState(new DealerState(StartX, 200,10,this.timeFrame,currentFrameTime,ZONA_ATTACK));\r\n\t\t\tthis.Y =105;\r\n\t\t\t break;\r\n\t\t\t \r\n\t\tcase this.Master:\r\n\t\t\tthis.SetState(new MasterState(StartX, 200,17,this.timeFrame,currentFrameTime,ZONA_ATTACK));\r\n\t\t\tthis.Y =105;\r\n\t\t\tbreak;\r\n\r\n\t\t  default:\r\n\t\t\t\r\n\t\t\tthis.SetLinePositionReserve(Yline);\r\n\t\t\t\tthis.SetState(new StateFiendMoveFix(this.LocationLineReserve,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X,null,this.Y));\r\n\t\t\t break;\r\n\t\t}\r\n\t\t\r\n\t\tthis.X=StartX;\r\n\t\tthis.Ystatic =this.Y;\r\n\t\tthis.ReserveY = ReserveY;\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t\tthis.TypeUnit = TableMonster.TypeUnit;\r\n\t\tthis.HPlife = TableMonster.HPlife;\r\n\t\tthis.Score = TableMonster.Score;\r\n\t\t\r\n\t};\r\n\tGetAdditionallyStateDraw = function(){\r\n\t\treturn this.State.GetAdditionallyStateDraw();\r\n\t};\r\n\tGetLocationLineReserve = function(){\r\n\t\treturn this.LocationLineReserve;\r\n\t};\r\n\tSetLinePositionReserve = function(Yline) {\r\n\t\tif(Yline!=undefined){\r\n\t\t\tif (Yline){\r\n\t\t\t\t\r\n\t\t\t\tthis.LocationLineReserve = true;\r\n\t\t\t\tthis.Y=new GameParam().LineReserve;\r\n\t\t\t} else {\r\n\t\t\t\tthis.LocationLineReserve = false;\r\n\t\t\t\tthis.Y=new GameParam().LineAttack;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tGetId = function() {\r\n\t\treturn this.Id;\r\n\t};\r\n\tUpdateRandomAttack = function(currentFrameTime,HeroModel) {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tif (this.Name !=this.NamePharmacy&&this.Name !=this.Dealer&&this.Name !=this.Master) {\r\n\t\t\t\tif(this.State.GetAttackFiend()==false){\r\n\t\t\t\t\tif(this.State.Name!=\"MoveJump\"){\r\n\t\t\t\t\t\tvar randomAttack = Math.floor(Math.random() * this.MaxAttack);\r\n\t\t\t\t\t\tif (this.LocationLineReserve == false)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(randomAttack==1){\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.SetLinePositionReserve(false);\r\n\t\t\t\t\t\t\t\t//\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t\t\t\t\t\tthis.SetState(new StateFiendAttack(this.LocationLineReserve,false,true,currentFrameTime,this.timeFrame));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\tif(randomAttack==2){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//move\r\n\t\t\t\t\t\t\tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t//Jump\r\n\t\t\t\t\t\tif(randomAttack==3){\r\n\t\t\t\t\t\t\t//jump StateFiendJump\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.SetState(new StateFiendJump(this.LocationLineReserve,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,\r\n\t\t\t\t\t\t\tthis.HeroModel,this.ZONA_ATTACK, this.X, this.Y));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//StateFiendBlock\r\n\t\t\t\t\t\tif(randomAttack==4){\r\n\t\t\t\t\t\t\tthis.SetState( new StateFiendBlock(this.LocationLineReserve,currentFrameTime,this.timeFrame));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t};\r\n\tGetTypeUnit = function(){\r\n\t\treturn this.TypeUnit;\r\n\t}\r\n\tSetState = function(State){\r\n\t\tif(this.Dealer == \"dealer\"){\r\n\t\t\t\r\n\r\n\t\t}\r\n\t\t\r\n\t\tthis.State = State;\r\n\t}\r\n\tGetState = function(){\r\n\t\treturn this.State.GetState();\r\n\t};\r\n\tGetStateName = function(){\r\n\t\treturn this.State.Name;\r\n\t};\r\n\tGetAttackPlayer = function(){\r\n\t\treturn this.State.GetAttackPlayer();\r\n\t}\r\n\tSetAttackPlayer = function(AttackPlayer,currentFrameTime,DamageWeapon){\r\n\t\t\r\n\t\tif (this.Name ==this.Dealer) {\r\n\t\t\tthis.AttackPlayer = false;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (this.Name ==this.NamePharmacy) {\r\n\t\t\t\r\n\t\t\t\tthis.AttackPlayer = true;\r\n\t\t\t\tthis.Dead = true;\r\n\t\t\t\tvar hpLife = this.HPlife;\r\n\t\t\t\tthis.HPlife =0;\r\n\t\t\t\treturn hpLife;\r\n\t\t\t\r\n\t\t} \r\n\t\telse \r\n\t\t{\r\n\t\t\t// block blow\r\n\t\t\tif (this.State.Name !=\"MoveBlow\"){\r\n\t\t\t\t//this.Name =\"Block\"\r\n\t\t\t\tif(this.State.Name !=\"Block\"){\r\n\t\t\t\t//block reserve line\r\n\t\t\t\t\tif(this.LocationLineReserve==false){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tthis.HPlife -=DamageWeapon;\r\n\t\t\t\t\t\t//GetDamageWeapon();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (0>=this.HPlife){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (this.State.Name !=\"Dead\"){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.SetState(new StateFiendDead(this.LocationLineReserve,true,false,currentFrameTime,this.timeFrame,this.Ystatic));\r\n\t\t\t\t\t\t\t\tthis.AttackPlayer = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn this.Score;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//State,AttackFiendTime,timeFrame,Speed\r\n\t\t\t\t\t\t\tthis.SetState(new StateFiendBlow(this.LocationLineReserve,currentFrameTime,this.timeFrame,3));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} \r\n\t\treturn 0;\r\n\t}\r\n\t// and Update\r\n\tGetStateTime = function(currentFrameTime) {\r\n\t\tvar stateParam = this.UpdateState(currentFrameTime,this.X,this.Y,this.HeroModel);\r\n\t\t//var stateParam = this.State.Update(currentFrameTime,this.X,this.Y);\r\n\t\tif(this.Name !=this.NamePharmacy&&this.Name !=this.Dealer){\r\n\t\t\tif(stateParam.ChangeStatus){\r\n\t\t\t\t\r\n\t\t\t\tthis.SetState(new StateFiendOld(this.LocationLineReserve,false,false,currentFrameTime,this.timeFrame,this.Ystatic));\r\n\t\t\t\t//Update\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.X = stateParam.X;\r\n\t\tthis.Y = stateParam.Y;\r\n\t\tif (stateParam.Dead ==true){\r\n\t\t\tthis.Dead = true;\r\n\t\t\t\r\n\t\t}\r\n\t\tif(this.Name !=this.NamePharmacy&&this.Name !=this.Dealer&&this.Name !=this.Master){\r\n\t\t\tthis.SetLinePositionReserve(stateParam.LocationLineReserve);\r\n\t\t}\r\n\t\treturn this.State.GetState();\r\n\t\r\n\t};\r\n\tUpdateState = function(currentFrameTime,X,Y,HeroModel) {\r\n\t\treturn this.State.Update(currentFrameTime,X,Y,HeroModel);\r\n\t}\r\n}\r\nclass ItemDrawSample {\r\n\tId;\r\n\tX;\r\n\tY;\r\n\tItemId;\r\n\tBasicItemId;\r\n\tFlagMode = false;\r\n\tFlag = false;\r\n\tText = false;\r\n\tModeExit = false;\r\n\tSeller = false;\r\n\tWeaponId=0;\r\n\tColorText;\r\n\tconstructor(id,X,Y,ItemId, FlagMode,Text,ModeExit,Seller,WeaponId,ColorText){\r\n\t\tthis.Id = id;\r\n\t\tthis.X = X;\r\n\t\tthis.Y = Y;\r\n\t\tthis.ItemId =this.BasicItemId = ItemId;\r\n\t\tthis.FlagMode = FlagMode;\r\n\t\tthis.Text  = Text;\r\n\t\tthis.ModeExit = ModeExit;\r\n\t\tthis.Seller = Seller;\r\n\t\tthis.WeaponId = WeaponId;\r\n\t\tthis.ColorText = ColorText;\r\n\t\t\r\n\t}\r\n\tGetIdimage = function(){\r\n\t\tif (this.FlagMode){\r\n\t\t\tif (this.Flag){\r\n\t\t\t\t// item flag.\r\n\t\t\t\treturn 21;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.ItemId;\r\n\t}\r\n\tReset = function(){\r\n\t\tthis.Flag = false;\r\n\t}\r\n\tSetFlag= function(){\r\n\t\tthis.Flag = true;\r\n\t}\r\n\tIsText = function(){\r\n\t\treturn this.Text.length>0;\r\n\t};\r\n\tSetText = function(Text){\r\n\t\tthis.Text = Text;\r\n\t};\r\n\tGetText = function(){\r\n\t\treturn this.Text;\r\n\t};\r\n\tGetModeExit(){\r\n\t\treturn this.ModeExit;\r\n\t}\r\n\tGetSellerMode(){\r\n\t\treturn this.Seller>0;\r\n\t}\r\n\tGetSellerCost(){\r\n\t\treturn this.Seller;\r\n\t}\r\n\tGetId(){\r\n\t\treturn this.Id;\r\n\t}\r\n\tGetWeaponId(){\r\n\t\treturn this.WeaponId;\r\n\t}\r\n}\r\nclass MasterState extends StateFiendBasic {\r\n\tTextQuest;\r\n\tTextCount=0;\r\n\tconstructor(X,Y,State,timeFrame,AttackFiendTime,ZONA_ATTACK){\r\n\t\tsuper();\r\n\t\tthis.X = X;\r\n\t\tthis.Y = Y+100;\r\n\t\tthis.Name =\"Master\";\r\n\t\tthis.State = State;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\t\r\n\t\tthis.ListAdditionallyStateDraw =\r\n\t\t[\r\n\t\t\t//new ItemDrawSample(1,-55,115,30,true,\"COST: 10\",false,10,0)\r\n\t\t\tnew ItemDrawSample(1,-255,35,31,true,\"Задание\",false,10,0,\"Black\")\r\n\t\t];\r\n\t\tthis.TextQuest =\"Привет искатель приключений! Надо спасти принцессу из замка.\"\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y,HeroModel) {\r\n\t\t\r\n\t\tthis.ListAdditionallyStateDraw[0].SetText(this.TextQuest.substr(0,Math.floor(this.TextCount)));\r\n\t\tthis.TextCount+=0.4;\r\n\t\t\r\n\t\tconsole.log(\" ;;;; e --- \"+this.TextCount);\r\n\t\t/*\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\tthis.SetState(17);\r\n\t\t\tconsole.log( \"00  Weapo et = nderImage =  \" );\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\tthis.SetState(18);\r\n\t\t\tconsole.log( \"01  stat  aster  Name = \" );\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\t\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\tthis.SetState(19);\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\t*/\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,0,20)){\r\n\t\t\tthis.SetState(17);\r\n\t\t\tconsole.log( \"00  Weapo et = nderImage =  \" );\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,20,30)){\r\n\t\t\tthis.SetState(18);\r\n\t\t\tconsole.log( \"01  stat  aster  Name = \" );\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\t\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,30,40)){\r\n\t\t\tthis.SetState(19);\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\t\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,110,120)){\r\n\t\t\tthis.SetState(17);\r\n\t\t\tthis.TextQuest =  \"Марио спас, пора и тебе!\";\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,120,130)){\r\n\t\t\tthis.SetState(18);\r\n\t\t\tconsole.log( \"01  stat  aster  Name = \" );\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\t\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,130,140)){\r\n\t\t\tthis.SetState(19);\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.SetState(17);\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\n/*\r\nclass TimeFrameAnimModel{\r\n\tTimeFrameCheck= function(CurrentFrameTime,AttackFiendTime,TimeFrame,First,Second){\r\n\t\tif (AttackFiendTime+(TimeFrame*First)<CurrentFrameTime&&AttackFiendTime+(TimeFrame*Second)>CurrentFrameTime){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n*/\r\nclass DealerState extends StateFiendBasic {\r\n\tZONA_ATTACK;\r\n\tconstructor(X,Y,State,timeFrame,AttackFiendTime,ZONA_ATTACK){\r\n\t\tsuper();\r\n\t\tthis.X = X;\r\n\t\tthis.Y = Y+100;\r\n\t\tthis.Name =\"Dealer\";\r\n\t\tthis.State = State;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tvar gameParam = new GameParam();\r\n\t\tthis.ListAdditionallyStateDraw =\r\n\t\t[\r\n\t\t\tnew ItemDrawSample(1,-600,10,20,true,\"COST: 10\",false,10,0),\r\n\t\t\tnew ItemDrawSample(gameParam.TableWeapon[0].Id,-300,10,20,true,\"COST: \"+gameParam.TableWeapon[0].Cost,false,gameParam.TableWeapon[0].Cost,gameParam.TableWeapon[0].Id),\r\n\t\t\tnew ItemDrawSample(gameParam.TableWeapon[1].Id,0,10,20,true,\"COST: \"+gameParam.TableWeapon[1].Cost,false,gameParam.TableWeapon[1].Cost,gameParam.TableWeapon[1].Id),\r\n\t\t\tnew ItemDrawSample(4,300,10,20,true,\"EXIT\",true,0,0),\r\n\t\t\tnew ItemDrawSample(1,-600+100,10+10,2,false,\"\",false,0,0),\r\n\t\t\tnew ItemDrawSample(gameParam.TableWeapon[0].Id,-300,10,gameParam.TableWeapon[0].ImageId,false,\"\",false,0,gameParam.TableWeapon[0].Id),\r\n\t\t\tnew ItemDrawSample(gameParam.TableWeapon[1].Id,0,10,gameParam.TableWeapon[1].ImageId,false,\"\",false,0,gameParam.TableWeapon[1].Id),\r\n\t\t];\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t}\r\n\tDestroyItemAdditionallyStateDraw = function(Id){\r\n\t\tfor (var i=0;i<this.ListAdditionallyStateDraw.length;i++){\r\n\t\t\tif (this.ListAdditionallyStateDraw[i].GetId()==Id) {\r\n\t\t\t\tthis.ListAdditionallyStateDraw.splice(i,1);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y,HeroModel) {\r\n\t\t\r\n\t\tif (HeroModel!=undefined){\r\n\t\t\tfor(var i=0;i<this.ListAdditionallyStateDraw.length;i++){\r\n\t\t\t\tthis.ListAdditionallyStateDraw[i].Reset();\r\n\t\t\t\tvar Ximage = this.ListAdditionallyStateDraw[i].X;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (new ZonaAttack().ZoneAttack(Ximage,HeroModel.X,this.ZONA_ATTACK)){\r\n\t\t\t\t\t\t\t//stop move\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.ListAdditionallyStateDraw[i].SetFlag();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//return new StateParam(true,X,Y,false);\r\n\t\t\t\t\t\t\tif (HeroModel.GetStateAttack()){\r\n\t\t\t\t\t\t\t\tif (this.ListAdditionallyStateDraw[i].GetModeExit()){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tconsole.log(  \" Exit  !!!!!!!!! ==   g =\"+HeroModel.GetStateAttack());\r\n\t\t\t\t\t\t\t\t\tthis.AttackPlayer = true;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t//Exit\r\n\t\t\t\t\t\t\t\t\treturn new StateParam(false,X,Y,true,false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//buy\r\n\t\t\t\t\t\t\t\tif (this.ListAdditionallyStateDraw[i].GetSellerMode()){\r\n\t\t\t\t\t\t\t\t\tconsole.log( \" ##########  V    =  \"+this.ListAdditionallyStateDraw[i].GetSellerCost());\r\n\t\t\t\t\t\t\t\t\tif (HeroModel.Score>=this.ListAdditionallyStateDraw[i].GetSellerCost())\t\r\n\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tHeroModel.Score -=this.ListAdditionallyStateDraw[i].GetSellerCost();\r\n\t\t\t\t\t\t\t\t\t\tvar id = this.ListAdditionallyStateDraw[i].GetId();\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tHeroModel.SetIdWeapon(this.ListAdditionallyStateDraw[i].GetWeaponId());\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"id = \"+id+\"__ A i= \"+i+\" @@@@@@    DealerState  =  \" +this.ListAdditionallyStateDraw[i].GetWeaponId());\r\n\t\t\t\t\t\t\t\t\t\t//destroy\r\n\t\t\t\t\t\t\t\t\t\tthis.DestroyItemAdditionallyStateDraw(id);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//Y += 2;\r\n\t\t\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,0,2)){\r\n\t\t\tthis.SetState(10);\r\n\t\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,2,3)){\r\n\t\t\tthis.SetState(11);\r\n\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\t\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,3,4)){\r\n\t\t\tthis.SetState(12);\r\n\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,4,5)){\r\n\t\t\tthis.SetState(13);\r\n\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\t\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,5,6)){\r\n\t\t\tthis.SetState(14);\r\n\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,6,7)){\r\n\t\t\tthis.SetState(15);\r\n\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,7,8)){\r\n\t\t\tthis.SetState(16);\r\n\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,8,9)){\r\n\t\t\t//this.SetState(16);\r\n\t\t\t//return new StateParam(false,X,Y);\r\n\t\t\tY-=1;\r\n\t\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t}\r\n\t\t//if (Y>=110)\r\n\t\t//{\r\n\t\t//\tthis.AttackPlayer = true;\r\n\t\t//\treturn new StateParam(false,X,Y,true,false);\r\n\t\t//}\r\n\t\t\r\n\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\r\n\t}\r\n}\r\n\r\n// Move\r\nclass StateFiendMove extends StateFiendBasic {\r\n\tXstartJump;\r\n\trandomMoveX;\r\n\tmoveY;\r\n\tlengthMove;\r\n\tSpeed;\r\n\tZONA_ATTACK;\r\n\tHeroModel;\r\n\tJump = false;\r\n\tMoveFix = false;\r\n\tReserveY;\r\n\tAttackY;\r\n\tMoveInAttackLine = false;\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,MoveFix,XfixMove,Y){\r\n\t\tsuper();\r\n\t\tthis.State =8;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Speed = Speed;\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tthis.XstartJump = Xfiend;\r\n\t\tthis.Name =\"Move\";\r\n\t\tthis.ReserveY = new GameParam().LineReserve;\r\n\t\tthis.AttackY = new GameParam().LineAttack;\r\n\t\tif(LocationLineReserve){\r\n\t\t\t\r\n\t\t\tthis.MoveInAttackLine = true;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif(MoveFix==true){\r\n\t\t\tthis.MoveFix = true;\r\n\t\t\tthis.randomMoveX =XfixMove;\r\n\t\t}\r\n\t\t// move fiend\r\n\t\tvar random = false;\r\n\t\t\r\n\t\tif(this.HeroModel!=undefined){\r\n\t\t\tif(this.MoveFix){\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tif (random){\r\n\t\t\t\t\tthis.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.randomMoveX = this.HeroModel.X;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.lengthMove = this.randomMoveX - Xfiend;\r\n\t\t\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}\r\n\t\tif (X!=this.randomMoveX){\r\n\t\t\tif(X>this.randomMoveX){\r\n\t\t\t\tX-=this.Speed;\r\n\t\t\t\tthis.State =12;\r\n\t\t\t}\r\n\t\t\tif(X<this.randomMoveX){\r\n\t\t\t\tX+=this.Speed;\r\n\t\t\t\tthis.State =11;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.Jump) {\r\n\t\t\t//jump  Math.abs   ReserveY\r\n\t\t\tvar pathLength = (this.XstartJump - this.randomMoveX);\r\n\t\t\tvar residual = Math.abs(this.XstartJump - X);\r\n\t\t\tvar proc = Math.abs(residual/pathLength);\r\n\t\t\t\r\n\t\t\tif (proc<.5){\r\n\t\t\t\tY =30-(50*proc);\r\n\t\t\t}\r\n\t\t\tif (proc>=.5){\r\n\t\t\t\tvar procEnd =0.5-(proc-0.5);\r\n\t\t\t\tY =30-(50*procEnd);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tvar setY = Math.sin(proc*10)*50+30;\r\n\t\t\tif(setY<=30){\r\n\t\t\t\t\r\n\t\t\t\tY = setY;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif(proc<.7){\r\n\t\t\t\tthis.SetState(0);\r\n\t\t\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\t}\r\n\t\t\tif(proc>.7&&proc<.8){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\t}\r\n\t\t\tif(proc>.8&&proc<.9){\r\n\t\t\t\tthis.SetState(2);\r\n\t\t\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\t}\r\n\t\t\tif(proc>.9){\r\n\t\t\t\tthis.SetState(3);\r\n\t\t\t\tif (this.MoveInAttackLine == true){\r\n\t\t\t\t\t\r\n\t\t\t\t\tY = this.AttackY;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn new StateParam(true,X,Y,false,false);\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\tif(this.MoveFix!=undefined){\r\n\t\t\tif(this.MoveFix){\r\n\t\t\t\tif (new ZonaAttack().ZoneAttack(X,this.randomMoveX,this.ZONA_ATTACK)){\r\n\t\t\t\t\t\t//stop move\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn new StateParam(true,X,Y,false);\r\n\t\t\t\t\t}\r\n\t\t\t} else \r\n\t\t\t{\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tif (new ZonaAttack().ZoneAttack(X,this.HeroModel.X,this.ZONA_ATTACK)){\r\n\t\t\t\t\t\t//stop move\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn new StateParam(true,X,Y,false);\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\n// Blow\r\nclass StateFiendBlow extends StateFiendMove {\r\n\tMoveReserveY;\r\n\tAttackFiendTime;\r\n\ttimeFrame;\r\n\tSpeed;\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,Speed){\r\n\t\tsuper();\r\n\t\tthis.MoveReserveY = new GameParam().LineReserve;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Speed = Speed;\r\n\t\tthis.randomMoveY = new GameParam().LineReserve;\r\n\t\tthis.Name =\"MoveBlow\";\r\n\t\t//this.MoveFix = undefined;\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t/*\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}*/\r\n\t\tif (Y!=this.randomMoveY){\r\n\t\t\tY-=this.Speed;\r\n\t\t\tthis.SetState(15);\r\n\t\t\t/*\r\n\t\t\tif(Y>this.randomMoveY){\r\n\t\t\t\tY-=this.Speed;\r\n\t\t\t\t//11\r\n\t\t\t\tthis.State =0;\r\n\t\t\t}\r\n\t\t\tif(Y<this.randomMoveY){\r\n\t\t\t\tY+=this.Speed;\r\n\t\t\t\t//10\r\n\t\t\t\tthis.State =0;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t}\r\n\t\tif (new ZonaAttack().ZoneAttack(Y,this.randomMoveY,5)){\r\n\t\t\t//stop blow\r\n\t\t\tY = this.MoveReserveY;\r\n\t\t\treturn new StateParam(true,X,Y,false,true);\r\n\t\t}\r\n\t\treturn new StateParam(false,X,Y);\r\n\t};\r\n}\r\nclass StateFiendBlock extends StateFiendMove {\r\n\t\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame){\r\n\t\tsuper();\r\n\t\tthis.MoveReserveY = new GameParam().LineReserve;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.randomMoveY = new GameParam().LineReserve;\r\n\t\tthis.Name =\"Block\";\r\n\t\t//this.MoveFix = undefined;\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,0,2)){\r\n\t\t\t\tthis.SetState(16);\r\n\t\t\t\treturn new StateParam(false,X,Y,false);\r\n\t\t}\r\n\t\treturn new StateParam(true,X,Y,false);\r\n\t};\r\n}\r\n// Move Fix\r\nclass StateFiendMoveFix extends StateFiendMove {\r\n\t\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,XfixMove,Y){\r\n\t\t\r\n\t\tsuper(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,true,XfixMove,Y);\r\n\t\tthis.Name =\"MoveFix\";\r\n\t\tthis.MoveFix = true;\r\n\t\tthis.randomMoveX =XfixMove;\r\n\t\t \r\n\t};\r\n\r\n}\r\n\r\n// Move\r\nclass StateFiendJump extends StateFiendMove {\r\n\t\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,Y){\r\n\t\t\r\n\t\tsuper(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,null,null,Y);\r\n\t\tthis.Name =\"MoveJump\";\r\n\t\tthis.Jump = true;\r\n\t};\r\n\r\n}\r\nclass StateFiendAttack extends StateFiendBasic{\r\n\t\r\n\t\tconstructor(LocationLineReserve,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame){\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.State = 7;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Name =\"Attack\";\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\r\n\t\t\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,0,2)){\r\n\t\t\t\tthis.SetState(7);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,2,3)){\r\n\t\t\t\tthis.SetState(8);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,3,4)){\r\n\t\t\t\tthis.SetState(9);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,4,5)){\r\n\t\t\t\tthis.SetState(9);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime){\r\n\t\t\t\t//attack\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t}\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\r\n\t\t\r\n\t\t\r\n\t}\r\n}\r\nclass StateFiendDead extends StateFiendBasic{\r\n\t\r\n\tconstructor(LocationLineReserve,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame,Y){\r\n\t\t\r\n\t\tsuper();\r\n\t\tthis.Y = Y;\r\n\t\tthis.State =12;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Name =\"Dead\";\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t\r\n\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,0,2)){\r\n\t\t\t\t//11\r\n\t\t\t\tthis.SetState(12);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,2,3)){\r\n\t\t\t\t//12\r\n\t\t\t\tthis.SetState(13);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,3,4)){\r\n\t\t\t\tthis.SetState(14);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\r\n\t\t\tthis.State =14;\r\n\t\t\treturn new StateParam(false,X,this.Y,true);\r\n\r\n\t}\r\n\t\r\n}\r\n//statc pose\r\nclass StateFiendOld extends StateFiendBasic{\r\n\t_frameCount;\r\n\tconstructor(LocationLineReserve,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame,Y){\r\n\t\tsuper();\r\n\t\tthis.Y = Y;\r\n\t\tthis.State = 4;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Name =\"StateFiendOld\";\r\n\t};\r\n\t\r\n\t\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,0,2)){\r\n\t\t\t\tthis.SetState(4);\r\n\r\n\t\t\t\t\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,2,3)){\r\n\t\t\t\t\r\n\t\t\t\tthis.SetState(5);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,3,5)){\r\n\t\t\t\t\r\n\t\t\t\tthis.SetState(6);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,5,6)){\r\n\t\t\t\tthis.SetState(5);\r\n\r\n\t\t\t\t\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (new TimeFrameAnimModel().TimeFrameCheck(currentFrameTime,this.AttackFiendTime,this.timeFrame,6,7)){\r\n\t\t\t\t\r\n\t\t\t\tthis.SetState(4);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\r\n\t\t//0\r\n\t\tthis.State=4;\r\n\t\treturn new StateParam(false,X,this.Y);\r\n\t}\r\n}\r\n\r\n\r\nexport { TemplateFiend, StateFiendOld }"]},"metadata":{},"sourceType":"module"}