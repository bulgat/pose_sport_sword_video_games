{"ast":null,"code":"import { HeroModel } from \"./HeroModel.js\";\nimport { TemplateFiend, AnotherTemplate } from './Fiend';\nimport { ZonaAttack } from './ZonaAttack';\nimport { GameParam } from './GameParam';\nimport { View } from './View'; //ZonaAttack View\n\nconst CANVAS_WIDTH = new GameParam().CANVAS_WIDTH;\nconst CANVAS_HEIGHT = new GameParam().CANVAS_HEIGHT;\nconst coefDraw = 2;\nconst ZONA_ATTACK = 30 * coefDraw;\nlet LEVEL = 0;\nconst TIME_FRAME = 400;\n\nvar _modelHero = new HeroModel(TIME_FRAME);\n\nvar gameParam = new GameParam();\nvar LineAttack = gameParam.LineAttack;\nvar LineReserve = gameParam.LineReserve;\nvar coefImg = 127;\nvar _devilEyeList = {\n  0: {\n    img: [{\n      x: 151 * 0,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"jump\"\n    }]\n  },\n  1: {\n    img: [{\n      x: 151 * 1,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"jump\"\n    }]\n  },\n  2: {\n    img: [{\n      x: 151 * 2,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"jump\"\n    }]\n  },\n  3: {\n    img: [{\n      x: 151 * 3,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"jump\"\n    }]\n  },\n  4: {\n    img: [{\n      x: 151 * 4,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"idle\"\n    }]\n  },\n  5: {\n    img: [{\n      x: 151 * 5,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"idle\"\n    }]\n  },\n  6: {\n    img: [{\n      x: 151 * 6,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"idle\"\n    }]\n  },\n  7: {\n    img: [{\n      x: 151 * 7,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"attack\"\n    }]\n  },\n  8: {\n    img: [{\n      x: 151 * 8,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"attack\"\n    }]\n  },\n  9: {\n    img: [{\n      x: 151 * 9,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"attack\"\n    }]\n  },\n  10: {\n    img: [{\n      x: 151 * 10,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"right\"\n    }]\n  },\n  11: {\n    img: [{\n      x: 151 * 11,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"left\"\n    }]\n  },\n  12: {\n    img: [{\n      x: 151 * 12,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"dead\"\n    }]\n  },\n  13: {\n    img: [{\n      x: 151 * 13,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"dead\"\n    }]\n  },\n  14: {\n    img: [{\n      x: 151 * 14,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"dead\"\n    }]\n  },\n  15: {\n    img: [{\n      x: 151 * 15,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"blow\"\n    }]\n  },\n  16: {\n    img: [{\n      x: 151 * 16,\n      y: 0,\n      w: 151,\n      h: 151,\n      name: \"block\"\n    }]\n  }\n};\nvar _heroList = {\n  0: {\n    img: [{\n      x: 113 * 0,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"idle\"\n    }]\n  },\n  1: {\n    img: [{\n      x: 113 * 1,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"attack\"\n    }]\n  },\n  2: {\n    img: [{\n      x: 113 * 2,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"attack\"\n    }]\n  },\n  3: {\n    img: [{\n      x: 113 * 3,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"attack\"\n    }]\n  },\n  4: {\n    img: [{\n      x: 113 * 4,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"defence\"\n    }]\n  },\n  5: {\n    img: [{\n      x: 113 * 5,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"defence\"\n    }]\n  },\n  6: {\n    img: [{\n      x: 113 * 6,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"attack0\"\n    }]\n  },\n  7: {\n    img: [{\n      x: 113 * 7,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"attack0\"\n    }]\n  },\n  8: {\n    img: [{\n      x: 113 * 8,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"attack0\"\n    }]\n  },\n  9: {\n    img: [{\n      x: 113 * 9,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"dead\"\n    }]\n  },\n  10: {\n    img: [{\n      x: 113 * 10,\n      y: 0,\n      w: 113,\n      h: 150,\n      name: \"dead\"\n    }]\n  }\n};\nsetInterval(() => {\n  draw();\n  drawCanvasHero();\n}, 100);\nvar context = document.getElementById(\"myCanvas\");\nconst audio = new Audio(\"/crazy.mp3\"); ////\n\nconsole.log(\" ZZ = \" + audio);\n/*\r\naudio.onloadeddata = function() {\r\n\tconsole.log(\" nam  x =  \"  );\r\n\taudio.play(10000);\r\n}\r\n*/\n\naudio.addEventListener('loadeddata', event => {\n  console.log('Yay! The readyState just increased to  ' + 'HAVE_CURRENT_DATA or greater for the first time.');\n  audio.play(10000);\n}); //setTimeout(audio.play(10000), 5000);\n//audio.volume = 1;\n//audio.play(10000);\n//drawHero = true;\n\nvar loadCanvas = false;\nconst base_image = new Image();\nbase_image.src = '/image/womenAtlas0.png';\n\nbase_image.onload = function () {\n  loadCanvas = true;\n}; // ThroneRoom  bigFon\n\n\nconst throneRoom_image = new Image();\nthroneRoom_image.src = '/image/bigFon.png';\n\nthroneRoom_image.onload = function () {}; //DevilEye.png\n\n\nconst devilEye_image = new Image();\ndevilEye_image.src = '/image/DevilEye.png';\n\ndevilEye_image.onload = function () {};\n\nconst devilEyeModel = {\n  X: 139,\n  Y: 139\n};\nvar ModelLevel = {\n  fiendModelList: [],\n  LevelId: 0\n};\nvar lastFrameTime = 0;\n\nconst drawCanvasHero = () => {\n  var currentFrameTime = Date.now();\n  var timeElapsed = currentFrameTime - lastFrameTime;\n\n  if (loadCanvas) {\n    var context = document.getElementById(\"myCanvas\");\n    var ctx = context.getContext(\"2d\");\n\n    if (window.Nose != undefined) {\n      ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n      DrawBackground(ctx, ModelLevel.LevelId);\n      UpdateHero(ModelLevel.fiendModelList, currentFrameTime); ////\n\n      let health = document.getElementById(\"health\");\n\n      if (health != null) {\n        health.value = _modelHero.Health;\n      } ////\n\n\n      new View().DrawFiend(ctx, currentFrameTime, ModelLevel, devilEye_image, _devilEyeList);\n\n      for (var i = 0; i < ModelLevel.fiendModelList.length; i++) {\n        //DrawFiend(ctx,ModelLevel.fiendModelList[i],currentFrameTime);\n        if (ModelLevel.fiendModelList[i].GetState() == 7) {\n          if (new ZonaAttack().ZoneAttack(ModelLevel.fiendModelList[i].X, _modelHero.Nose, ZONA_ATTACK)) {\n            _modelHero.MinusHealth(1, currentFrameTime);\n          }\n        }\n\n        ModelLevel.fiendModelList[i].UpdateRandomAttack(currentFrameTime, _modelHero);\n      }\n\n      new View().DrawHero(ctx, _modelHero, currentFrameTime, _heroList, base_image);\n      resetFiendModel(ModelLevel.fiendModelList, currentFrameTime);\n      ModelLevel.fiendModelList = resetNewLevel(ModelLevel, currentFrameTime);\n    }\n  }\n\n  lastFrameTime = currentFrameTime;\n};\n\nconst DrawBackground = (ctx, Id) => {\n  if (Id == 0) {\n    ctx.drawImage(throneRoom_image, 0, 189 * 0, 939, 189, 0, 0, 939 * coefDraw, 189 * coefDraw);\n  }\n\n  if (Id == 1) {\n    ctx.drawImage(throneRoom_image, 0, 189 * 1, 939, 189, 0, 0, 939 * coefDraw, 189 * coefDraw);\n  }\n\n  if (Id == 2) {\n    ctx.drawImage(throneRoom_image, 0, 189 * 2, 939, 189, 0, 0, 939 * coefDraw, 189 * coefDraw);\n  }\n};\n\n_c = DrawBackground;\n\nconst UpdateHero = (FiendModelList, CurrentFrameTime) => {\n  _modelHero.SetRightArm(150 > window.RightArm.position.y);\n\n  _modelHero.SetLeftArm(150 > window.LeftArm.position.y);\n\n  _modelHero.SetNose(CANVAS_WIDTH - window.Nose.position.x * coefDraw);\n\n  for (var i = 0; i < FiendModelList.length; i++) {\n    if (new ZonaAttack().ZoneAttack(FiendModelList[i].X, _modelHero.Nose, ZONA_ATTACK)) {\n      if (_modelHero.RightArm) {\n        if (FiendModelList[i].GetAttackPlayer() == false) {\n          FiendModelList[i].Time = CurrentFrameTime;\n        }\n\n        FiendModelList[i].SetAttackPlayer(true, CurrentFrameTime);\n      }\n    }\n  }\n\n  return _modelHero;\n};\n/*\r\n\tconst DrawHero = (ctx,ModelHero,CurrentFrameTime) =>\r\n\t{\r\n\r\n\t\tvar countAnimInf = ModelHero.GetState(CurrentFrameTime)\r\n\t\t\r\n\t\t//console.log(   ModelHero.Nose+ \" BLO I   = \"+(700+ModelHero.Nose) );\r\n\t\t\r\n\t\t//1500\r\n\t\t//var moveHeroX = ModelHero.Nose*0.9;\r\n\t\t\r\n\t\tctx.drawImage(base_image, \r\n\t\t\t\t_heroList[countAnimInf].img[0].x,//x origin\r\n\t\t\t\t_heroList[countAnimInf].img[0].y,//y origin\r\n\t\t\t\t_heroList[countAnimInf].img[0].w,//w origin\r\n\t\t\t\t_heroList[countAnimInf].img[0].h,//h origin\r\n\t\t\t\tnew View().GetViewUnitX(ModelHero.Nose),\r\n\t\t\t\t//(300*coefDraw)+moveHeroX,\r\n\t\t\t\t//700+ModelHero.Nose,//*coefDraw,//x\r\n\t\t\t\t50*coefDraw,//y\r\n\t\t\t\t_heroList[countAnimInf].img[0].w*coefDraw,//w size\r\n\t\t\t\t_heroList[countAnimInf].img[0].h*coefDraw//h size\r\n\t\t\t\t);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\treturn;\r\n\t};\r\n\t*/\n//Fiend\n\n/*\r\nconst DrawFiend = (ctx,currentFrameTime,ModelLevel) =>\r\n{\r\n\t//sort depth\r\n\tvar reservLine_ar = [];\r\n\tvar attackLine_ar = [];\r\n\t\r\n\tfor(var i=0;i<ModelLevel.fiendModelList.length;i++){\r\n\t\t \r\n\t\tif(ModelLevel.fiendModelList[i].GetLocationLineReserve()==true){\r\n\t\t\treservLine_ar.push(ModelLevel.fiendModelList[i]);\r\n\t\t} else {\r\n\t\t\tattackLine_ar.push(ModelLevel.fiendModelList[i]);\r\n\t\t}\r\n\t}\r\n\n\t//console.log( reservLine_ar.length+\" = end      =  \" +attackLine_ar.length +\"    \"+kol.length);\r\n\t\r\n\tModelLevel.fiendModelList = reservLine_ar.concat(attackLine_ar);\r\n\r\n\r\n\tfor(var i=0;i<ModelLevel.fiendModelList.length;i++){\r\n\t\r\n\t\tvar ModelFiend = ModelLevel.fiendModelList[i];\r\n\t\r\n\t\tvar countAnimInf =ModelFiend.GetStateTime(currentFrameTime);\r\n\t\t\r\n\t\tvar heightTypeEnemy =ModelFiend.GetTypeUnit();\r\n\n//var moveFiendX = ModelFiend.X*0.9;\r\n\t\t//ctx.save();\r\n\t\t//ctx.scale(-1, 1);\r\n\t\t//ctx.translate(CANVAS_WIDTH, 0);\r\n//ctx.scale(-1, 1);\r\n\t\t\r\n\t\t\tctx.drawImage(devilEye_image, \r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].x,//x origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].y+(151*heightTypeEnemy),//y origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].w,//w origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].h,//h origin\r\n\t\t\t\tnew View().GetViewUnitX(ModelFiend.X),\r\n\t\t\t\t//(300*coefDraw)+moveFiendX,\r\n\t\t\t\t//ModelFiend.X*coefDraw,//x\r\n\t\t\t\tModelFiend.Y*coefDraw,//y\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].w*coefDraw,//w size\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].h*coefDraw//h size\r\n\t\t\t\t);\r\n\t\t\t\t\r\n\t\t//\tctx.restore();\r\n\t}\r\n};\r\n*/\n\n/*\r\nvar GetViewUnitX = function(X){\r\n\treturn (300*coefDraw)+(X*0.9);\r\n}\r\n*/\n//////////\n\n\n_c2 = UpdateHero;\n\nvar resetNewLevel = function (ModelLevel, currentFrameTime) {\n  if (ModelLevel.fiendModelList.length == 0) {\n    if (LEVEL == 0) {\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 139, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, 100, gameParam.TableMonster[0]), new TemplateFiend(2, 239, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, 500, gameParam.TableMonster[1])];\n      ModelLevel.LevelId = 0;\n    }\n\n    if (LEVEL == 1) {\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 59, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, -100, gameParam.TableMonster[1]), new TemplateFiend(2, 339, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, CANVAS_WIDTH + 100, gameParam.TableMonster[1]), new TemplateFiend(2, 439, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, CANVAS_WIDTH + 100, gameParam.TableMonster[1])];\n      ModelLevel.LevelId = 0;\n    }\n\n    if (LEVEL == 2) {\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 139, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, -100, gameParam.TableMonster[0]), new TemplateFiend(2, 239, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, CANVAS_WIDTH + 100, gameParam.TableMonster[0])];\n      ModelLevel.LevelId = 1;\n    }\n\n    if (LEVEL == 3) {\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 59, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, -100, gameParam.TableMonster[0]), new TemplateFiend(2, 339, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, CANVAS_WIDTH + 100, gameParam.TableMonster[0]), new TemplateFiend(2, 439, true, LineReserve, TIME_FRAME, CANVAS_WIDTH, ZONA_ATTACK, currentFrameTime, CANVAS_WIDTH + 100, gameParam.TableMonster[0])];\n      ModelLevel.LevelId = 2;\n    }\n\n    LEVEL += 1;\n    console.log(\"==    LEVEL =\" + LEVEL);\n  }\n\n  return ModelLevel.fiendModelList;\n};\n\nvar resetFiendModel = function (FiendModelList, currentFrameTime) {\n  for (var i = 0; i < FiendModelList.length; i++) {\n    if (FiendModelList[i].GetAttackPlayer()) {\n      //var fiendTime = (FiendModelList[i].Time+700);\n      if (FiendModelList[i].Dead == true) {\n        var kol = FiendModelList[i].GetState();\n        FiendModelList.splice(i, 1);\n        return;\n      }\n    }\n  }\n};\n\nvar draw = function () {\n  var context = document.getElementById(\"myCanvas\");\n  var ctx = context.getContext(\"2d\");\n  ctx.moveTo(0, 0);\n  ctx.lineTo(200, 100);\n  ctx.stroke();\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DrawBackground\");\n$RefreshReg$(_c2, \"UpdateHero\");","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Canvas.js"],"names":["HeroModel","TemplateFiend","AnotherTemplate","ZonaAttack","GameParam","View","CANVAS_WIDTH","CANVAS_HEIGHT","coefDraw","ZONA_ATTACK","LEVEL","TIME_FRAME","_modelHero","gameParam","LineAttack","LineReserve","coefImg","_devilEyeList","img","x","y","w","h","name","_heroList","setInterval","draw","drawCanvasHero","context","document","getElementById","audio","Audio","console","log","addEventListener","event","play","loadCanvas","base_image","Image","src","onload","throneRoom_image","devilEye_image","devilEyeModel","X","Y","ModelLevel","fiendModelList","LevelId","lastFrameTime","currentFrameTime","Date","now","timeElapsed","ctx","getContext","window","Nose","undefined","clearRect","DrawBackground","UpdateHero","health","value","Health","DrawFiend","i","length","GetState","ZoneAttack","MinusHealth","UpdateRandomAttack","DrawHero","resetFiendModel","resetNewLevel","Id","drawImage","FiendModelList","CurrentFrameTime","SetRightArm","RightArm","position","SetLeftArm","LeftArm","SetNose","GetAttackPlayer","Time","SetAttackPlayer","TableMonster","Dead","kol","splice","moveTo","lineTo","stroke"],"mappings":"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","sourcesContent":["import  { HeroModel } from \"./HeroModel.js\";\r\nimport { TemplateFiend, AnotherTemplate } from './Fiend';\r\nimport { ZonaAttack } from './ZonaAttack';\r\nimport { GameParam } from './GameParam';\r\nimport { View } from './View';\r\n\r\n//ZonaAttack View\r\nconst CANVAS_WIDTH =new GameParam().CANVAS_WIDTH;\r\nconst CANVAS_HEIGHT =new GameParam().CANVAS_HEIGHT;\r\nconst coefDraw=2;\r\n\r\n\r\nconst ZONA_ATTACK =30*coefDraw;\r\nlet LEVEL =0;\r\nconst TIME_FRAME = 400;\r\nvar _modelHero =new HeroModel(TIME_FRAME);\r\nvar gameParam =new GameParam();\r\nvar LineAttack = gameParam.LineAttack;\r\nvar LineReserve = gameParam.LineReserve;\r\n\r\n\r\nvar coefImg = 127;\r\n\r\nvar _devilEyeList = {\r\n\t0:{img:[{x:151*0,y:0,w:151,h:151,name:\"jump\"}]},\r\n\t1:{img:[{x:151*1,y:0,w:151,h:151,name:\"jump\"}]},\r\n\t2:{img:[{x:151*2,y:0,w:151,h:151,name:\"jump\"}]},\r\n\t3:{img:[{x:151*3,y:0,w:151,h:151,name:\"jump\"}]},\r\n\t\r\n\t4:{img:[{x:151*4,y:0,w:151,h:151,name:\"idle\"}]},\r\n\t5:{img:[{x:151*5,y:0,w:151,h:151,name:\"idle\"}]},\r\n\t6:{img:[{x:151*6,y:0,w:151,h:151,name:\"idle\"}]},\r\n\t\r\n\t7:{img:[{x:151*7,y:0,w:151,h:151,name:\"attack\"}]},\r\n\t\r\n\t\r\n\t\r\n\t8:{img:[{x:151*8,y:0,w:151,h:151,name:\"attack\"}]},\r\n\t9:{img:[{x:151*9,y:0,w:151,h:151,name:\"attack\"}]},\r\n\t10:{img:[{x:151*10,y:0,w:151,h:151,name:\"right\"}]},\r\n\t11:{img:[{x:151*11,y:0,w:151,h:151,name:\"left\"}]},\r\n\t12:{img:[{x:151*12,y:0,w:151,h:151,name:\"dead\"}]},\r\n\t13:{img:[{x:151*13,y:0,w:151,h:151,name:\"dead\"}]},\r\n\t14:{img:[{x:151*14,y:0,w:151,h:151,name:\"dead\"}]},\r\n\t15:{img:[{x:151*15,y:0,w:151,h:151,name:\"blow\"}]},\r\n\t16:{img:[{x:151*16,y:0,w:151,h:151,name:\"block\"}]}\r\n};\r\n\r\nvar _heroList = {\r\n0:{img:[{x:113*0,y:0,w:113,h:150,name:\"idle\"}]},\r\n1:{img:[{x:113*1,y:0,w:113,h:150,name:\"attack\"}]},\r\n2:{img:[{x:113*2,y:0,w:113,h:150,name:\"attack\"}]},\r\n3:{img:[{x:113*3,y:0,w:113,h:150,name:\"attack\"}]},\r\n4:{img:[{x:113*4,y:0,w:113,h:150,name:\"defence\"}]},\r\n5:{img:[{x:113*5,y:0,w:113,h:150,name:\"defence\"}]},\r\n\r\n6:{img:[{x:113*6,y:0,w:113,h:150,name:\"attack0\"}]},\r\n7:{img:[{x:113*7,y:0,w:113,h:150,name:\"attack0\"}]},\r\n8:{img:[{x:113*8,y:0,w:113,h:150,name:\"attack0\"}]},\r\n\r\n9:{img:[{x:113*9,y:0,w:113,h:150,name:\"dead\"}]},\r\n10:{img:[{x:113*10,y:0,w:113,h:150,name:\"dead\"}]},\r\n};\r\n\r\n\r\n\tsetInterval(() => {\r\n      draw();\r\n\t  drawCanvasHero ();\r\n    }, 100);\r\n\t\r\n\tvar context = document.getElementById(\"myCanvas\");\r\n\r\n\tconst audio = new Audio(\"/crazy.mp3\");\r\n\t////\r\n\tconsole.log( \" ZZ = \" +audio  );\r\n\t/*\r\n\taudio.onloadeddata = function() {\r\n\t\tconsole.log(\" nam  x =  \"  );\r\n\t\taudio.play(10000);\r\n\t}\r\n\t*/\r\n\taudio.addEventListener('loadeddata', (event) => {\r\n\t  console.log('Yay! The readyState just increased to  ' +\r\n\t\t  'HAVE_CURRENT_DATA or greater for the first time.');\r\n\t\t  audio.play(10000);\r\n\t});\r\n\t\t\r\n\t//setTimeout(audio.play(10000), 5000);\r\n//audio.volume = 1;\r\n\r\n\r\n\r\n\t//audio.play(10000);\r\n\t\r\n\t\t\t\t//drawHero = true;\r\n\tvar loadCanvas=false;\r\n\tconst base_image = new Image();\r\n\tbase_image.src = '/image/womenAtlas0.png';\r\n\t\r\n\tbase_image.onload = function() \r\n\t{\t \r\n\t\t loadCanvas=true;\r\n\t}\r\n\r\n\t// ThroneRoom  bigFon\r\n\tconst throneRoom_image = new Image();\r\n\tthroneRoom_image.src = '/image/bigFon.png';\r\n\tthroneRoom_image.onload = function() \r\n\t{\t\t  }\r\n\t//DevilEye.png\r\n\tconst devilEye_image = new Image();\r\n\tdevilEye_image.src = '/image/DevilEye.png';\r\n\tdevilEye_image.onload = function() \r\n\t{}\r\n\tconst devilEyeModel =  {X:139,Y:139};\r\n\t\r\n\tvar ModelLevel = {\r\n\t\tfiendModelList:[],\r\n\t\tLevelId:0\r\n\t};\r\n\r\n\tvar lastFrameTime=0;\r\n\tconst drawCanvasHero = () =>{\r\n\r\n\t\tvar currentFrameTime = Date.now();\r\n\t\tvar timeElapsed = currentFrameTime-lastFrameTime;\r\n\t\t\r\n\t\t\r\n\t\tif(loadCanvas){\r\n\t\t\tvar context = document.getElementById(\"myCanvas\");\r\n\t\t\tvar ctx = context.getContext(\"2d\");\r\n\r\n\t\t\tif (window.Nose!=undefined){\r\n\t\t\t\tctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\t\t\t\t\r\n\r\n\t\t\t\tDrawBackground(ctx,ModelLevel.LevelId);\r\n\r\n\t\t\t\tUpdateHero(ModelLevel.fiendModelList,currentFrameTime);\r\n\t\t\t\t////\r\n\t\t\t\tlet health = document.getElementById(\"health\");\r\n\t\t\t\tif(health!=null){\r\n\t\t\t\t\thealth.value = _modelHero.Health;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t////\r\n\t\t\t\tnew View().DrawFiend(ctx,currentFrameTime,ModelLevel,devilEye_image,_devilEyeList);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tfor(var i=0;i<ModelLevel.fiendModelList.length;i++){\r\n\t\t\t\t\t\r\n\t\t\t\t\t//DrawFiend(ctx,ModelLevel.fiendModelList[i],currentFrameTime);\r\n\t\t\t\t\tif (ModelLevel.fiendModelList[i].GetState() == 7)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (new ZonaAttack().ZoneAttack(ModelLevel.fiendModelList[i].X,_modelHero.Nose,ZONA_ATTACK))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_modelHero.MinusHealth(1,currentFrameTime) ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tModelLevel.fiendModelList[i].UpdateRandomAttack(currentFrameTime,_modelHero);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnew View().DrawHero (ctx,_modelHero,currentFrameTime,_heroList,base_image);\r\n\t\t\t\t\r\n\t\t\t\tresetFiendModel(ModelLevel.fiendModelList,currentFrameTime);\r\n\t\t\t\tModelLevel.fiendModelList = resetNewLevel(ModelLevel,currentFrameTime);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tlastFrameTime = currentFrameTime;\r\n\t}\r\n\tconst DrawBackground=(ctx,Id) =>{\r\n\t\t\r\n\t\tif(Id == 0){\r\n\t\t\tctx.drawImage(throneRoom_image, 0, 189*0, 939, 189, 0, 0, 939*coefDraw, 189*coefDraw);\r\n\t\t}\r\n\t\tif(Id == 1){\r\n\t\t\tctx.drawImage(throneRoom_image, 0, 189*1, 939, 189, 0, 0, 939*coefDraw, 189*coefDraw);\r\n\t\t}\r\n\t\tif(Id == 2){\r\n\t\t\tctx.drawImage(throneRoom_image, 0, 189*2, 939, 189, 0, 0, 939*coefDraw, 189*coefDraw);\r\n\t\t}\r\n\t}\r\n\tconst UpdateHero =(FiendModelList,CurrentFrameTime)=>{\r\n\r\n\t\t_modelHero.SetRightArm(150>window.RightArm.position.y);\r\n\t\t_modelHero.SetLeftArm(150>window.LeftArm.position.y); \r\n\r\n\t\t_modelHero.SetNose(CANVAS_WIDTH - window.Nose.position.x*coefDraw);\r\n\t\t\r\n\t\tfor(var i=0;i<FiendModelList.length;i++){\r\n\r\n\t\t\tif (new ZonaAttack().ZoneAttack(FiendModelList[i].X,_modelHero.Nose,ZONA_ATTACK))\r\n\t\t\t{\r\n\t\t\t\tif(_modelHero.RightArm){\r\n\t\t\t\t\tif(FiendModelList[i].GetAttackPlayer() ==false){\r\n\t\t\t\t\t\tFiendModelList[i].Time =CurrentFrameTime;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tFiendModelList[i].SetAttackPlayer(true,CurrentFrameTime);\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn _modelHero;\r\n\t};\r\n/*\r\n\tconst DrawHero = (ctx,ModelHero,CurrentFrameTime) =>\r\n\t{\r\n\r\n\t\tvar countAnimInf = ModelHero.GetState(CurrentFrameTime)\r\n\t\t\r\n\t\t//console.log(   ModelHero.Nose+ \" BLO I   = \"+(700+ModelHero.Nose) );\r\n\t\t\r\n\t\t//1500\r\n\t\t//var moveHeroX = ModelHero.Nose*0.9;\r\n\t\t\r\n\t\tctx.drawImage(base_image, \r\n\t\t\t\t_heroList[countAnimInf].img[0].x,//x origin\r\n\t\t\t\t_heroList[countAnimInf].img[0].y,//y origin\r\n\t\t\t\t_heroList[countAnimInf].img[0].w,//w origin\r\n\t\t\t\t_heroList[countAnimInf].img[0].h,//h origin\r\n\t\t\t\tnew View().GetViewUnitX(ModelHero.Nose),\r\n\t\t\t\t//(300*coefDraw)+moveHeroX,\r\n\t\t\t\t//700+ModelHero.Nose,//*coefDraw,//x\r\n\t\t\t\t50*coefDraw,//y\r\n\t\t\t\t_heroList[countAnimInf].img[0].w*coefDraw,//w size\r\n\t\t\t\t_heroList[countAnimInf].img[0].h*coefDraw//h size\r\n\t\t\t\t);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\treturn;\r\n\t};\r\n\t*/\r\n\t//Fiend\r\n\t/*\r\n\tconst DrawFiend = (ctx,currentFrameTime,ModelLevel) =>\r\n\t{\r\n\t\t//sort depth\r\n\t\tvar reservLine_ar = [];\r\n\t\tvar attackLine_ar = [];\r\n\t\t\r\n\t\tfor(var i=0;i<ModelLevel.fiendModelList.length;i++){\r\n\t\t\t \r\n\t\t\tif(ModelLevel.fiendModelList[i].GetLocationLineReserve()==true){\r\n\t\t\t\treservLine_ar.push(ModelLevel.fiendModelList[i]);\r\n\t\t\t} else {\r\n\t\t\t\tattackLine_ar.push(ModelLevel.fiendModelList[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//console.log( reservLine_ar.length+\" = end      =  \" +attackLine_ar.length +\"    \"+kol.length);\r\n\t\t\r\n\t\tModelLevel.fiendModelList = reservLine_ar.concat(attackLine_ar);\r\n\t\r\n\t\r\n\t\tfor(var i=0;i<ModelLevel.fiendModelList.length;i++){\r\n\t\t\r\n\t\t\tvar ModelFiend = ModelLevel.fiendModelList[i];\r\n\t\t\r\n\t\t\tvar countAnimInf =ModelFiend.GetStateTime(currentFrameTime);\r\n\t\t\t\r\n\t\t\tvar heightTypeEnemy =ModelFiend.GetTypeUnit();\r\n\r\n//var moveFiendX = ModelFiend.X*0.9;\r\n\t\t\t//ctx.save();\r\n\t\t\t//ctx.scale(-1, 1);\r\n\t\t\t//ctx.translate(CANVAS_WIDTH, 0);\r\n\t//ctx.scale(-1, 1);\r\n\t\t\t\r\n\t\t\t\tctx.drawImage(devilEye_image, \r\n\t\t\t\t\t_devilEyeList[countAnimInf].img[0].x,//x origin\r\n\t\t\t\t\t_devilEyeList[countAnimInf].img[0].y+(151*heightTypeEnemy),//y origin\r\n\t\t\t\t\t_devilEyeList[countAnimInf].img[0].w,//w origin\r\n\t\t\t\t\t_devilEyeList[countAnimInf].img[0].h,//h origin\r\n\t\t\t\t\tnew View().GetViewUnitX(ModelFiend.X),\r\n\t\t\t\t\t//(300*coefDraw)+moveFiendX,\r\n\t\t\t\t\t//ModelFiend.X*coefDraw,//x\r\n\t\t\t\t\tModelFiend.Y*coefDraw,//y\r\n\t\t\t\t\t_devilEyeList[countAnimInf].img[0].w*coefDraw,//w size\r\n\t\t\t\t\t_devilEyeList[countAnimInf].img[0].h*coefDraw//h size\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t//\tctx.restore();\r\n\t\t}\r\n\t};\r\n\t*/\r\n\t/*\r\n\tvar GetViewUnitX = function(X){\r\n\t\treturn (300*coefDraw)+(X*0.9);\r\n\t}\r\n\t*/\r\n\t//////////\r\n\tvar resetNewLevel = function(ModelLevel,currentFrameTime){\r\n\t\tif(ModelLevel.fiendModelList.length==0){\r\n\t\t\tif (LEVEL==0){\r\n\t\t\t\tModelLevel.fiendModelList =[\r\n\t\t\t\tnew TemplateFiend(1,139,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,100,gameParam.TableMonster[0]),\r\n\t\t\t\tnew TemplateFiend(2,239,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,500,gameParam.TableMonster[1])];\r\n\t\t\t\tModelLevel.LevelId =0;\r\n\t\t\t}\r\n\t\t\tif (LEVEL==1){\r\n\t\t\t\tModelLevel.fiendModelList =[\r\n\t\t\t\tnew TemplateFiend(1,59,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,-100,gameParam.TableMonster[1]),\r\n\t\t\t\tnew TemplateFiend(2,339,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,CANVAS_WIDTH+100,gameParam.TableMonster[1]),\r\n\t\t\t\tnew TemplateFiend(2,439,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,CANVAS_WIDTH+100,gameParam.TableMonster[1])];\r\n\t\t\t\tModelLevel.LevelId =0;\r\n\t\t\t}\r\n\t\t\tif (LEVEL==2){\r\n\t\t\t\tModelLevel.fiendModelList =[\r\n\t\t\t\tnew TemplateFiend(1,139,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,-100,gameParam.TableMonster[0]),\r\n\t\t\t\tnew TemplateFiend(2,239,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,CANVAS_WIDTH+100,gameParam.TableMonster[0])];\r\n\t\t\t\tModelLevel.LevelId =1;\r\n\t\t\t}\r\n\t\t\tif (LEVEL==3){\r\n\t\t\t\tModelLevel.fiendModelList =[\r\n\t\t\t\tnew TemplateFiend(1,59,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,-100,gameParam.TableMonster[0]),\r\n\t\t\t\tnew TemplateFiend(2,339,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,CANVAS_WIDTH+100,gameParam.TableMonster[0]),\r\n\t\t\t\tnew TemplateFiend(2,439,true,LineReserve,TIME_FRAME,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,CANVAS_WIDTH+100,gameParam.TableMonster[0])];\r\n\t\t\t\tModelLevel.LevelId =2;\r\n\t\t\t}\r\n\t\t\tLEVEL+=1;\r\n\t\t\tconsole.log( \"==    LEVEL =\" +LEVEL);\r\n\t\t}\r\n\t\treturn ModelLevel.fiendModelList\r\n\t}\r\n\tvar resetFiendModel = function(FiendModelList,currentFrameTime){\r\n\t\t\r\n\t\tfor(var i=0;i<FiendModelList.length;i++){\r\n\t\t\tif (FiendModelList[i].GetAttackPlayer()){\r\n\t\t\t\t\r\n\t\t\t\t//var fiendTime = (FiendModelList[i].Time+700);\r\n\t\t\t\t\r\n\t\t\t\tif (FiendModelList[i].Dead == true){\r\n\t\t\t\t\tvar kol = FiendModelList[i].GetState();\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tFiendModelList.splice(i,1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar draw = function(){\r\n\t\tvar context = document.getElementById(\"myCanvas\");\r\n\t\tvar ctx = context.getContext(\"2d\");\r\n\t\tctx.moveTo(0, 0);\r\n\t\t\tctx.lineTo(200, 100);\r\n\t\t\tctx.stroke();\r\n\t\t\r\n\t};"]},"metadata":{},"sourceType":"module"}