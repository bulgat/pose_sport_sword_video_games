{"ast":null,"code":"import { ZonaAttack } from './ZonaAttack';\nimport { StateFiendBasic } from './StateFiendBasic';\n\nclass TemplateFiend {\n  constructor(Id, X, Y, timeFrame, CANVAS_WIDTH, ZONA_ATTACK, _currentFrameTime, StartX) {\n    this.MaxAttack = 20;\n    this.StateImage = 0;\n    this.Speed = 20;\n\n    this.GetId = function () {\n      return this.Id;\n    };\n\n    this.UpdateRandomAttack = function (currentFrameTime, HeroModel) {\n      this.HeroModel = HeroModel;\n\n      if (this.AttackPlayer == true || this.State.GetAttackPlayer()) {\n        if (this.AttackPlayer == false) {\n          this.State = new StateFiendDead(1, false, false, currentFrameTime, this.timeFrame, this.Ystatic);\n          this.AttackPlayer = true;\n        }\n\n        return;\n      }\n\n      if (this.State.GetAttackFiend() == false) {\n        var randomAttack = Math.floor(Math.random() * this.MaxAttack);\n\n        if (randomAttack == 1) {\n          this.Y = this.Ystatic; //\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\n\n          this.State = new StateFiendAttack(1, false, true, currentFrameTime, this.timeFrame);\n        }\n        /*\r\n        if(randomAttack==2){\r\n        \t\r\n        \t//move\r\n        \tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n        \t\r\n        }\r\n        */\n\n\n        if (randomAttack == 3) {\n          //jump StateFiendJump\n          //console.log( \" fiend x  this.ZONA_ATTACK =\"+this.ZONA_ATTACK+\" hero   x =  \"+this.X  );\n          this.State = new StateFiendJump(1, currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.ZONA_ATTACK, this.X);\n        }\n      }\n    };\n\n    this.GetState = function () {\n      return this.State.GetState();\n    };\n\n    this.GetAttackPlayer = function () {\n      return this.State.GetAttackPlayer();\n    };\n\n    this.SetAttackPlayer = function (AttackPlayer) {\n      this.State.SetAttackPlayer(AttackPlayer);\n    };\n\n    this.GetStateTime = function (currentFrameTime) {\n      //var timeFrame = 400;\n      var stateParam = this.State.Update(currentFrameTime, this.X, this.Y);\n\n      if (stateParam.ChangeStatus) {\n        this.State = new StateFiend(1, false, false, currentFrameTime, this.timeFrame, this.Ystatic); //Update\n      }\n\n      this.X = stateParam.X;\n      this.Y = stateParam.Y;\n      return this.State.GetState();\n    };\n\n    this.Id = Id;\n    this.Ystatic = Y;\n    this.Time = 0;\n    this.timeFrame = timeFrame;\n    this.CANVAS_WIDTH = CANVAS_WIDTH; //this.State = new StateFiend(0,false,false,null,timeFrame,Y);\n\n    this.State = new StateFiendMoveFix(1, _currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.ZONA_ATTACK, this.X);\n    this.X = StartX; //this.X=X;\n\n    this.Y = Y;\n    this.ZONA_ATTACK = ZONA_ATTACK;\n  }\n\n} // Move\n\n\nclass StateFiendMove extends StateFiendBasic {\n  //State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,XfixMove,true\n  constructor(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, MoveFix, XfixMove) {\n    super();\n    this.Jump = false;\n    this.MoveFix = false;\n    this.Name = \"Move\";\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 9 < currentFrameTime) {\n        this.SetState(1);\n        return new StateParam(true, X, Y);\n      }\n\n      if (X != this.randomMoveX) {\n        if (X > this.randomMoveX) {\n          X -= this.Speed; //9\n\n          this.State = 11;\n        }\n\n        if (X < this.randomMoveX) {\n          X += this.Speed; //8\n\n          this.State = 10;\n        }\n      }\n\n      if (this.Jump) {\n        //jump  Math.abs\n        var pathLength = this.XstartJump - this.randomMoveX;\n        var residual = Math.abs(this.XstartJump - X);\n        var proc = Math.abs(residual / pathLength);\n\n        if (proc < .5) {\n          Y = 30 - 50 * proc;\n        }\n\n        if (proc >= .5) {\n          var procEnd = 0.5 - (proc - 0.5);\n          Y = 30 - 50 * procEnd;\n        }\n        /*\r\n        var setY = Math.sin(proc*10)*50+30;\r\n        if(setY<=30){\r\n        \t\r\n        \tY = setY;\r\n        }\r\n        */\n\n\n        if (proc < .7) {\n          this.SetState(0);\n          return new StateParam(false, X, Y);\n        }\n\n        if (proc > .7 && proc < .8) {\n          this.SetState(1);\n          return new StateParam(false, X, Y);\n        }\n\n        if (proc > .8 && proc < .9) {\n          this.SetState(2);\n          return new StateParam(false, X, Y);\n        }\n\n        if (proc > .9) {\n          this.SetState(3);\n          return new StateParam(false, X, Y);\n        }\n        /*\r\n        var timeFrame = this.timeFrame/3;\r\n        \t\tif (this.AttackFiendTime+(timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(timeFrame*2)>currentFrameTime){\r\n        \tthis.SetState(0);\r\n        \treturn new StateParam(false,X,Y);\r\n        }\r\n        if (this.AttackFiendTime+(timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(timeFrame*3)>currentFrameTime){\r\n        \tthis.SetState(1);\r\n        \treturn new StateParam(false,X,Y);\r\n        }\r\n        if (this.AttackFiendTime+(timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(timeFrame*4)>currentFrameTime){\r\n        \tthis.SetState(2);\r\n        \treturn new StateParam(false,X,Y);\r\n        }\r\n        if (this.AttackFiendTime+(timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(timeFrame*5)>currentFrameTime){\r\n        \tthis.SetState(3);\r\n        \treturn new StateParam(false,X,Y);\r\n        }\r\n        */\n\n      }\n\n      if (this.MoveFix) {\n        if (new ZonaAttack().ZoneAttack(X, this.randomMoveX, this.ZONA_ATTACK)) {\n          //stop move\n          return new StateParam(true, X, Y);\n        }\n      } else {\n        if (new ZonaAttack().ZoneAttack(X, this.HeroModel.X, this.ZONA_ATTACK)) {\n          //stop move\n          return new StateParam(true, X, Y);\n        }\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = 8;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Speed = Speed;\n    this.ZONA_ATTACK = ZONA_ATTACK;\n    this.HeroModel = HeroModel;\n    this.XstartJump = Xfiend;\n\n    if (MoveFix == true) {\n      this.MoveFix = true;\n      this.randomMoveX = XfixMove;\n    } // move fiend\n\n\n    var random = false;\n\n    if (this.MoveFix) {} else {\n      if (random) {\n        this.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\n      } else {\n        this.randomMoveX = this.HeroModel.X;\n      }\n    }\n\n    this.lengthMove = this.randomMoveX - Xfiend;\n  }\n\n} // Move Fix\n\n\nclass StateFiendMoveFix extends StateFiendMove {\n  constructor(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, XfixMove) {\n    super(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, true, XfixMove);\n    this.Name = \"MoveFix\";\n    this.MoveFix = true;\n    this.randomMoveX = XfixMove;\n  }\n\n} // Move\n\n\nclass StateFiendJump extends StateFiendMove {\n  constructor(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend) {\n    super(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend);\n    this.Name = \"MoveJump\";\n    this.Jump = true;\n  }\n\n}\n\nclass StateFiendAttack extends StateFiendBasic {\n  constructor(State, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      //if (this.AttackFiend){\n      if (this.AttackFiendTime + this.timeFrame * 0 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 2 > currentFrameTime) {\n        this.SetState(4);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 2 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 3 > currentFrameTime) {\n        this.SetState(5);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 3 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 4 > currentFrameTime) {\n        this.SetState(6);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 4 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 5 > currentFrameTime) {\n        this.SetState(7);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 5 < currentFrameTime) {\n        //attack\n        this.SetState(1);\n        return new StateParam(true, X, Y);\n      }\n\n      return new StateParam(false, X, Y); //}\n    };\n\n    this.State = State;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n  }\n\n}\n\nclass StateFiendDead extends StateFiendBasic {\n  constructor(State, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame, Y) {\n    console.log(\" - DEAD  veFix = \");\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      console.log(\"  DEAD proc =  pathLength =\"); //if(this.AttackPlayer){\n      //dead\n      //10\n\n      this.State = 12;\n      return new StateParam(false, X, this.Y); //}\n      //0\n      //this.State=4;\n      //return new StateParam(false,X,this.Y);\n    };\n\n    this.Y = Y; //this.State = State;\n\n    this.State = 12;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n  }\n\n}\n\nclass StateFiend extends StateFiendBasic {\n  constructor(State, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame, Y) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackPlayer) {\n        //dead\n        //10\n        this.State = 12;\n        return new StateParam(false, X, this.Y);\n      } //0\n\n\n      this.State = 4;\n      return new StateParam(false, X, this.Y);\n    };\n\n    this.Y = Y;\n    this.State = State;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n  }\n\n}\n\nclass StateParam {\n  constructor(ChangeStatus, X, Y) {\n    this.ChangeStatus = ChangeStatus;\n    this.X = X;\n    this.Y = Y;\n  }\n\n}\n\nexport { TemplateFiend, StateFiend };","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Fiend.js"],"names":["ZonaAttack","StateFiendBasic","TemplateFiend","constructor","Id","X","Y","timeFrame","CANVAS_WIDTH","ZONA_ATTACK","currentFrameTime","StartX","MaxAttack","StateImage","Speed","GetId","UpdateRandomAttack","HeroModel","AttackPlayer","State","GetAttackPlayer","StateFiendDead","Ystatic","GetAttackFiend","randomAttack","Math","floor","random","StateFiendAttack","StateFiendJump","GetState","SetAttackPlayer","GetStateTime","stateParam","Update","ChangeStatus","StateFiend","Time","StateFiendMoveFix","StateFiendMove","AttackFiendTime","Xfiend","MoveFix","XfixMove","Jump","Name","SetState","StateParam","randomMoveX","pathLength","XstartJump","residual","abs","proc","procEnd","ZoneAttack","lengthMove","AttackFiend","console","log"],"mappings":"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","sourcesContent":["import { ZonaAttack } from './ZonaAttack';\r\nimport { StateFiendBasic } from './StateFiendBasic';\r\n\r\nclass TemplateFiend {\r\n\tId;\r\n\tX;\r\n\tY;\r\n\tYstatic;\r\n\tMaxAttack = 20;\r\n\tStateImage=0;\r\n\tState;\r\n\ttimeFrame;\r\n\tCANVAS_WIDTH;\r\n\tSpeed =20;\r\n\tHeroModel;\r\n\tZONA_ATTACK;\r\n\tconstructor(Id,X,Y,timeFrame,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,StartX){\r\n\t\tthis.Id = Id;\r\n\t\t\r\n\t\tthis.Ystatic =Y;\r\n\t\tthis.Time =0;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.CANVAS_WIDTH = CANVAS_WIDTH;\r\n\t\t\r\n\t\t//this.State = new StateFiend(0,false,false,null,timeFrame,Y);\r\n\t\tthis.State = new StateFiendMoveFix(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n\t\tthis.X=StartX;\r\n\t\t//this.X=X;\r\n\t\tthis.Y=Y;\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t};\r\n\tGetId = function() {\r\n\t\treturn this.Id;\r\n\t};\r\n\tUpdateRandomAttack = function(currentFrameTime,HeroModel) {\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\t\r\n\t\tif (this.AttackPlayer == true || this.State.GetAttackPlayer()){\r\n\t\t\tif (this.AttackPlayer == false){\r\n\t\t\t\t\r\n\t\t\t\tthis.State =new StateFiendDead(1,false,false,currentFrameTime,this.timeFrame,this.Ystatic);\r\n\t\t\t\tthis.AttackPlayer = true;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.State.GetAttackFiend()==false){\r\n\t\t\tvar randomAttack = Math.floor(Math.random() * this.MaxAttack);\r\n\t\t\tif(randomAttack==1){\r\n\t\t\t\tthis.Y = this.Ystatic;\r\n\t\t\t\t//\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t\tthis.State =new StateFiendAttack(1,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif(randomAttack==2){\r\n\t\t\t\t\r\n\t\t\t\t//move\r\n\t\t\t\tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif(randomAttack==3){\r\n\t\t\t\t//jump StateFiendJump\r\n\t\t\t\t//console.log( \" fiend x  this.ZONA_ATTACK =\"+this.ZONA_ATTACK+\" hero   x =  \"+this.X  );\r\n\t\t\t\tthis.State = new StateFiendJump(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t};\r\n\tGetState = function(){\r\n\t\treturn this.State.GetState();\r\n\t};\r\n\tGetAttackPlayer = function(){\r\n\t\treturn this.State.GetAttackPlayer();\r\n\t}\r\n\tSetAttackPlayer = function(AttackPlayer){\r\n\t\tthis.State.SetAttackPlayer(AttackPlayer);\r\n\t}\r\n\tGetStateTime = function(currentFrameTime) {\r\n\t\t//var timeFrame = 400;\r\n\t\tvar stateParam = this.State.Update(currentFrameTime,this.X,this.Y);\r\n\t\tif(stateParam.ChangeStatus){\r\n\t\t\t\r\n\t\t\tthis.State =new StateFiend(1,false,false,currentFrameTime,this.timeFrame,this.Ystatic);\r\n\t\t\t//Update\r\n\t\t}\r\n\t\tthis.X = stateParam.X;\r\n\t\tthis.Y = stateParam.Y;\r\n\t\treturn this.State.GetState();\r\n\t\r\n\t};\r\n}\r\n\r\n\r\n// Move\r\nclass StateFiendMove extends StateFiendBasic {\r\n\tXstartJump;\r\n\trandomMoveX;\r\n\tmoveY;\r\n\tlengthMove;\r\n\tSpeed;\r\n\tZONA_ATTACK;\r\n\tHeroModel;\r\n\tJump = false;\r\n\tMoveFix = false;\r\n\tName =\"Move\";\r\n\t\t\t\t//State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,XfixMove,true\r\n\tconstructor(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,MoveFix,XfixMove){\r\n\t\tsuper();\r\n\t\tthis.State =8;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Speed = Speed;\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tthis.XstartJump = Xfiend;\r\n\t\t\r\n\t\t\r\n\t\tif(MoveFix==true){\r\n\t\t\tthis.MoveFix = true;\r\n\t\t\tthis.randomMoveX =XfixMove;\r\n\t\t}\r\n\t\t// move fiend\r\n\t\tvar random = false;\r\n\t\t\r\n\t\tif(this.MoveFix){\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tif (random){\r\n\t\t\t\tthis.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\r\n\t\t\t} else {\r\n\t\t\t\tthis.randomMoveX = this.HeroModel.X;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.lengthMove = this.randomMoveX - Xfiend;\r\n\t\t\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}\r\n\t\tif (X!=this.randomMoveX){\r\n\t\t\tif(X>this.randomMoveX){\r\n\t\t\t\tX-=this.Speed;\r\n\t\t\t\t//9\r\n\t\t\t\tthis.State =11;\r\n\t\t\t}\r\n\t\t\tif(X<this.randomMoveX){\r\n\t\t\t\tX+=this.Speed;\r\n\t\t\t\t//8\r\n\t\t\t\tthis.State =10;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.Jump) {\r\n\t\t\t//jump  Math.abs\r\n\t\t\tvar pathLength = (this.XstartJump - this.randomMoveX);\r\n\t\t\tvar residual = Math.abs(this.XstartJump - X);\r\n\t\t\tvar proc = Math.abs(residual/pathLength);\r\n\t\t\t\r\n\t\t\tif (proc<.5){\r\n\t\t\t\tY =30-(50*proc);\r\n\t\t\t}\r\n\t\t\tif (proc>=.5){\r\n\t\t\t\tvar procEnd =0.5-(proc-0.5);\r\n\t\t\t\tY =30-(50*procEnd);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tvar setY = Math.sin(proc*10)*50+30;\r\n\t\t\tif(setY<=30){\r\n\t\t\t\t\r\n\t\t\t\tY = setY;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif(proc<.7){\r\n\t\t\t\tthis.SetState(0);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif(proc>.7&&proc<.8){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif(proc>.8&&proc<.9){\r\n\t\t\t\tthis.SetState(2);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif(proc>.9){\r\n\t\t\t\tthis.SetState(3);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tvar timeFrame = this.timeFrame/3;\r\n\r\n\t\t\tif (this.AttackFiendTime+(timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(0);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(2);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(timeFrame*5)>currentFrameTime){\r\n\t\t\t\tthis.SetState(3);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t*/\t\r\n\t\t}\r\n\t\tif(this.MoveFix){\r\n\t\t\tif (new ZonaAttack().ZoneAttack(X,this.randomMoveX,this.ZONA_ATTACK)){\r\n\t\t\t\t\t//stop move\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t\t}\r\n\t\t} else {\r\n\t\t\t\r\n\r\n\t\t\t\tif (new ZonaAttack().ZoneAttack(X,this.HeroModel.X,this.ZONA_ATTACK)){\r\n\t\t\t\t\t//stop move\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\n// Move Fix\r\nclass StateFiendMoveFix extends StateFiendMove {\r\n\tName =\"MoveFix\";\r\n\tconstructor(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,XfixMove){\r\n\t\tsuper(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,true,XfixMove);\r\n\t\t\r\n\t\tthis.MoveFix = true;\r\n\t\tthis.randomMoveX =XfixMove;\r\n\t\t \r\n\t};\r\n\r\n}\r\n\r\n// Move\r\nclass StateFiendJump extends StateFiendMove {\r\n\tName =\"MoveJump\";\r\n\tconstructor(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend){\r\n\t\tsuper(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend);\r\n\t\t\r\n\t\tthis.Jump = true;\r\n\t};\r\n\r\n}\r\nclass StateFiendAttack extends StateFiendBasic{\r\n\t\tconstructor(State,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame){\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.State = State;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t//if (this.AttackFiend){\r\n\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(4);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(5);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(6);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*5)>currentFrameTime){\r\n\t\t\t\tthis.SetState(7);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime){\r\n\t\t\t\t//attack\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t}\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t//}\r\n\t\t\r\n\t\t\r\n\t}\r\n}\r\nclass StateFiendDead extends StateFiendBasic{\r\n\tconstructor(State,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame,Y){\r\n\t\tconsole.log(    \" - DEAD  veFix = \" );\r\n\t\tsuper();\r\n\t\tthis.Y = Y;\r\n\t\t//this.State = State;\r\n\t\tthis.State =12;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\tconsole.log( \"  DEAD proc =  pathLength =\"  );\r\n\t\t//if(this.AttackPlayer){\r\n\t\t\t//dead\r\n\t\t\t//10\r\n\t\t\tthis.State =12;\r\n\t\t\treturn new StateParam(false,X,this.Y);\r\n\t\t//}\r\n\t\t//0\r\n\t\t//this.State=4;\r\n\t\t//return new StateParam(false,X,this.Y);\r\n\t}\r\n\t\r\n}\r\n\r\nclass StateFiend extends StateFiendBasic{\r\n\r\n\tconstructor(State,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame,Y){\r\n\t\tsuper();\r\n\t\tthis.Y = Y;\r\n\t\tthis.State = State;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t};\r\n\t\r\n\t\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\r\n\t\tif(this.AttackPlayer){\r\n\t\t\t//dead\r\n\t\t\t//10\r\n\t\t\tthis.State =12;\r\n\t\t\treturn new StateParam(false,X,this.Y);\r\n\t\t}\r\n\t\t//0\r\n\t\tthis.State=4;\r\n\t\treturn new StateParam(false,X,this.Y);\r\n\t}\r\n}\r\nclass StateParam{\r\n\tChangeStatus;\r\n\tX;\r\n\tY;\r\n\tconstructor(ChangeStatus,X,Y){\r\n\t\tthis.ChangeStatus = ChangeStatus;\r\n\t\tthis.X=X;\r\n\t\tthis.Y=Y;\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport { TemplateFiend, StateFiend }"]},"metadata":{},"sourceType":"module"}