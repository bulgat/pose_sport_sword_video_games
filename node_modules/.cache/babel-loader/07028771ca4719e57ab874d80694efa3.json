{"ast":null,"code":"class TemplateFiend {\n  constructor(Id, X, Y, timeFrame, CANVAS_WIDTH, HeroModel) {\n    this.MaxAttack = 20;\n    this.StateImage = 0;\n    this.Speed = 2;\n\n    this.GetId = function () {\n      return this.Id;\n    };\n\n    this.RandomAttack = function (currentFrameTime) {\n      if (this.State.GetAttackFiend() == false) {\n        var randomAttack = Math.floor(Math.random() * this.MaxAttack);\n\n        if (randomAttack == 1) {\n          //this.AttackFiend = true;\n          //this.AttackFiendTime = currentFrameTime;\n          this.State = new StateFiend(1, false, true, currentFrameTime, this.timeFrame);\n        }\n\n        if (randomAttack == 2) {\n          //move\n          this.State = new StateFiendMove(1, currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.MaxAttack);\n        }\n      }\n    };\n\n    this.GetState = function () {\n      return this.State.GetState();\n    };\n\n    this.GetAttackPlayer = function () {\n      return this.State.GetAttackPlayer();\n    };\n\n    this.SetAttackPlayer = function (AttackPlayer) {\n      this.State.SetAttackPlayer(AttackPlayer);\n    };\n\n    this.GetStateTime = function (currentFrameTime) {\n      //var timeFrame = 400;\n      var stateParam = this.State.Update(currentFrameTime, this.X, this.Y);\n\n      if (stateParam.ChangeStatus) {\n        this.State = new StateFiend(1, false, false, currentFrameTime, this.timeFrame);\n      }\n\n      this.X = stateParam.X;\n      this.Y = stateParam.Y;\n      return this.State.GetState();\n    };\n\n    this.Id = Id;\n    this.X = X;\n    this.Y = Y;\n    this.Time = 0;\n    this.timeFrame = timeFrame;\n    this.CANVAS_WIDTH = CANVAS_WIDTH;\n    this.State = new StateFiend(0, false, false, null, timeFrame);\n    this.HeroModel = HeroModel;\n  }\n\n}\n\nclass StateFiendBasic {\n  constructor() {\n    this.State = 10;\n    this.AttackFiend = false;\n    this.AttackPlayer = false;\n\n    this.SetState = function (State) {\n      this.State = State;\n    };\n\n    this.GetState = function () {\n      return this.State;\n    };\n\n    this.GetAttackFiend = function () {\n      return this.AttackFiend;\n    };\n\n    this.GetAttackPlayer = function () {\n      return this.AttackPlayer;\n    };\n\n    this.SetAttackPlayer = function (AttackPlayer) {\n      this.AttackPlayer = AttackPlayer;\n    };\n\n    this.GetAttackFiendTime = function () {\n      return this.AttackFiendTime;\n    };\n  }\n\n} // Move\n\n\nclass StateFiendMove extends StateFiendBasic {\n  constructor(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, MaxAttack) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 9 < currentFrameTime) {\n        this.SetState(1);\n        return new StateParam(true, X, Y);\n      }\n\n      if (X != this.randomMoveX) {\n        if (X > this.randomMoveX) {\n          X -= this.Speed;\n          this.State = 9;\n        }\n\n        if (X < this.randomMoveX) {\n          X += this.Speed;\n          this.State = 8;\n        }\n      }\n\n      if (X <= this.randomMoveX + this.MaxAttack && X >= this.randomMoveX - this.MaxAttack) {}\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = 8;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Speed = Speed;\n    this.MaxAttack = MaxAttack;\n    this.HeroModel = HeroModel;\n    console.log(\" ---- imDama Fr = \" + HeroModel.X); // move fiend\n\n    var random = false;\n\n    if (random) {\n      this.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\n    } else {\n      this.randomMoveX = HeroModel.X;\n    }\n\n    console.log(\" = c  = \" + this.randomMoveX);\n  }\n\n} // Attack\n\n\nclass StateFiend extends StateFiendBasic {\n  //State = 0;\n  constructor(State, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiend) {\n        if (this.AttackFiendTime + this.timeFrame * 0 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 2 > currentFrameTime) {\n          this.SetState(1);\n          return new StateParam(false, X, Y);\n        }\n\n        if (this.AttackFiendTime + this.timeFrame * 2 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 3 > currentFrameTime) {\n          this.SetState(2);\n          return new StateParam(false, X, Y);\n        }\n\n        if (this.AttackFiendTime + this.timeFrame * 3 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 4 > currentFrameTime) {\n          this.SetState(3);\n          return new StateParam(false, X, Y);\n        }\n\n        if (this.AttackFiendTime + this.timeFrame * 4 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 5 > currentFrameTime) {\n          this.SetState(4);\n          return new StateParam(false, X, Y);\n        }\n\n        if (this.AttackFiendTime + this.timeFrame * 5 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 6 > currentFrameTime) {\n          this.SetState(5);\n          return new StateParam(false, X, Y);\n        }\n\n        if (this.AttackFiendTime + this.timeFrame * 6 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 7 > currentFrameTime) {\n          this.SetState(6);\n          return new StateParam(false, X, Y);\n        }\n\n        if (this.AttackFiendTime + this.timeFrame * 7 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 8 > currentFrameTime) {\n          this.SetState(7);\n          return new StateParam(false, X, Y);\n        }\n\n        if (this.AttackFiendTime + this.timeFrame * 9 < currentFrameTime) {\n          //attack\n          this.SetState(1);\n          return new StateParam(true, X, Y);\n        }\n\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackPlayer) {\n        //dead\n        this.State = 10;\n        return new StateParam(false, X, Y);\n      }\n\n      this.State = 0;\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = State;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n  }\n\n}\n\nclass StateParam {\n  constructor(ChangeStatus, X, Y) {\n    this.ChangeStatus = ChangeStatus;\n    this.X = X;\n    this.Y = Y;\n  }\n\n}\n\nexport { TemplateFiend, StateFiend };","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Fiend.js"],"names":["TemplateFiend","constructor","Id","X","Y","timeFrame","CANVAS_WIDTH","HeroModel","MaxAttack","StateImage","Speed","GetId","RandomAttack","currentFrameTime","State","GetAttackFiend","randomAttack","Math","floor","random","StateFiend","StateFiendMove","GetState","GetAttackPlayer","SetAttackPlayer","AttackPlayer","GetStateTime","stateParam","Update","ChangeStatus","Time","StateFiendBasic","AttackFiend","SetState","GetAttackFiendTime","AttackFiendTime","StateParam","randomMoveX","console","log"],"mappings":"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","sourcesContent":["\r\nclass TemplateFiend {\r\n\tId;\r\n\tX;\r\n\tY;\r\n\tMaxAttack = 20;\r\n\tStateImage=0;\r\n\tState;\r\n\ttimeFrame;\r\n\tCANVAS_WIDTH;\r\n\tSpeed =2;\r\n\tHeroModel;\r\n\tconstructor(Id,X,Y,timeFrame,CANVAS_WIDTH,HeroModel){\r\n\t\tthis.Id = Id;\r\n\t\tthis.X=X;\r\n\t\tthis.Y=Y;\r\n\t\tthis.Time =0;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.CANVAS_WIDTH = CANVAS_WIDTH;\r\n\t\tthis.State = new StateFiend(0,false,false,null,timeFrame);\r\n\t\tthis.HeroModel = HeroModel;\r\n\t};\r\n\tGetId = function() {\r\n\t\treturn this.Id;\r\n\t};\r\n\tRandomAttack = function(currentFrameTime) {\r\n\t\t\r\n\t\tif(this.State.GetAttackFiend()==false){\r\n\t\t\tvar randomAttack = Math.floor(Math.random() * this.MaxAttack);\r\n\t\t\tif(randomAttack==1){\r\n\t\t\t\t//this.AttackFiend = true;\r\n\t\t\t\t//this.AttackFiendTime = currentFrameTime;\r\n\t\t\t\t\r\n\t\r\n\t\t\t\t\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(randomAttack==2){\r\n\t\t\t\t//move\r\n\t\t\t\tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.MaxAttack);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tGetState = function(){\r\n\t\treturn this.State.GetState();\r\n\t};\r\n\tGetAttackPlayer = function(){\r\n\t\treturn this.State.GetAttackPlayer();\r\n\t}\r\n\tSetAttackPlayer = function(AttackPlayer){\r\n\t\tthis.State.SetAttackPlayer(AttackPlayer);\r\n\t}\r\n\tGetStateTime = function(currentFrameTime) {\r\n\t\t//var timeFrame = 400;\r\n\t\tvar stateParam = this.State.Update(currentFrameTime,this.X,this.Y);\r\n\t\tif(stateParam.ChangeStatus){\r\n\t\t\t\r\n\t\t\tthis.State =new StateFiend(1,false,false,currentFrameTime,this.timeFrame);\r\n\t\t}\r\n\t\tthis.X = stateParam.X;\r\n\t\tthis.Y = stateParam.Y;\r\n\t\treturn this.State.GetState();\r\n\t\r\n\t};\r\n}\r\nclass StateFiendBasic {\r\n\tState = 10;\r\n\ttimeFrame;\r\n\tAttackFiend=false;\r\n\tAttackPlayer=false;\r\n\tAttackFiendTime;\r\n\tSetState = function(State) {\r\n\t\tthis.State = State;\r\n\t};\r\n\tGetState = function() {\r\n\t\treturn this.State;\r\n\t};\r\n\tGetAttackFiend= function() {\r\n\t\treturn this.AttackFiend;\r\n\t};\r\n\tGetAttackPlayer = function() {\r\n\t\treturn this.AttackPlayer;\r\n\t};\r\n\tSetAttackPlayer = function(AttackPlayer){\r\n\t\tthis.AttackPlayer=AttackPlayer;\r\n\t}\r\n\tGetAttackFiendTime = function() {\r\n\t\treturn this.AttackFiendTime;\r\n\t};\r\n}\r\n// Move\r\nclass StateFiendMove extends StateFiendBasic {\r\n\trandomMoveX;\r\n\tSpeed;\r\n\tMaxAttack;\r\n\tHeroModel;\r\n\tconstructor(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,MaxAttack){\r\n\t\tsuper();\r\n\t\tthis.State =8;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Speed = Speed;\r\n\t\tthis.MaxAttack = MaxAttack;\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tconsole.log(   \" ---- imDama Fr = \"+HeroModel.X );\r\n\t\t\r\n\t\t// move fiend\r\n\t\tvar random = false;\r\n\t\t\r\n\t\tif (random){\r\n\t\t\tthis.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\r\n\t\t} else {\r\n\t\t\tthis.randomMoveX = HeroModel.X;\r\n\t\t}\r\n\t\tconsole.log( \" = c  = \"+this.randomMoveX);\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}\r\n\t\tif (X!=this.randomMoveX){\r\n\t\t\tif(X>this.randomMoveX){\r\n\t\t\t\tX-=this.Speed;\r\n\t\t\t\tthis.State =9;\r\n\t\t\t}\r\n\t\t\tif(X<this.randomMoveX){\r\n\t\t\t\tX+=this.Speed;\r\n\t\t\t\t\r\n\t\t\t\tthis.State =8;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (X<=this.randomMoveX+this.MaxAttack && X>=this.randomMoveX-this.MaxAttack)\r\n\t\t{\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\n// Attack\r\nclass StateFiend extends StateFiendBasic{\r\n\t//State = 0;\r\n\t\r\n\t\r\n\tconstructor(State,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame){\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.State = State;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t};\r\n\t\r\n\t\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\tif (this.AttackFiend){\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(2);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(3);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*5)>currentFrameTime){\r\n\t\t\t\tthis.SetState(4);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*6)>currentFrameTime){\r\n\t\t\t\tthis.SetState(5);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*6)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*7)>currentFrameTime){\r\n\t\t\t\tthis.SetState(6);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*7)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*8)>currentFrameTime){\r\n\t\t\t\tthis.SetState(7);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\t//attack\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t}\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.AttackPlayer){\r\n\t\t\t//dead\r\n\t\t\tthis.State =10;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\tthis.State=0;\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\nclass StateParam{\r\n\tChangeStatus;\r\n\tX;\r\n\tY;\r\n\tconstructor(ChangeStatus,X,Y){\r\n\t\tthis.ChangeStatus = ChangeStatus;\r\n\t\tthis.X=X;\r\n\t\tthis.Y=Y;\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport { TemplateFiend, StateFiend }"]},"metadata":{},"sourceType":"module"}