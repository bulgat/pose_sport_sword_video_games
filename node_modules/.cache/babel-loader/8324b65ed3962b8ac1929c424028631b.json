{"ast":null,"code":"import { ZonaAttack } from './ZonaAttack';\n\nclass TemplateFiend {\n  constructor(Id, X, Y, timeFrame, CANVAS_WIDTH, ZONA_ATTACK) {\n    this.MaxAttack = 20;\n    this.StateImage = 0;\n    this.Speed = 20;\n\n    this.GetId = function () {\n      return this.Id;\n    };\n\n    this.UpdateRandomAttack = function (currentFrameTime, HeroModel) {\n      this.HeroModel = HeroModel;\n\n      if (this.State.GetAttackFiend() == false) {\n        var randomAttack = Math.floor(Math.random() * this.MaxAttack);\n\n        if (randomAttack == 1) {\n          //\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\n          this.State = new StateFiendAttack(1, false, true, currentFrameTime, this.timeFrame);\n        }\n        /*\r\n        if(randomAttack==2){\r\n        \t\r\n        \t//move\r\n        \tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n        \t\r\n        }\r\n        */\n\n\n        if (randomAttack == 3) {\n          //jump StateFiendJump\n          //console.log( \" fiend x  this.ZONA_ATTACK =\"+this.ZONA_ATTACK+\" hero   x =  \"+this.X  );\n          this.State = new StateFiendJump(1, currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.ZONA_ATTACK, this.X);\n        }\n      }\n    };\n\n    this.GetState = function () {\n      return this.State.GetState();\n    };\n\n    this.GetAttackPlayer = function () {\n      return this.State.GetAttackPlayer();\n    };\n\n    this.SetAttackPlayer = function (AttackPlayer) {\n      this.State.SetAttackPlayer(AttackPlayer);\n    };\n\n    this.GetStateTime = function (currentFrameTime) {\n      //var timeFrame = 400;\n      var stateParam = this.State.Update(currentFrameTime, this.X, this.Y);\n\n      if (stateParam.ChangeStatus) {\n        this.State = new StateFiend(1, false, false, currentFrameTime, this.timeFrame, this.X); //Update\n      }\n\n      this.X = stateParam.X;\n      this.Y = stateParam.Y;\n      return this.State.GetState();\n    };\n\n    this.Id = Id;\n    this.X = X;\n    this.Y = Y;\n    this.Time = 0;\n    this.timeFrame = timeFrame;\n    this.CANVAS_WIDTH = CANVAS_WIDTH;\n    this.State = new StateFiend(0, false, false, null, timeFrame, X);\n    this.ZONA_ATTACK = ZONA_ATTACK;\n  }\n\n}\n\nclass StateFiendBasic {\n  constructor() {\n    this.State = 10;\n    this.AttackFiend = false;\n    this.AttackPlayer = false;\n\n    this.SetState = function (State) {\n      this.State = State;\n    };\n\n    this.GetState = function () {\n      return this.State;\n    };\n\n    this.GetAttackFiend = function () {\n      return this.AttackFiend;\n    };\n\n    this.GetAttackPlayer = function () {\n      return this.AttackPlayer;\n    };\n\n    this.SetAttackPlayer = function (AttackPlayer) {\n      this.AttackPlayer = AttackPlayer;\n    };\n\n    this.GetAttackFiendTime = function () {\n      return this.AttackFiendTime;\n    };\n  }\n\n}\n/*\r\nclass StateFiendStatic extends StateFiendBasic {\r\n\t\r\n}\r\n*/\n// Move\n\n\nclass StateFiendMove extends StateFiendBasic {\n  constructor(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 9 < currentFrameTime) {\n        this.SetState(1);\n        return new StateParam(true, X, Y);\n      }\n\n      if (X != this.randomMoveX) {\n        if (X > this.randomMoveX) {\n          X -= this.Speed;\n          this.State = 9;\n        }\n\n        if (X < this.randomMoveX) {\n          X += this.Speed;\n          this.State = 8;\n        }\n      } //jump  Math.abs\n\n\n      var kol = this.XstartJump - this.randomMoveX;\n      var stop = Math.abs(this.XstartJump - X);\n      var proc = stop / kol;\n      var kkk = Math.sin(proc * 10) * 10 + 30;\n      Y = kkk;\n      console.log(X + \" = \" + kkk + \" =  \" + this.XstartJump + \" this.X   NA  \" + stop + \"  T iend =\" + kol + \"  %  proc = \" + proc);\n\n      if (new ZonaAttack().ZoneAttack(X, this.HeroModel.X, this.ZONA_ATTACK)) {\n        //stop move\n        return new StateParam(true, X, Y);\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = 8;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Speed = Speed;\n    this.ZONA_ATTACK = ZONA_ATTACK;\n    this.HeroModel = HeroModel;\n    this.XstartJump = Xfiend; // move fiend\n\n    var random = false;\n\n    if (random) {\n      this.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\n    } else {\n      this.randomMoveX = this.HeroModel.X;\n    }\n\n    this.lengthMove = this.randomMoveX - Xfiend;\n  }\n\n} // Move\n\n\nclass StateFiendJump extends StateFiendMove {\n  constructor(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend) {\n    super(State, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend);\n    console.log(\" --   this.randomMoveX = \" + this.randomMoveX);\n  }\n\n}\n\nclass StateFiendAttack extends StateFiendBasic {\n  constructor(State, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      //if (this.AttackFiend){\n\n      /*\r\n      if (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n      \tthis.SetState(1);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      if (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n      \tthis.SetState(2);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      if (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n      \tthis.SetState(3);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      */\n      if (this.AttackFiendTime + this.timeFrame * 0 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 2 > currentFrameTime) {\n        this.SetState(4);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 2 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 3 > currentFrameTime) {\n        this.SetState(5);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 3 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 4 > currentFrameTime) {\n        this.SetState(6);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 4 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 5 > currentFrameTime) {\n        this.SetState(7);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 5 < currentFrameTime) {\n        //attack\n        this.SetState(1);\n        return new StateParam(true, X, Y);\n      }\n\n      return new StateParam(false, X, Y); //}\n    };\n\n    this.State = State;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n  }\n\n} // Attack\n\n\nclass StateFiend extends StateFiendBasic {\n  //State = 0;\n  constructor(State, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame, _X) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      /*\r\n      if (this.AttackFiend){\r\n      \t/*\r\n      \tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n      \t\tthis.SetState(1);\r\n      \t\treturn new StateParam(false,X,Y);\r\n      \t}\r\n      \tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n      \t\tthis.SetState(2);\r\n      \t\treturn new StateParam(false,X,Y);\r\n      \t}\r\n      \tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n      \t\tthis.SetState(3);\r\n      \t\treturn new StateParam(false,X,Y);\r\n      \t}\r\n      \t*/\n\n      /*\r\n      if (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n      \tthis.SetState(4);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      if (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n      \tthis.SetState(5);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      if (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n      \tthis.SetState(6);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      if (this.AttackFiendTime+(this.timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*5)>currentFrameTime){\r\n      \tthis.SetState(7);\r\n      \treturn new StateParam(false,X,Y);\r\n      }\r\n      \r\n      \r\n      if (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime){\r\n      \t//attack\r\n      \tthis.SetState(1);\r\n      \treturn new StateParam(true,X,Y);\r\n      }\r\n      return new StateParam(false,X,Y);\r\n      }\r\n      */\n      if (this.AttackPlayer) {\n        //dead\n        this.State = 10;\n        return new StateParam(false, X, Y);\n      } //0\n\n\n      this.State = 4;\n      return new StateParam(false, X, Y);\n    };\n\n    this.X = _X;\n    this.State = State;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n  }\n\n}\n\nclass StateParam {\n  constructor(ChangeStatus, X, Y) {\n    this.ChangeStatus = ChangeStatus;\n    this.X = X;\n    this.Y = Y;\n  }\n\n}\n\nexport { TemplateFiend, StateFiend };","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Fiend.js"],"names":["ZonaAttack","TemplateFiend","constructor","Id","X","Y","timeFrame","CANVAS_WIDTH","ZONA_ATTACK","MaxAttack","StateImage","Speed","GetId","UpdateRandomAttack","currentFrameTime","HeroModel","State","GetAttackFiend","randomAttack","Math","floor","random","StateFiendAttack","StateFiendJump","GetState","GetAttackPlayer","SetAttackPlayer","AttackPlayer","GetStateTime","stateParam","Update","ChangeStatus","StateFiend","Time","StateFiendBasic","AttackFiend","SetState","GetAttackFiendTime","AttackFiendTime","StateFiendMove","Xfiend","StateParam","randomMoveX","kol","XstartJump","stop","abs","proc","kkk","sin","console","log","ZoneAttack","lengthMove"],"mappings":"AAAA,SAASA,UAAT,QAA2B,cAA3B;;AAEA,MAAMC,aAAN,CAAoB;AAYnBC,EAAAA,WAAW,CAACC,EAAD,EAAIC,CAAJ,EAAMC,CAAN,EAAQC,SAAR,EAAkBC,YAAlB,EAA+BC,WAA/B,EAA2C;AAAA,SARtDC,SAQsD,GAR1C,EAQ0C;AAAA,SAPtDC,UAOsD,GAP3C,CAO2C;AAAA,SAHtDC,KAGsD,GAH/C,EAG+C;;AAAA,SAWtDC,KAXsD,GAW9C,YAAW;AAClB,aAAO,KAAKT,EAAZ;AACA,KAbqD;;AAAA,SActDU,kBAdsD,GAcjC,UAASC,gBAAT,EAA0BC,SAA1B,EAAqC;AACzD,WAAKA,SAAL,GAAiBA,SAAjB;;AACA,UAAG,KAAKC,KAAL,CAAWC,cAAX,MAA6B,KAAhC,EAAsC;AACrC,YAAIC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAKZ,SAAhC,CAAnB;;AACA,YAAGS,YAAY,IAAE,CAAjB,EAAmB;AAElB;AACA,eAAKF,KAAL,GAAY,IAAIM,gBAAJ,CAAqB,CAArB,EAAuB,KAAvB,EAA6B,IAA7B,EAAkCR,gBAAlC,EAAmD,KAAKR,SAAxD,CAAZ;AACA;AACD;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AACG,YAAGY,YAAY,IAAE,CAAjB,EAAmB;AAClB;AACA;AACA,eAAKF,KAAL,GAAa,IAAIO,cAAJ,CAAmB,CAAnB,EAAqBT,gBAArB,EAAsC,KAAKR,SAA3C,EAAqD,KAAKC,YAA1D,EAAuE,KAAKI,KAA5E,EAAkF,KAAKI,SAAvF,EAAiG,KAAKP,WAAtG,EAAmH,KAAKJ,CAAxH,CAAb;AACA;AACD;AACD,KArCqD;;AAAA,SAsCtDoB,QAtCsD,GAsC3C,YAAU;AACpB,aAAO,KAAKR,KAAL,CAAWQ,QAAX,EAAP;AACA,KAxCqD;;AAAA,SAyCtDC,eAzCsD,GAyCpC,YAAU;AAC3B,aAAO,KAAKT,KAAL,CAAWS,eAAX,EAAP;AACA,KA3CqD;;AAAA,SA4CtDC,eA5CsD,GA4CpC,UAASC,YAAT,EAAsB;AACvC,WAAKX,KAAL,CAAWU,eAAX,CAA2BC,YAA3B;AACA,KA9CqD;;AAAA,SA+CtDC,YA/CsD,GA+CvC,UAASd,gBAAT,EAA2B;AACzC;AACA,UAAIe,UAAU,GAAG,KAAKb,KAAL,CAAWc,MAAX,CAAkBhB,gBAAlB,EAAmC,KAAKV,CAAxC,EAA0C,KAAKC,CAA/C,CAAjB;;AACA,UAAGwB,UAAU,CAACE,YAAd,EAA2B;AAE1B,aAAKf,KAAL,GAAY,IAAIgB,UAAJ,CAAe,CAAf,EAAiB,KAAjB,EAAuB,KAAvB,EAA6BlB,gBAA7B,EAA8C,KAAKR,SAAnD,EAA6D,KAAKF,CAAlE,CAAZ,CAF0B,CAG1B;AACA;;AACD,WAAKA,CAAL,GAASyB,UAAU,CAACzB,CAApB;AACA,WAAKC,CAAL,GAASwB,UAAU,CAACxB,CAApB;AACA,aAAO,KAAKW,KAAL,CAAWQ,QAAX,EAAP;AAEA,KA3DqD;;AACrD,SAAKrB,EAAL,GAAUA,EAAV;AACA,SAAKC,CAAL,GAAOA,CAAP;AACA,SAAKC,CAAL,GAAOA,CAAP;AACA,SAAK4B,IAAL,GAAW,CAAX;AACA,SAAK3B,SAAL,GAAiBA,SAAjB;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACA,SAAKS,KAAL,GAAa,IAAIgB,UAAJ,CAAe,CAAf,EAAiB,KAAjB,EAAuB,KAAvB,EAA6B,IAA7B,EAAkC1B,SAAlC,EAA4CF,CAA5C,CAAb;AAEA,SAAKI,WAAL,GAAmBA,WAAnB;AACA;;AAtBkB;;AAyEpB,MAAM0B,eAAN,CAAsB;AAAA;AAAA,SACrBlB,KADqB,GACb,EADa;AAAA,SAGrBmB,WAHqB,GAGT,KAHS;AAAA,SAIrBR,YAJqB,GAIR,KAJQ;;AAAA,SAOrBS,QAPqB,GAOV,UAASpB,KAAT,EAAgB;AAC1B,WAAKA,KAAL,GAAaA,KAAb;AACA,KAToB;;AAAA,SAUrBQ,QAVqB,GAUV,YAAW;AACrB,aAAO,KAAKR,KAAZ;AACA,KAZoB;;AAAA,SAarBC,cAbqB,GAaL,YAAW;AAC1B,aAAO,KAAKkB,WAAZ;AACA,KAfoB;;AAAA,SAgBrBV,eAhBqB,GAgBH,YAAW;AAC5B,aAAO,KAAKE,YAAZ;AACA,KAlBoB;;AAAA,SAmBrBD,eAnBqB,GAmBH,UAASC,YAAT,EAAsB;AACvC,WAAKA,YAAL,GAAkBA,YAAlB;AACA,KArBoB;;AAAA,SAsBrBU,kBAtBqB,GAsBA,YAAW;AAC/B,aAAO,KAAKC,eAAZ;AACA,KAxBoB;AAAA;;AAAA;AA0BtB;AACA;AACA;AACA;AACA;AAEA;;;AACA,MAAMC,cAAN,SAA6BL,eAA7B,CAA6C;AAQ5ChC,EAAAA,WAAW,CAACc,KAAD,EAAOsB,eAAP,EAAuBhC,SAAvB,EAAiCC,YAAjC,EAA8CI,KAA9C,EAAoDI,SAApD,EAA8DP,WAA9D,EAA0EgC,MAA1E,EAAiF;AAC3F;;AAD2F,SAqB5FV,MArB4F,GAqBnF,UAAShB,gBAAT,EAA0BV,CAA1B,EAA4BC,CAA5B,EAA+B;AAEvC,UAAI,KAAKiC,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAA5C,EAA6D;AAC3D,aAAKsB,QAAL,CAAc,CAAd;AACA,eAAO,IAAIK,UAAJ,CAAe,IAAf,EAAoBrC,CAApB,EAAsBC,CAAtB,CAAP;AACD;;AACD,UAAID,CAAC,IAAE,KAAKsC,WAAZ,EAAwB;AACvB,YAAGtC,CAAC,GAAC,KAAKsC,WAAV,EAAsB;AACrBtC,UAAAA,CAAC,IAAE,KAAKO,KAAR;AACA,eAAKK,KAAL,GAAY,CAAZ;AACA;;AACD,YAAGZ,CAAC,GAAC,KAAKsC,WAAV,EAAsB;AACrBtC,UAAAA,CAAC,IAAE,KAAKO,KAAR;AAEA,eAAKK,KAAL,GAAY,CAAZ;AACA;AACD,OAhBsC,CAiBvC;;;AACF,UAAI2B,GAAG,GAAI,KAAKC,UAAL,GAAkB,KAAKF,WAAlC;AACA,UAAIG,IAAI,GAAG1B,IAAI,CAAC2B,GAAL,CAAS,KAAKF,UAAL,GAAkBxC,CAA3B,CAAX;AACA,UAAI2C,IAAI,GAAIF,IAAI,GAACF,GAAjB;AACA,UAAIK,GAAG,GAAG7B,IAAI,CAAC8B,GAAL,CAASF,IAAI,GAAC,EAAd,IAAkB,EAAlB,GAAqB,EAA/B;AACA1C,MAAAA,CAAC,GAAG2C,GAAJ;AAEAE,MAAAA,OAAO,CAACC,GAAR,CAAY/C,CAAC,GAAC,KAAF,GAAQ4C,GAAR,GAAY,MAAZ,GAAmB,KAAKJ,UAAxB,GAAmC,gBAAnC,GAAoDC,IAApD,GAAyD,YAAzD,GAAsEF,GAAtE,GAA2E,cAA3E,GAA2FI,IAAvG;;AAEE,UAAI,IAAI/C,UAAJ,GAAiBoD,UAAjB,CAA4BhD,CAA5B,EAA8B,KAAKW,SAAL,CAAeX,CAA7C,EAA+C,KAAKI,WAApD,CAAJ,EAAqE;AACpE;AAEA,eAAO,IAAIiC,UAAJ,CAAe,IAAf,EAAoBrC,CAApB,EAAsBC,CAAtB,CAAP;AACA;;AAED,aAAO,IAAIoC,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP;AACA,KAtD2F;;AAE3F,SAAKW,KAAL,GAAY,CAAZ;AACA,SAAKsB,eAAL,GAAuBA,eAAvB;AACA,SAAKhC,SAAL,GAAiBA,SAAjB;AACA,SAAKK,KAAL,GAAaA,KAAb;AACA,SAAKH,WAAL,GAAmBA,WAAnB;AACA,SAAKO,SAAL,GAAiBA,SAAjB;AACA,SAAK6B,UAAL,GAAkBJ,MAAlB,CAR2F,CAU3F;;AACA,QAAInB,MAAM,GAAG,KAAb;;AAEA,QAAIA,MAAJ,EAAW;AACV,WAAKqB,WAAL,GAAmBvB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBd,YAA3B,CAAnB;AACA,KAFD,MAEO;AACN,WAAKmC,WAAL,GAAmB,KAAK3B,SAAL,CAAeX,CAAlC;AACA;;AACD,SAAKiD,UAAL,GAAkB,KAAKX,WAAL,GAAmBF,MAArC;AAEA;;AA5B2C,C,CAgE7C;;;AACA,MAAMjB,cAAN,SAA6BgB,cAA7B,CAA4C;AAC3CrC,EAAAA,WAAW,CAACc,KAAD,EAAOsB,eAAP,EAAuBhC,SAAvB,EAAiCC,YAAjC,EAA8CI,KAA9C,EAAoDI,SAApD,EAA8DP,WAA9D,EAA0EgC,MAA1E,EAAiF;AAC3F,UAAMxB,KAAN,EAAYsB,eAAZ,EAA4BhC,SAA5B,EAAsCC,YAAtC,EAAmDI,KAAnD,EAAyDI,SAAzD,EAAmEP,WAAnE,EAA+EgC,MAA/E;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAe,8BAA4B,KAAKT,WAAhD;AACA;;AAJ0C;;AAM5C,MAAMpB,gBAAN,SAA+BY,eAA/B,CAA8C;AAC5ChC,EAAAA,WAAW,CAACc,KAAD,EAAOW,YAAP,EAAoBQ,WAApB,EAAgCG,eAAhC,EAAgDhC,SAAhD,EAA0D;AACrE;;AADqE,SAStEwB,MATsE,GAS7D,UAAShB,gBAAT,EAA0BV,CAA1B,EAA4BC,CAA5B,EAA+B;AACvC;;AACC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACG,UAAI,KAAKiC,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAxC,IAA0D,KAAKwB,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAtG,EAAuH;AACtH,aAAKsB,QAAL,CAAc,CAAd;AACA,eAAO,IAAIK,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP;AACA;;AACD,UAAI,KAAKiC,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAxC,IAA0D,KAAKwB,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAtG,EAAuH;AACtH,aAAKsB,QAAL,CAAc,CAAd;AACA,eAAO,IAAIK,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP;AACA;;AACD,UAAI,KAAKiC,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAxC,IAA0D,KAAKwB,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAtG,EAAuH;AACtH,aAAKsB,QAAL,CAAc,CAAd;AACA,eAAO,IAAIK,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP;AACA;;AACD,UAAI,KAAKiC,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAxC,IAA0D,KAAKwB,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAAtG,EAAuH;AACtH,aAAKsB,QAAL,CAAc,CAAd;AACA,eAAO,IAAIK,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP;AACA;;AAGD,UAAI,KAAKiC,eAAL,GAAsB,KAAKhC,SAAL,GAAe,CAArC,GAAwCQ,gBAA5C,EAA6D;AAC5D;AACA,aAAKsB,QAAL,CAAc,CAAd;AACA,eAAO,IAAIK,UAAJ,CAAe,IAAf,EAAoBrC,CAApB,EAAsBC,CAAtB,CAAP;AACA;;AACD,aAAO,IAAIoC,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP,CAvCsC,CAwCvC;AAGA,KApDqE;;AAGrE,SAAKW,KAAL,GAAaA,KAAb;AACA,SAAKW,YAAL,GAAoBA,YAApB;AACA,SAAKQ,WAAL,GAAmBA,WAAnB;AACA,SAAKG,eAAL,GAAuBA,eAAvB;AACA,SAAKhC,SAAL,GAAiBA,SAAjB;AACA;;AAT4C,C,CAwD9C;;;AACA,MAAM0B,UAAN,SAAyBE,eAAzB,CAAwC;AACvC;AAGAhC,EAAAA,WAAW,CAACc,KAAD,EAAOW,YAAP,EAAoBQ,WAApB,EAAgCG,eAAhC,EAAgDhC,SAAhD,EAA0DF,EAA1D,EAA4D;AACtE;;AADsE,SAWvE0B,MAXuE,GAW9D,UAAShB,gBAAT,EAA0BV,CAA1B,EAA4BC,CAA5B,EAA+B;AACvC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,UAAG,KAAKsB,YAAR,EAAqB;AACpB;AACA,aAAKX,KAAL,GAAY,EAAZ;AACA,eAAO,IAAIyB,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP;AACA,OAhDsC,CAiDvC;;;AACA,WAAKW,KAAL,GAAW,CAAX;AACA,aAAO,IAAIyB,UAAJ,CAAe,KAAf,EAAqBrC,CAArB,EAAuBC,CAAvB,CAAP;AACA,KA/DsE;;AAEtE,SAAKD,CAAL,GAASA,EAAT;AACA,SAAKY,KAAL,GAAaA,KAAb;AACA,SAAKW,YAAL,GAAoBA,YAApB;AACA,SAAKQ,WAAL,GAAmBA,WAAnB;AACA,SAAKG,eAAL,GAAuBA,eAAvB;AACA,SAAKhC,SAAL,GAAiBA,SAAjB;AACA;;AAZsC;;AAqExC,MAAMmC,UAAN,CAAgB;AAIfvC,EAAAA,WAAW,CAAC6B,YAAD,EAAc3B,CAAd,EAAgBC,CAAhB,EAAkB;AAC5B,SAAK0B,YAAL,GAAoBA,YAApB;AACA,SAAK3B,CAAL,GAAOA,CAAP;AACA,SAAKC,CAAL,GAAOA,CAAP;AACA;;AARc;;AAahB,SAASJ,aAAT,EAAwB+B,UAAxB","sourcesContent":["import { ZonaAttack } from './ZonaAttack';\r\n\r\nclass TemplateFiend {\r\n\tId;\r\n\tX;\r\n\tY;\r\n\tMaxAttack = 20;\r\n\tStateImage=0;\r\n\tState;\r\n\ttimeFrame;\r\n\tCANVAS_WIDTH;\r\n\tSpeed =20;\r\n\tHeroModel;\r\n\tZONA_ATTACK;\r\n\tconstructor(Id,X,Y,timeFrame,CANVAS_WIDTH,ZONA_ATTACK){\r\n\t\tthis.Id = Id;\r\n\t\tthis.X=X;\r\n\t\tthis.Y=Y;\r\n\t\tthis.Time =0;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.CANVAS_WIDTH = CANVAS_WIDTH;\r\n\t\tthis.State = new StateFiend(0,false,false,null,timeFrame,X);\r\n\t\t\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t};\r\n\tGetId = function() {\r\n\t\treturn this.Id;\r\n\t};\r\n\tUpdateRandomAttack = function(currentFrameTime,HeroModel) {\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tif(this.State.GetAttackFiend()==false){\r\n\t\t\tvar randomAttack = Math.floor(Math.random() * this.MaxAttack);\r\n\t\t\tif(randomAttack==1){\r\n\r\n\t\t\t\t//\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t\tthis.State =new StateFiendAttack(1,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif(randomAttack==2){\r\n\t\t\t\t\r\n\t\t\t\t//move\r\n\t\t\t\tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif(randomAttack==3){\r\n\t\t\t\t//jump StateFiendJump\r\n\t\t\t\t//console.log( \" fiend x  this.ZONA_ATTACK =\"+this.ZONA_ATTACK+\" hero   x =  \"+this.X  );\r\n\t\t\t\tthis.State = new StateFiendJump(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tGetState = function(){\r\n\t\treturn this.State.GetState();\r\n\t};\r\n\tGetAttackPlayer = function(){\r\n\t\treturn this.State.GetAttackPlayer();\r\n\t}\r\n\tSetAttackPlayer = function(AttackPlayer){\r\n\t\tthis.State.SetAttackPlayer(AttackPlayer);\r\n\t}\r\n\tGetStateTime = function(currentFrameTime) {\r\n\t\t//var timeFrame = 400;\r\n\t\tvar stateParam = this.State.Update(currentFrameTime,this.X,this.Y);\r\n\t\tif(stateParam.ChangeStatus){\r\n\t\t\t\r\n\t\t\tthis.State =new StateFiend(1,false,false,currentFrameTime,this.timeFrame,this.X);\r\n\t\t\t//Update\r\n\t\t}\r\n\t\tthis.X = stateParam.X;\r\n\t\tthis.Y = stateParam.Y;\r\n\t\treturn this.State.GetState();\r\n\t\r\n\t};\r\n}\r\nclass StateFiendBasic {\r\n\tState = 10;\r\n\ttimeFrame;\r\n\tAttackFiend=false;\r\n\tAttackPlayer=false;\r\n\tAttackFiendTime;\r\n\tX;\r\n\tSetState = function(State) {\r\n\t\tthis.State = State;\r\n\t};\r\n\tGetState = function() {\r\n\t\treturn this.State;\r\n\t};\r\n\tGetAttackFiend= function() {\r\n\t\treturn this.AttackFiend;\r\n\t};\r\n\tGetAttackPlayer = function() {\r\n\t\treturn this.AttackPlayer;\r\n\t};\r\n\tSetAttackPlayer = function(AttackPlayer){\r\n\t\tthis.AttackPlayer=AttackPlayer;\r\n\t}\r\n\tGetAttackFiendTime = function() {\r\n\t\treturn this.AttackFiendTime;\r\n\t};\r\n}\r\n/*\r\nclass StateFiendStatic extends StateFiendBasic {\r\n\t\r\n}\r\n*/\r\n\r\n// Move\r\nclass StateFiendMove extends StateFiendBasic {\r\n\tXstartJump;\r\n\trandomMoveX;\r\n\tmoveY;\r\n\tlengthMove;\r\n\tSpeed;\r\n\tZONA_ATTACK;\r\n\tHeroModel;\r\n\tconstructor(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend){\r\n\t\tsuper();\r\n\t\tthis.State =8;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Speed = Speed;\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tthis.XstartJump = Xfiend;\r\n\t\t\r\n\t\t// move fiend\r\n\t\tvar random = false;\r\n\t\t\r\n\t\tif (random){\r\n\t\t\tthis.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\r\n\t\t} else {\r\n\t\t\tthis.randomMoveX = this.HeroModel.X;\r\n\t\t}\r\n\t\tthis.lengthMove = this.randomMoveX - Xfiend;\r\n\t\t\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}\r\n\t\tif (X!=this.randomMoveX){\r\n\t\t\tif(X>this.randomMoveX){\r\n\t\t\t\tX-=this.Speed;\r\n\t\t\t\tthis.State =9;\r\n\t\t\t}\r\n\t\t\tif(X<this.randomMoveX){\r\n\t\t\t\tX+=this.Speed;\r\n\t\t\t\t\r\n\t\t\t\tthis.State =8;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//jump  Math.abs\r\nvar kol = (this.XstartJump - this.randomMoveX);\r\nvar stop = Math.abs(this.XstartJump - X);\r\nvar proc = (stop/kol);\r\nvar kkk = Math.sin(proc*10)*10+30;\r\nY = kkk;\r\n\r\nconsole.log(X+\" = \"+kkk+\" =  \"+this.XstartJump+\" this.X   NA  \"+stop+\"  T iend =\"+kol+ \"  %  proc = \" +proc  );\r\n\r\n\t\tif (new ZonaAttack().ZoneAttack(X,this.HeroModel.X,this.ZONA_ATTACK)){\r\n\t\t\t//stop move\r\n\t\t\t\r\n\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}\r\n\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\n// Move\r\nclass StateFiendJump extends StateFiendMove {\r\n\tconstructor(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend){\r\n\t\tsuper(State,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend);\r\n\t\tconsole.log(   \" --   this.randomMoveX = \"+this.randomMoveX );\r\n\t}\r\n}\r\nclass StateFiendAttack extends StateFiendBasic{\r\n\t\tconstructor(State,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame){\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.State = State;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t//if (this.AttackFiend){\r\n\t\t\t/*\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(2);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(3);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(4);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(5);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(6);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*5)>currentFrameTime){\r\n\t\t\t\tthis.SetState(7);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime){\r\n\t\t\t\t//attack\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t}\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t//}\r\n\t\t\r\n\t\t\r\n\t}\r\n}\r\n\r\n// Attack\r\nclass StateFiend extends StateFiendBasic{\r\n\t//State = 0;\r\n\t\r\n\t\r\n\tconstructor(State,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame,X){\r\n\t\tsuper();\r\n\t\tthis.X = X;\r\n\t\tthis.State = State;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t};\r\n\t\r\n\t\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t/*\r\n\t\tif (this.AttackFiend){\r\n\t\t\t/*\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(2);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(3);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t/*\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(4);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(5);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(6);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*5)>currentFrameTime){\r\n\t\t\t\tthis.SetState(7);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime){\r\n\t\t\t\t//attack\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t}\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\t*/\r\n\t\tif(this.AttackPlayer){\r\n\t\t\t//dead\r\n\t\t\tthis.State =10;\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\t\t}\r\n\t\t//0\r\n\t\tthis.State=4;\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\nclass StateParam{\r\n\tChangeStatus;\r\n\tX;\r\n\tY;\r\n\tconstructor(ChangeStatus,X,Y){\r\n\t\tthis.ChangeStatus = ChangeStatus;\r\n\t\tthis.X=X;\r\n\t\tthis.Y=Y;\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport { TemplateFiend, StateFiend }"]},"metadata":{},"sourceType":"module"}