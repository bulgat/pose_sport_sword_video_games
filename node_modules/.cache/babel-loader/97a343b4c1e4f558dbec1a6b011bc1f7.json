{"ast":null,"code":"import FiendModel from \"./FiendModel.js\";\nconst CANVAS_WIDTH = 640;\nconst CANVAS_HEIGHT = 300;\nlet LEVEL = 0;\nvar _devilEyeList = {\n  0: {\n    img: [{\n      x: 0,\n      y: 0,\n      w: 90,\n      h: 142\n    }]\n  },\n  1: {\n    img: [{\n      x: 97,\n      y: 0,\n      w: 160,\n      h: 97\n    }]\n  },\n  2: {\n    img: [{\n      x: 194,\n      y: 0,\n      w: 160,\n      h: 97\n    }]\n  },\n  3: {\n    img: [{\n      x: 291,\n      y: 0,\n      w: 160,\n      h: 97\n    }]\n  },\n  4: {\n    img: [{\n      x: 388,\n      y: 0,\n      w: 160,\n      h: 97\n    }]\n  },\n  5: {\n    img: [{\n      x: 485,\n      y: 0,\n      w: 160,\n      h: 97\n    }]\n  }\n};\nsetInterval(() => {\n  draw();\n  drawCanvasHero();\n}, 100);\nvar context = document.getElementById(\"myCanvas\"); ////\n//var drawHero = false;\n//drawHero = true;\n\nvar loadCanvas = false;\nconst base_image = new Image();\nbase_image.src = '/image/women0.png';\nconsole.log(\"load draw =\");\n\nbase_image.onload = function () {\n  loadCanvas = true;\n};\n\nconst attack_image = new Image();\nattack_image.src = '/image/women1.png';\n\nattack_image.onload = function () {\n  console.log(\"load ok =\");\n};\n\nconst shield_image = new Image();\nshield_image.src = '/image/women2.png';\n\nshield_image.onload = function () {}; // ThroneRoom  bigFon\n\n\nconst throneRoom_image = new Image();\nthroneRoom_image.src = '/image/bigFon.png';\n\nthroneRoom_image.onload = function () {}; //DevilEye.png\n\n\nconst devilEye_image = new Image();\ndevilEye_image.src = '/image/DevilEye.png';\n\ndevilEye_image.onload = function () {};\n\nconst devilEyeModel = {\n  X: 139,\n  Y: 139\n};\nvar fiendModelList = [];\nfiendModelList.push({\n  X: 139,\n  Y: 30,\n  AttackPlayer: false\n}, {\n  X: 239,\n  Y: 30,\n  AttackPlayer: false\n});\n\nconst drawCanvasHero = () => {\n  if (loadCanvas) {\n    var context = document.getElementById(\"myCanvas\");\n    var ctx = context.getContext(\"2d\");\n\n    if (window.Nose != undefined) {\n      ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); //ctx.drawImage(base_image, window.Nose.position.x/CANVAS_WIDTH, 0);\n      //ctx.drawImage(throneRoom_image,0,0);\n\n      ctx.drawImage(throneRoom_image, 0, 0, 939, 189, 0, 0, 939, 189); //devilEye_image\n      //_devilEyeList\n      //ctx.drawImage(devilEye_image,0,0);\n\n      var modelHero = CreateModelHero(fiendModelList);\n\n      for (var i = 0; i < fiendModelList.length; i++) {\n        drawFiend(ctx, fiendModelList[i].X, fiendModelList[i].Y);\n      } //drawFiend(ctx,130,30);\n\n\n      drawHero(ctx, modelHero);\n      resetFiendModel(fiendModelList);\n      fiendModelList = resetNewLevel(fiendModelList);\n    }\n  }\n};\n\nconst CreateModelHero = FiendModelList => {\n  var modelHero = {\n    RightArm: false,\n    LeftArm: false,\n    Nose: 0\n  };\n  modelHero.RightArm = 150 > window.RightArm.position.y;\n  modelHero.LeftArm = 150 > window.LeftArm.position.y;\n  modelHero.Nose = CANVAS_WIDTH - window.Nose.position.x;\n\n  for (var i = 0; i < FiendModelList.length; i++) {\n    //fiendModelList[i].X\n    if (fiendModelList[i].X > modelHero.Nose - 20 && fiendModelList[i].X < modelHero.Nose + 20) {\n      if (modelHero.RightArm) {\n        fiendModelList[i].AttackPlayer = true;\n      }\n    }\n  }\n\n  return modelHero;\n};\n\n_c = CreateModelHero;\n\nconst drawHero = (ctx, ModelHero) => {\n  if (ModelHero.RightArm) {\n    //ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    ctx.drawImage(attack_image, ModelHero.Nose, 100);\n    return;\n  }\n\n  if (ModelHero.LeftArm) {\n    //ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    ctx.drawImage(shield_image, ModelHero.Nose, 100);\n    return;\n  }\n\n  ctx.drawImage(base_image, ModelHero.Nose, 100);\n  return;\n};\n\nconst drawFiend = (ctx, x, y) => {\n  var countAnimInf = 0;\n  ctx.drawImage(devilEye_image, _devilEyeList[countAnimInf].img[0].x, //x origin\n  _devilEyeList[countAnimInf].img[0].y, //y origin\n  _devilEyeList[countAnimInf].img[0].w, //w origin\n  _devilEyeList[countAnimInf].img[0].h, //h origin\n  x, //x\n  y, //y\n  _devilEyeList[countAnimInf].img[0].w, //w size\n  _devilEyeList[countAnimInf].img[0].h //h size\n  ); //ctx.drawImage(devilEye_image, 150, 0, 124, 124, 210, 20, 50, 50);\n  //\n}; //////////\n\n\nvar resetNewLevel = function (FiendModelList) {\n  if (FiendModelList.length == 0) {\n    if (LEVEL == 0) {\n      FiendModelList = [{\n        X: 139,\n        Y: 30,\n        AttackPlayer: false\n      }, {\n        X: 239,\n        Y: 30,\n        AttackPlayer: false\n      }];\n    }\n\n    if (LEVEL == 1) {\n      FiendModelList = [{\n        X: 59,\n        Y: 30,\n        AttackPlayer: false\n      }, {\n        X: 339,\n        Y: 30,\n        AttackPlayer: false\n      }, {\n        X: 439,\n        Y: 30,\n        AttackPlayer: false\n      }];\n      console.log(\"  R    =  \");\n    }\n\n    if (LEVEL == 2) {\n      FiendModelList = [{\n        X: 139,\n        Y: 30,\n        AttackPlayer: false\n      }, {\n        X: 239,\n        Y: 30,\n        AttackPlayer: false\n      }];\n    }\n\n    if (LEVEL == 3) {\n      FiendModelList = [{\n        X: 59,\n        Y: 30,\n        AttackPlayer: false\n      }, {\n        X: 339,\n        Y: 30,\n        AttackPlayer: false\n      }, {\n        X: 439,\n        Y: 30,\n        AttackPlayer: false\n      }];\n      console.log(\"  R    =  \");\n    }\n\n    LEVEL += 1;\n    console.log(\"==    LEVEL =\" + LEVEL);\n  }\n\n  return FiendModelList;\n};\n\nvar resetFiendModel = function (FiendModelList) {\n  for (var i = 0; i < FiendModelList.length; i++) {\n    if (fiendModelList[i].AttackPlayer) {\n      fiendModelList.splice(i, 1);\n      return;\n    }\n  }\n};\n\nvar draw = function () {\n  var context = document.getElementById(\"myCanvas\");\n  var ctx = context.getContext(\"2d\");\n  ctx.moveTo(0, 0);\n  ctx.lineTo(200, 100);\n  ctx.stroke();\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateModelHero\");","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Canvas.js"],"names":["FiendModel","CANVAS_WIDTH","CANVAS_HEIGHT","LEVEL","_devilEyeList","img","x","y","w","h","setInterval","draw","drawCanvasHero","context","document","getElementById","loadCanvas","base_image","Image","src","console","log","onload","attack_image","shield_image","throneRoom_image","devilEye_image","devilEyeModel","X","Y","fiendModelList","push","AttackPlayer","ctx","getContext","window","Nose","undefined","clearRect","drawImage","modelHero","CreateModelHero","i","length","drawFiend","drawHero","resetFiendModel","resetNewLevel","FiendModelList","RightArm","LeftArm","position","ModelHero","countAnimInf","splice","moveTo","lineTo","stroke"],"mappings":"AAAA,OAAQA,UAAR,MAAwB,iBAAxB;AAEA,MAAMC,YAAY,GAAE,GAApB;AACA,MAAMC,aAAa,GAAE,GAArB;AACA,IAAIC,KAAK,GAAE,CAAX;AAEA,IAAIC,aAAa,GAAG;AACnB,KAAE;AAACC,IAAAA,GAAG,EAAC,CAAC;AAACC,MAAAA,CAAC,EAAC,CAAH;AAAKC,MAAAA,CAAC,EAAC,CAAP;AAASC,MAAAA,CAAC,EAAC,EAAX;AAAcC,MAAAA,CAAC,EAAC;AAAhB,KAAD;AAAL,GADiB;AAEnB,KAAE;AAACJ,IAAAA,GAAG,EAAC,CAAC;AAACC,MAAAA,CAAC,EAAC,EAAH;AAAMC,MAAAA,CAAC,EAAC,CAAR;AAAUC,MAAAA,CAAC,EAAC,GAAZ;AAAgBC,MAAAA,CAAC,EAAC;AAAlB,KAAD;AAAL,GAFiB;AAGnB,KAAE;AAACJ,IAAAA,GAAG,EAAC,CAAC;AAACC,MAAAA,CAAC,EAAC,GAAH;AAAOC,MAAAA,CAAC,EAAC,CAAT;AAAWC,MAAAA,CAAC,EAAC,GAAb;AAAiBC,MAAAA,CAAC,EAAC;AAAnB,KAAD;AAAL,GAHiB;AAInB,KAAE;AAACJ,IAAAA,GAAG,EAAC,CAAC;AAACC,MAAAA,CAAC,EAAC,GAAH;AAAOC,MAAAA,CAAC,EAAC,CAAT;AAAWC,MAAAA,CAAC,EAAC,GAAb;AAAiBC,MAAAA,CAAC,EAAC;AAAnB,KAAD;AAAL,GAJiB;AAKnB,KAAE;AAACJ,IAAAA,GAAG,EAAC,CAAC;AAACC,MAAAA,CAAC,EAAC,GAAH;AAAOC,MAAAA,CAAC,EAAC,CAAT;AAAWC,MAAAA,CAAC,EAAC,GAAb;AAAiBC,MAAAA,CAAC,EAAC;AAAnB,KAAD;AAAL,GALiB;AAMnB,KAAE;AAACJ,IAAAA,GAAG,EAAC,CAAC;AAACC,MAAAA,CAAC,EAAC,GAAH;AAAOC,MAAAA,CAAC,EAAC,CAAT;AAAWC,MAAAA,CAAC,EAAC,GAAb;AAAiBC,MAAAA,CAAC,EAAC;AAAnB,KAAD;AAAL;AANiB,CAApB;AASCC,WAAW,CAAC,MAAM;AACbC,EAAAA,IAAI;AACPC,EAAAA,cAAc;AACZ,CAHO,EAGL,GAHK,CAAX;AAKA,IAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAd,C,CAEA;AACA;AAEG;;AACH,IAAIC,UAAU,GAAC,KAAf;AACA,MAAMC,UAAU,GAAG,IAAIC,KAAJ,EAAnB;AACAD,UAAU,CAACE,GAAX,GAAiB,mBAAjB;AACAC,OAAO,CAACC,GAAR,CAAY,aAAZ;;AACAJ,UAAU,CAACK,MAAX,GAAoB,YACpB;AAEEN,EAAAA,UAAU,GAAC,IAAX;AAED,CALD;;AAMA,MAAMO,YAAY,GAAG,IAAIL,KAAJ,EAArB;AACAK,YAAY,CAACJ,GAAb,GAAmB,mBAAnB;;AACAI,YAAY,CAACD,MAAb,GAAsB,YACtB;AACGF,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AAEF,CAJD;;AAKC,MAAMG,YAAY,GAAG,IAAIN,KAAJ,EAArB;AACDM,YAAY,CAACL,GAAb,GAAmB,mBAAnB;;AACAK,YAAY,CAACF,MAAb,GAAsB,YACtB,CAGC,CAJD,C,CAKA;;;AACA,MAAMG,gBAAgB,GAAG,IAAIP,KAAJ,EAAzB;AACAO,gBAAgB,CAACN,GAAjB,GAAuB,mBAAvB;;AACAM,gBAAgB,CAACH,MAAjB,GAA0B,YAC1B,CAGC,CAJD,C,CAKA;;;AACA,MAAMI,cAAc,GAAG,IAAIR,KAAJ,EAAvB;AACAQ,cAAc,CAACP,GAAf,GAAqB,qBAArB;;AACAO,cAAc,CAACJ,MAAf,GAAwB,YACxB,CAGC,CAJD;;AAKA,MAAMK,aAAa,GAAI;AAACC,EAAAA,CAAC,EAAC,GAAH;AAAOC,EAAAA,CAAC,EAAC;AAAT,CAAvB;AAGA,IAAIC,cAAc,GAAE,EAApB;AACAA,cAAc,CAACC,IAAf,CAAoB;AAACH,EAAAA,CAAC,EAAC,GAAH;AAAOC,EAAAA,CAAC,EAAC,EAAT;AAAYG,EAAAA,YAAY,EAAC;AAAzB,CAApB,EAAoD;AAACJ,EAAAA,CAAC,EAAC,GAAH;AAAOC,EAAAA,CAAC,EAAC,EAAT;AAAYG,EAAAA,YAAY,EAAC;AAAzB,CAApD;;AAGA,MAAMpB,cAAc,GAAG,MAAK;AAE3B,MAAGI,UAAH,EAAc;AACb,QAAIH,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAd;AACA,QAAIkB,GAAG,GAAGpB,OAAO,CAACqB,UAAR,CAAmB,IAAnB,CAAV;;AAEA,QAAIC,MAAM,CAACC,IAAP,IAAaC,SAAjB,EAA2B;AAC1BJ,MAAAA,GAAG,CAACK,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBrC,YAApB,EAAkCC,aAAlC,EAD0B,CAG1B;AACA;;AACA+B,MAAAA,GAAG,CAACM,SAAJ,CAAcd,gBAAd,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,GAAtC,EAA2C,GAA3C,EAAgD,CAAhD,EAAmD,CAAnD,EAAsD,GAAtD,EAA2D,GAA3D,EAL0B,CAO1B;AACA;AACA;;AAEA,UAAIe,SAAS,GAAIC,eAAe,CAACX,cAAD,CAAhC;;AAIA,WAAI,IAAIY,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACZ,cAAc,CAACa,MAA7B,EAAoCD,CAAC,EAArC,EAAwC;AAEvCE,QAAAA,SAAS,CAACX,GAAD,EAAKH,cAAc,CAACY,CAAD,CAAd,CAAkBd,CAAvB,EAAyBE,cAAc,CAACY,CAAD,CAAd,CAAkBb,CAA3C,CAAT;AACA,OAlByB,CAoB3B;;;AAECgB,MAAAA,QAAQ,CAAEZ,GAAF,EAAMO,SAAN,CAAR;AAEAM,MAAAA,eAAe,CAAChB,cAAD,CAAf;AACAA,MAAAA,cAAc,GAAGiB,aAAa,CAACjB,cAAD,CAA9B;AAEA;AACD;AAED,CApCD;;AAqCA,MAAMW,eAAe,GAAGO,cAAD,IAAkB;AACxC,MAAIR,SAAS,GAAE;AAACS,IAAAA,QAAQ,EAAC,KAAV;AAAgBC,IAAAA,OAAO,EAAC,KAAxB;AAA8Bd,IAAAA,IAAI,EAAC;AAAnC,GAAf;AACAI,EAAAA,SAAS,CAACS,QAAV,GAAqB,MAAId,MAAM,CAACc,QAAP,CAAgBE,QAAhB,CAAyB5C,CAAlD;AACAiC,EAAAA,SAAS,CAACU,OAAV,GAAqB,MAAIf,MAAM,CAACe,OAAP,CAAeC,QAAf,CAAwB5C,CAAjD;AACAiC,EAAAA,SAAS,CAACJ,IAAV,GAAiBnC,YAAY,GAAGkC,MAAM,CAACC,IAAP,CAAYe,QAAZ,CAAqB7C,CAArD;;AAEA,OAAI,IAAIoC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACM,cAAc,CAACL,MAA7B,EAAoCD,CAAC,EAArC,EAAwC;AACvC;AACA,QAAGZ,cAAc,CAACY,CAAD,CAAd,CAAkBd,CAAlB,GAAoBY,SAAS,CAACJ,IAAV,GAAe,EAAnC,IAAuCN,cAAc,CAACY,CAAD,CAAd,CAAkBd,CAAlB,GAAoBY,SAAS,CAACJ,IAAV,GAAe,EAA7E,EAAgF;AAC/E,UAAGI,SAAS,CAACS,QAAb,EAAsB;AAErBnB,QAAAA,cAAc,CAACY,CAAD,CAAd,CAAkBV,YAAlB,GAAiC,IAAjC;AACA;AAED;AAED;;AAED,SAAOQ,SAAP;AACA,CAnBD;;KAAMC,e;;AAoBN,MAAMI,QAAQ,GAAG,CAACZ,GAAD,EAAKmB,SAAL,KAAkB;AAElC,MAAGA,SAAS,CAACH,QAAb,EAAuB;AACtB;AACAhB,IAAAA,GAAG,CAACM,SAAJ,CAAchB,YAAd,EAA2B6B,SAAS,CAAChB,IAArC,EAA2C,GAA3C;AACA;AACA;;AACD,MAAGgB,SAAS,CAACF,OAAb,EAAsB;AACrB;AACAjB,IAAAA,GAAG,CAACM,SAAJ,CAAcf,YAAd,EAA2B4B,SAAS,CAAChB,IAArC,EAA2C,GAA3C;AACA;AACA;;AACDH,EAAAA,GAAG,CAACM,SAAJ,CAActB,UAAd,EAAyBmC,SAAS,CAAChB,IAAnC,EAAyC,GAAzC;AACA;AACA,CAdD;;AAeA,MAAMQ,SAAS,GAAG,CAACX,GAAD,EAAK3B,CAAL,EAAOC,CAAP,KAAY;AAC7B,MAAI8C,YAAY,GAAE,CAAlB;AAECpB,EAAAA,GAAG,CAACM,SAAJ,CAAcb,cAAd,EACCtB,aAAa,CAACiD,YAAD,CAAb,CAA4BhD,GAA5B,CAAgC,CAAhC,EAAmCC,CADpC,EACsC;AACrCF,EAAAA,aAAa,CAACiD,YAAD,CAAb,CAA4BhD,GAA5B,CAAgC,CAAhC,EAAmCE,CAFpC,EAEsC;AACrCH,EAAAA,aAAa,CAACiD,YAAD,CAAb,CAA4BhD,GAA5B,CAAgC,CAAhC,EAAmCG,CAHpC,EAGsC;AACrCJ,EAAAA,aAAa,CAACiD,YAAD,CAAb,CAA4BhD,GAA5B,CAAgC,CAAhC,EAAmCI,CAJpC,EAIsC;AACrCH,EAAAA,CALD,EAKG;AACFC,EAAAA,CAND,EAMG;AACFH,EAAAA,aAAa,CAACiD,YAAD,CAAb,CAA4BhD,GAA5B,CAAgC,CAAhC,EAAmCG,CAPpC,EAOsC;AACrCJ,EAAAA,aAAa,CAACiD,YAAD,CAAb,CAA4BhD,GAA5B,CAAgC,CAAhC,EAAmCI,CARpC,CAQqC;AARrC,IAH4B,CAa3B;AACA;AACF,CAfD,C,CAgBA;;;AACA,IAAIsC,aAAa,GAAG,UAASC,cAAT,EAAwB;AAC3C,MAAGA,cAAc,CAACL,MAAf,IAAuB,CAA1B,EAA4B;AAC3B,QAAIxC,KAAK,IAAE,CAAX,EAAa;AACZ6C,MAAAA,cAAc,GAAE,CAAC;AAACpB,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAD,EAAiC;AAACJ,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAjC,CAAhB;AACA;;AACD,QAAI7B,KAAK,IAAE,CAAX,EAAa;AACZ6C,MAAAA,cAAc,GAAC,CAAC;AAACpB,QAAAA,CAAC,EAAC,EAAH;AAAMC,QAAAA,CAAC,EAAC,EAAR;AAAWG,QAAAA,YAAY,EAAC;AAAxB,OAAD,EAAgC;AAACJ,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAhC,EAAgE;AAACJ,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAhE,CAAf;AACDZ,MAAAA,OAAO,CAACC,GAAR,CAAa,YAAb;AACC;;AACD,QAAIlB,KAAK,IAAE,CAAX,EAAa;AACZ6C,MAAAA,cAAc,GAAE,CAAC;AAACpB,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAD,EAAiC;AAACJ,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAjC,CAAhB;AACA;;AACD,QAAI7B,KAAK,IAAE,CAAX,EAAa;AACZ6C,MAAAA,cAAc,GAAC,CAAC;AAACpB,QAAAA,CAAC,EAAC,EAAH;AAAMC,QAAAA,CAAC,EAAC,EAAR;AAAWG,QAAAA,YAAY,EAAC;AAAxB,OAAD,EAAgC;AAACJ,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAhC,EAAgE;AAACJ,QAAAA,CAAC,EAAC,GAAH;AAAOC,QAAAA,CAAC,EAAC,EAAT;AAAYG,QAAAA,YAAY,EAAC;AAAzB,OAAhE,CAAf;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAa,YAAb;AACA;;AACDlB,IAAAA,KAAK,IAAE,CAAP;AACAiB,IAAAA,OAAO,CAACC,GAAR,CAAa,kBAAiBlB,KAA9B;AACA;;AACD,SAAO6C,cAAP;AACA,CApBD;;AAqBA,IAAIF,eAAe,GAAG,UAASE,cAAT,EAAwB;AAE7C,OAAI,IAAIN,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACM,cAAc,CAACL,MAA7B,EAAoCD,CAAC,EAArC,EAAwC;AACvC,QAAIZ,cAAc,CAACY,CAAD,CAAd,CAAkBV,YAAtB,EAAmC;AAClCF,MAAAA,cAAc,CAACwB,MAAf,CAAsBZ,CAAtB,EAAwB,CAAxB;AACA;AACA;AACD;AACD,CARD;;AASA,IAAI/B,IAAI,GAAG,YAAU;AACpB,MAAIE,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAd;AACA,MAAIkB,GAAG,GAAGpB,OAAO,CAACqB,UAAR,CAAmB,IAAnB,CAAV;AACAD,EAAAA,GAAG,CAACsB,MAAJ,CAAW,CAAX,EAAc,CAAd;AACCtB,EAAAA,GAAG,CAACuB,MAAJ,CAAW,GAAX,EAAgB,GAAhB;AACAvB,EAAAA,GAAG,CAACwB,MAAJ;AAED,CAPD","sourcesContent":["import  FiendModel from \"./FiendModel.js\";\r\n\r\nconst CANVAS_WIDTH =640;\r\nconst CANVAS_HEIGHT =300;\r\nlet LEVEL =0;\r\n\r\nvar _devilEyeList = {\r\n\t0:{img:[{x:0,y:0,w:90,h:142}]},\r\n\t1:{img:[{x:97,y:0,w:160,h:97}]},\r\n\t2:{img:[{x:194,y:0,w:160,h:97}]},\r\n\t3:{img:[{x:291,y:0,w:160,h:97}]},\r\n\t4:{img:[{x:388,y:0,w:160,h:97}]},\r\n\t5:{img:[{x:485,y:0,w:160,h:97}]}\r\n};\r\n\r\n\tsetInterval(() => {\r\n      draw();\r\n\t  drawCanvasHero ();\r\n    }, 100);\r\n\t\r\n\tvar context = document.getElementById(\"myCanvas\");\r\n\r\n\t////\r\n\t//var drawHero = false;\r\n\t\r\n\t\t\t\t//drawHero = true;\r\n\tvar loadCanvas=false;\r\n\tconst base_image = new Image();\r\n\tbase_image.src = '/image/women0.png';\r\n\tconsole.log(\"load draw =\" );\r\n\tbase_image.onload = function() \r\n\t{\r\n\t\t \r\n\t\t loadCanvas=true;\r\n\r\n\t}\r\n\tconst attack_image = new Image();\r\n\tattack_image.src = '/image/women1.png';\r\n\tattack_image.onload = function() \r\n\t{\r\n\t\t  console.log(\"load ok =\" );\r\n\r\n\t}\r\n\t\tconst shield_image = new Image();\r\n\tshield_image.src = '/image/women2.png';\r\n\tshield_image.onload = function() \r\n\t{\r\n\t\t  \r\n\r\n\t}\r\n\t// ThroneRoom  bigFon\r\n\tconst throneRoom_image = new Image();\r\n\tthroneRoom_image.src = '/image/bigFon.png';\r\n\tthroneRoom_image.onload = function() \r\n\t{\r\n\t\t  \r\n\r\n\t}\r\n\t//DevilEye.png\r\n\tconst devilEye_image = new Image();\r\n\tdevilEye_image.src = '/image/DevilEye.png';\r\n\tdevilEye_image.onload = function() \r\n\t{\r\n\t\t  \r\n\r\n\t}\r\n\tconst devilEyeModel =  {X:139,Y:139};\r\n\t\r\n\t\r\n\tvar fiendModelList =[];\r\n\tfiendModelList.push({X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false});\r\n\r\n\t\r\n\tconst drawCanvasHero = () =>{\r\n\r\n\t\tif(loadCanvas){\r\n\t\t\tvar context = document.getElementById(\"myCanvas\");\r\n\t\t\tvar ctx = context.getContext(\"2d\");\r\n\r\n\t\t\tif (window.Nose!=undefined){\r\n\t\t\t\tctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\t\t\t\t\r\n\t\t\t\t//ctx.drawImage(base_image, window.Nose.position.x/CANVAS_WIDTH, 0);\r\n\t\t\t\t//ctx.drawImage(throneRoom_image,0,0);\r\n\t\t\t\tctx.drawImage(throneRoom_image, 0, 0, 939, 189, 0, 0, 939, 189);\r\n\t\t\t\t\r\n\t\t\t\t//devilEye_image\r\n\t\t\t\t//_devilEyeList\r\n\t\t\t\t//ctx.drawImage(devilEye_image,0,0);\r\n\r\n\t\t\t\tvar modelHero =  CreateModelHero(fiendModelList);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tfor(var i=0;i<fiendModelList.length;i++){\r\n\t\t\t\t\t\r\n\t\t\t\t\tdrawFiend(ctx,fiendModelList[i].X,fiendModelList[i].Y);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t//drawFiend(ctx,130,30);\r\n\t\t\t\t\r\n\t\t\t\tdrawHero (ctx,modelHero);\r\n\t\t\t\t\r\n\t\t\t\tresetFiendModel(fiendModelList);\r\n\t\t\t\tfiendModelList = resetNewLevel(fiendModelList);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tconst CreateModelHero =(FiendModelList)=>{\r\n\t\tvar modelHero ={RightArm:false,LeftArm:false,Nose:0};\r\n\t\tmodelHero.RightArm =(150>window.RightArm.position.y);\r\n\t\tmodelHero.LeftArm = (150>window.LeftArm.position.y);\r\n\t\tmodelHero.Nose = CANVAS_WIDTH - window.Nose.position.x;\r\n\t\t\r\n\t\tfor(var i=0;i<FiendModelList.length;i++){\r\n\t\t\t//fiendModelList[i].X\r\n\t\t\tif(fiendModelList[i].X>modelHero.Nose-20&&fiendModelList[i].X<modelHero.Nose+20){\r\n\t\t\t\tif(modelHero.RightArm){\r\n\t\t\t\t\t\r\n\t\t\t\t\tfiendModelList[i].AttackPlayer = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn modelHero;\r\n\t};\r\n\tconst drawHero = (ctx,ModelHero) =>{\r\n\t\t\r\n\t\tif(ModelHero.RightArm) {\r\n\t\t\t//ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\t\t\tctx.drawImage(attack_image,ModelHero.Nose, 100);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(ModelHero.LeftArm) {\r\n\t\t\t//ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\t\t\tctx.drawImage(shield_image,ModelHero.Nose, 100);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tctx.drawImage(base_image,ModelHero.Nose, 100);\r\n\t\treturn;\r\n\t};\r\n\tconst drawFiend = (ctx,x,y) =>{\r\n\t\tvar countAnimInf =0;\r\n\t\t\r\n\t\t\tctx.drawImage(devilEye_image, \r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].x,//x origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].y,//y origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].w,//w origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].h,//h origin\r\n\t\t\t\tx,//x\r\n\t\t\t\ty,//y\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].w,//w size\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].h//h size\r\n\t\t\t\t);\r\n\t\t\t\t//ctx.drawImage(devilEye_image, 150, 0, 124, 124, 210, 20, 50, 50);\r\n\t\t\t\t//\r\n\t};\r\n\t//////////\r\n\tvar resetNewLevel = function(FiendModelList){\r\n\t\tif(FiendModelList.length==0){\r\n\t\t\tif (LEVEL==0){\r\n\t\t\t\tFiendModelList =[{X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false}];\r\n\t\t\t}\r\n\t\t\tif (LEVEL==1){\r\n\t\t\t\tFiendModelList=[{X:59,Y:30,AttackPlayer:false},{X:339,Y:30,AttackPlayer:false},{X:439,Y:30,AttackPlayer:false}];\r\n\t\t\tconsole.log( \"  R    =  \" );\r\n\t\t\t}\r\n\t\t\tif (LEVEL==2){\r\n\t\t\t\tFiendModelList =[{X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false}];\r\n\t\t\t}\r\n\t\t\tif (LEVEL==3){\r\n\t\t\t\tFiendModelList=[{X:59,Y:30,AttackPlayer:false},{X:339,Y:30,AttackPlayer:false},{X:439,Y:30,AttackPlayer:false}];\r\n\t\t\t\tconsole.log( \"  R    =  \" );\r\n\t\t\t}\r\n\t\t\tLEVEL+=1;\r\n\t\t\tconsole.log( \"==    LEVEL =\" +LEVEL);\r\n\t\t}\r\n\t\treturn FiendModelList\r\n\t}\r\n\tvar resetFiendModel = function(FiendModelList){\r\n\t\t\r\n\t\tfor(var i=0;i<FiendModelList.length;i++){\r\n\t\t\tif (fiendModelList[i].AttackPlayer){\r\n\t\t\t\tfiendModelList.splice(i,1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar draw = function(){\r\n\t\tvar context = document.getElementById(\"myCanvas\");\r\n\t\tvar ctx = context.getContext(\"2d\");\r\n\t\tctx.moveTo(0, 0);\r\n\t\t\tctx.lineTo(200, 100);\r\n\t\t\tctx.stroke();\r\n\t\t\r\n\t};"]},"metadata":{},"sourceType":"module"}