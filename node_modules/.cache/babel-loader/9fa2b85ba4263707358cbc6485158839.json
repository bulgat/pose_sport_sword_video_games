{"ast":null,"code":"import { ZonaAttack } from './ZonaAttack';\nimport { StateFiendBasic } from './StateFiendBasic';\nimport { StateParam } from './StateParam';\nimport { GameParam } from './GameParam';\nimport { InventoryState } from './InventoryState';\n\nclass TemplateFiend {\n  constructor(Id, _X, _Yline, ReserveY, timeFrame, CANVAS_WIDTH, ZONA_ATTACK, _currentFrameTime, StartX, TableMonster) {\n    this.MaxAttack = 25;\n    this.StateImage = 0;\n    this.Speed = 20;\n    this.Dead = false;\n    this.HPlife = 10;\n    this.LocationLineReserve = false;\n    this.NamePharmacy = \"pharmacy\";\n    this.Dealer = \"dealer\";\n    this.Score = 0;\n\n    this.GetLocationLineReserve = function () {\n      return this.LocationLineReserve;\n    };\n\n    this.SetLinePositionReserve = function (Yline) {\n      if (Yline != undefined) {\n        if (Yline) {\n          this.LocationLineReserve = true;\n          this.Y = new GameParam().LineReserve;\n        } else {\n          this.LocationLineReserve = false;\n          this.Y = new GameParam().LineAttack;\n        }\n      }\n    };\n\n    this.GetId = function () {\n      return this.Id;\n    };\n\n    this.UpdateRandomAttack = function (currentFrameTime, HeroModel) {\n      this.HeroModel = HeroModel;\n\n      if (this.Name != this.NamePharmacy) {\n        if (this.State.GetAttackFiend() == false) {\n          if (this.State.Name != \"MoveJump\") {\n            var randomAttack = Math.floor(Math.random() * this.MaxAttack);\n\n            if (this.LocationLineReserve == false) {\n              if (randomAttack == 1) {\n                //this.Y = this.Ystatic;\n                this.SetLinePositionReserve(false); //\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\n\n                this.State = new StateFiendAttack(this.LocationLineReserve, false, true, currentFrameTime, this.timeFrame);\n              }\n            }\n            /*\r\n            if(randomAttack==2){\r\n            \t\r\n            \t//move\r\n            \tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n            \t\r\n            }\r\n            */\n            //Jump\n\n\n            if (randomAttack == 3) {\n              //jump StateFiendJump\n              this.State = new StateFiendJump(this.LocationLineReserve, currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.ZONA_ATTACK, this.X, this.Y);\n            } //StateFiendBlock\n\n\n            if (randomAttack == 4) {\n              this.State = new StateFiendBlock(this.LocationLineReserve, currentFrameTime, this.timeFrame);\n            }\n          }\n        }\n      }\n    };\n\n    this.GetTypeUnit = function () {\n      return this.TypeUnit;\n    };\n\n    this.GetState = function () {\n      return this.State.GetState();\n    };\n\n    this.GetStateName = function () {\n      return this.State.Name;\n    };\n\n    this.GetAttackPlayer = function () {\n      return this.State.GetAttackPlayer();\n    };\n\n    this.SetAttackPlayer = function (AttackPlayer, currentFrameTime) {\n      if (this.Name == this.NamePharmacy) {\n        //if (this.State.Name ==\"Dead\"){\n        this.AttackPlayer = true;\n        this.Dead = true;\n        var hpLife = this.HPlife;\n        this.HPlife = 0;\n        return hpLife; //}\n      } else {\n        // block blow\n        if (this.State.Name != \"MoveBlow\") {\n          //this.Name =\"Block\"\n          if (this.State.Name != \"Block\") {\n            //block reserve line\n            if (this.LocationLineReserve == false) {\n              this.HPlife -= 10;\n\n              if (0 >= this.HPlife) {\n                if (this.State.Name != \"Dead\") {\n                  this.State = new StateFiendDead(this.LocationLineReserve, true, false, currentFrameTime, this.timeFrame, this.Ystatic);\n                  this.AttackPlayer = true;\n                }\n\n                return this.Score;\n              } else {\n                //State,AttackFiendTime,timeFrame,Speed\n                this.State = new StateFiendBlow(this.LocationLineReserve, currentFrameTime, this.timeFrame, 3);\n              }\n            }\n          }\n        }\n      }\n\n      return 0;\n    };\n\n    this.GetStateTime = function (currentFrameTime) {\n      var stateParam = this.UpdateState(currentFrameTime, this.X, this.Y); //var stateParam = this.State.Update(currentFrameTime,this.X,this.Y);\n\n      if (stateParam.ChangeStatus) {\n        this.State = new StateFiendOld(this.LocationLineReserve, false, false, currentFrameTime, this.timeFrame, this.Ystatic); //Update\n      }\n\n      this.X = stateParam.X;\n      this.Y = stateParam.Y;\n\n      if (stateParam.Dead == true) {\n        this.Dead = true;\n      }\n\n      if (this.Name != this.NamePharmacy) {\n        this.SetLinePositionReserve(stateParam.LocationLineReserve);\n      }\n\n      return this.State.GetState();\n    };\n\n    this.UpdateState = function (currentFrameTime, X, Y) {\n      return this.State.Update(currentFrameTime, X, Y);\n    };\n\n    //TypeUnit,HPlife\n    this.Id = Id;\n    this.Name = TableMonster.Name;\n    this.Time = 0;\n    this.timeFrame = timeFrame;\n    this.CANVAS_WIDTH = CANVAS_WIDTH;\n\n    switch (this.Name) {\n      case this.NamePharmacy:\n        // if (x === 'value1')\n        console.log(\"11111\" + this.NamePharmacy);\n        var randomPharmacy = Math.floor(Math.random() * 8);\n        this.State = new InventoryState(StartX, 200, randomPharmacy);\n        this.Y = 30;\n        break;\n\n      case this.Dealer:\n        // if (x === 'value2')\n        console.log(\"DealerState    22\" + this.Dealer);\n        break;\n\n      default:\n        console.log(\"3333\");\n        this.SetLinePositionReserve(_Yline);\n        this.State = new StateFiendMoveFix(this.LocationLineReserve, _currentFrameTime, this.timeFrame, this.CANVAS_WIDTH, this.Speed, this.HeroModel, this.ZONA_ATTACK, this.X, null, this.Y);\n        break;\n    }\n    /*\r\n    if (this.Name ==this.NamePharmacy) {\r\n    \t\r\n    \tvar randomPharmacy = Math.floor(Math.random() * 8);\r\n    \tthis.State = new InventoryState(StartX, 200,randomPharmacy);\r\n    \tthis.Y =30;\r\n    } \r\n    else {\r\n    \t\tthis.SetLinePositionReserve(Yline);\r\n    \t\tthis.State = new StateFiendMoveFix(this.LocationLineReserve,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X,null,this.Y);\r\n    \t\t\r\n    }\r\n    */\n\n\n    this.X = StartX;\n    this.Ystatic = this.Y;\n    this.ReserveY = ReserveY;\n    this.ZONA_ATTACK = ZONA_ATTACK;\n    this.TypeUnit = TableMonster.TypeUnit;\n    this.HPlife = TableMonster.HPlife;\n    this.Score = TableMonster.Score;\n  }\n\n}\n\nclass DealerState extends StateFiendBasic {\n  constructor(_X2, _Y, RandomPharmacy) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      //Y += 2;\n      if (Y >= 110) {\n        this.AttackPlayer = true;\n        return new StateParam(false, X, Y, true, false);\n      }\n\n      return new StateParam(false, X, Y, false, false);\n    };\n\n    this.X = _X2;\n    this.Y = _Y;\n    this.Name = \"Dealer\";\n    this.State = RandomPharmacy;\n  }\n\n} // Move\n\n\nclass StateFiendMove extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, MoveFix, XfixMove, _Y2) {\n    super();\n    this.Jump = false;\n    this.MoveFix = false;\n    this.MoveInAttackLine = false;\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 9 < currentFrameTime) {\n        this.SetState(1);\n        return new StateParam(true, X, Y);\n      }\n\n      if (X != this.randomMoveX) {\n        if (X > this.randomMoveX) {\n          X -= this.Speed;\n          this.State = 12;\n        }\n\n        if (X < this.randomMoveX) {\n          X += this.Speed;\n          this.State = 11;\n        }\n      }\n\n      if (this.Jump) {\n        //jump  Math.abs   ReserveY\n        var pathLength = this.XstartJump - this.randomMoveX;\n        var residual = Math.abs(this.XstartJump - X);\n        var proc = Math.abs(residual / pathLength);\n\n        if (proc < .5) {\n          Y = 30 - 50 * proc;\n        }\n\n        if (proc >= .5) {\n          var procEnd = 0.5 - (proc - 0.5);\n          Y = 30 - 50 * procEnd;\n        }\n        /*\r\n        var setY = Math.sin(proc*10)*50+30;\r\n        if(setY<=30){\r\n        \t\r\n        \tY = setY;\r\n        }\r\n        */\n\n\n        if (proc < .7) {\n          this.SetState(0);\n          return new StateParam(false, X, Y, false, false);\n        }\n\n        if (proc > .7 && proc < .8) {\n          this.SetState(1);\n          return new StateParam(false, X, Y, false, false);\n        }\n\n        if (proc > .8 && proc < .9) {\n          this.SetState(2);\n          return new StateParam(false, X, Y, false, false);\n        }\n\n        if (proc > .9) {\n          this.SetState(3);\n\n          if (this.MoveInAttackLine == true) {\n            Y = this.AttackY;\n          }\n\n          return new StateParam(true, X, Y, false, false);\n        }\n      }\n\n      if (this.MoveFix != undefined) {\n        if (this.MoveFix) {\n          if (new ZonaAttack().ZoneAttack(X, this.randomMoveX, this.ZONA_ATTACK)) {\n            //stop move\n            return new StateParam(true, X, Y, false);\n          }\n        } else {\n          if (new ZonaAttack().ZoneAttack(X, this.HeroModel.X, this.ZONA_ATTACK)) {\n            //stop move\n            return new StateParam(true, X, Y, false);\n          }\n        }\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = 8;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Speed = Speed;\n    this.ZONA_ATTACK = ZONA_ATTACK;\n    this.HeroModel = HeroModel;\n    this.XstartJump = Xfiend;\n    this.Name = \"Move\";\n    this.ReserveY = new GameParam().LineReserve;\n    this.AttackY = new GameParam().LineAttack;\n\n    if (LocationLineReserve) {\n      this.MoveInAttackLine = true;\n    }\n\n    if (MoveFix == true) {\n      this.MoveFix = true;\n      this.randomMoveX = XfixMove;\n    } // move fiend\n\n\n    var random = false;\n\n    if (this.HeroModel != undefined) {\n      if (this.MoveFix) {} else {\n        if (random) {\n          this.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\n        } else {\n          this.randomMoveX = this.HeroModel.X;\n        }\n      }\n    }\n\n    this.lengthMove = this.randomMoveX - Xfiend;\n  }\n\n} // Blow\n\n\nclass StateFiendBlow extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, Speed) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      /*\r\n      if (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n      \t\tthis.SetState(1);\r\n      \t\treturn new StateParam(true,X,Y);\r\n      }*/\n      if (Y != this.randomMoveY) {\n        Y -= this.Speed;\n        this.SetState(15);\n        /*\r\n        if(Y>this.randomMoveY){\r\n        \tY-=this.Speed;\r\n        \t//11\r\n        \tthis.State =0;\r\n        }\r\n        if(Y<this.randomMoveY){\r\n        \tY+=this.Speed;\r\n        \t//10\r\n        \tthis.State =0;\r\n        }\r\n        */\n      }\n\n      if (new ZonaAttack().ZoneAttack(Y, this.randomMoveY, 5)) {\n        //stop blow\n        Y = this.MoveReserveY;\n        return new StateParam(true, X, Y, false, true);\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.MoveReserveY = new GameParam().LineReserve;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Speed = Speed;\n    this.randomMoveY = new GameParam().LineReserve;\n    this.Name = \"MoveBlow\"; //this.MoveFix = undefined;\n  }\n\n}\n\nclass StateFiendBlock extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 0 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 2 > currentFrameTime) {\n        this.SetState(16);\n        return new StateParam(false, X, Y, false);\n      }\n\n      return new StateParam(true, X, Y, false);\n    };\n\n    this.MoveReserveY = new GameParam().LineReserve;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.randomMoveY = new GameParam().LineReserve;\n    this.Name = \"Block\"; //this.MoveFix = undefined;\n  }\n\n} // Move Fix\n\n\nclass StateFiendMoveFix extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, XfixMove, Y) {\n    super(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, true, XfixMove, Y);\n    this.Name = \"MoveFix\";\n    this.MoveFix = true;\n    this.randomMoveX = XfixMove;\n  }\n\n} // Move\n\n\nclass StateFiendJump extends StateFiendMove {\n  constructor(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, Y) {\n    super(LocationLineReserve, AttackFiendTime, timeFrame, CANVAS_WIDTH, Speed, HeroModel, ZONA_ATTACK, Xfiend, null, null, Y);\n    this.Name = \"MoveJump\";\n    this.Jump = true;\n  }\n\n}\n\nclass StateFiendAttack extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 0 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 2 > currentFrameTime) {\n        this.SetState(7);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 2 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 3 > currentFrameTime) {\n        this.SetState(8);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 3 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 4 > currentFrameTime) {\n        this.SetState(9);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 4 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 5 > currentFrameTime) {\n        this.SetState(9);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 5 < currentFrameTime) {\n        //attack\n        return new StateParam(true, X, Y);\n      }\n\n      return new StateParam(false, X, Y);\n    };\n\n    this.State = 7;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Name = \"Attack\";\n  }\n\n}\n\nclass StateFiendDead extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame, _Y3) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 0 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 2 > currentFrameTime) {\n        //11\n        this.SetState(12);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 2 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 3 > currentFrameTime) {\n        //12\n        this.SetState(13);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 3 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 4 > currentFrameTime) {\n        this.SetState(14);\n        return new StateParam(false, X, Y);\n      }\n\n      this.State = 14;\n      return new StateParam(false, X, this.Y, true);\n    };\n\n    this.Y = _Y3;\n    this.State = 12;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Name = \"Dead\";\n  }\n\n} //statc pose\n\n\nclass StateFiendOld extends StateFiendBasic {\n  constructor(LocationLineReserve, AttackPlayer, AttackFiend, AttackFiendTime, timeFrame, _Y4) {\n    super();\n\n    this.Update = function (currentFrameTime, X, Y) {\n      if (this.AttackFiendTime + this.timeFrame * 0 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 2 > currentFrameTime) {\n        this.SetState(4);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 2 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 3 > currentFrameTime) {\n        this.SetState(5);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 3 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 5 > currentFrameTime) {\n        this.SetState(6);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 5 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 6 > currentFrameTime) {\n        this.SetState(5);\n        return new StateParam(false, X, Y);\n      }\n\n      if (this.AttackFiendTime + this.timeFrame * 6 < currentFrameTime && this.AttackFiendTime + this.timeFrame * 7 > currentFrameTime) {\n        this.SetState(4);\n        return new StateParam(false, X, Y);\n      } //0\n\n\n      this.State = 4;\n      return new StateParam(false, X, this.Y);\n    };\n\n    this.Y = _Y4;\n    this.State = 4;\n    this.AttackPlayer = AttackPlayer;\n    this.AttackFiend = AttackFiend;\n    this.AttackFiendTime = AttackFiendTime;\n    this.timeFrame = timeFrame;\n    this.Name = \"StateFiendOld\";\n  }\n\n}\n\nexport { TemplateFiend, StateFiendOld };","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Fiend.js"],"names":["ZonaAttack","StateFiendBasic","StateParam","GameParam","InventoryState","TemplateFiend","constructor","Id","X","Yline","ReserveY","timeFrame","CANVAS_WIDTH","ZONA_ATTACK","currentFrameTime","StartX","TableMonster","MaxAttack","StateImage","Speed","Dead","HPlife","LocationLineReserve","NamePharmacy","Dealer","Score","GetLocationLineReserve","SetLinePositionReserve","undefined","Y","LineReserve","LineAttack","GetId","UpdateRandomAttack","HeroModel","Name","State","GetAttackFiend","randomAttack","Math","floor","random","StateFiendAttack","StateFiendJump","StateFiendBlock","GetTypeUnit","TypeUnit","GetState","GetStateName","GetAttackPlayer","SetAttackPlayer","AttackPlayer","hpLife","StateFiendDead","Ystatic","StateFiendBlow","GetStateTime","stateParam","UpdateState","ChangeStatus","StateFiendOld","Update","Time","console","log","randomPharmacy","StateFiendMoveFix","DealerState","RandomPharmacy","StateFiendMove","AttackFiendTime","Xfiend","MoveFix","XfixMove","Jump","MoveInAttackLine","SetState","randomMoveX","pathLength","XstartJump","residual","abs","proc","procEnd","AttackY","ZoneAttack","lengthMove","randomMoveY","MoveReserveY","AttackFiend"],"mappings":"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","sourcesContent":["import { ZonaAttack } from './ZonaAttack';\r\nimport { StateFiendBasic } from './StateFiendBasic';\r\nimport { StateParam } from './StateParam';\r\nimport { GameParam } from './GameParam';\r\nimport { InventoryState } from './InventoryState';\r\n\r\nclass TemplateFiend {\r\n\tId;\r\n\tX;\r\n\tY;\r\n\tReserveY;\r\n\tYstatic;\r\n\tMaxAttack = 25;\r\n\tStateImage=0;\r\n\tState;\r\n\ttimeFrame;\r\n\tCANVAS_WIDTH;\r\n\tSpeed =20;\r\n\tHeroModel;\r\n\tZONA_ATTACK;\r\n\tDead = false;\r\n\tTypeUnit;\r\n\tHPlife = 10;\r\n\tLocationLineReserve = false;\r\n\tNamePharmacy = \"pharmacy\";\r\n\tDealer = \"dealer\";\r\n\tScore =0;\r\n\tconstructor(Id,X,Yline,ReserveY,timeFrame,CANVAS_WIDTH,ZONA_ATTACK,currentFrameTime,StartX,TableMonster){\r\n\t\t\r\n\t\t\r\n\t\t\r\n\r\n\t\t//TypeUnit,HPlife\r\n\t\tthis.Id = Id;\r\n\t\tthis.Name = TableMonster.Name;\r\n\t\t\r\n\t\tthis.Time =0;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.CANVAS_WIDTH = CANVAS_WIDTH;\r\n\t\t\r\n\t\t\r\n\t\tswitch(this.Name) {\r\n\t\t  case this.NamePharmacy:  // if (x === 'value1')\r\n\t\t\tconsole.log(\"11111\"+this.NamePharmacy);\r\n\t\t\tvar randomPharmacy = Math.floor(Math.random() * 8);\r\n\t\t\tthis.State = new InventoryState(StartX, 200,randomPharmacy);\r\n\t\t\tthis.Y =30;\r\n\t\t\t break;\r\n\r\n\t\t  case this.Dealer:  // if (x === 'value2')\r\n\t\t\tconsole.log(\"DealerState    22\"+this.Dealer);\r\n\t\t\t\r\n\t\t\t break;\r\n\r\n\t\t  default:\r\n\t\t\tconsole.log(\"3333\");\r\n\t\t\tthis.SetLinePositionReserve(Yline);\r\n\t\t\t\tthis.State = new StateFiendMoveFix(this.LocationLineReserve,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X,null,this.Y);\r\n\t\t\t break;\r\n\t\t}\r\n\t\t/*\r\n\t\tif (this.Name ==this.NamePharmacy) {\r\n\t\t\t\r\n\t\t\tvar randomPharmacy = Math.floor(Math.random() * 8);\r\n\t\t\tthis.State = new InventoryState(StartX, 200,randomPharmacy);\r\n\t\t\tthis.Y =30;\r\n\t\t} \r\n\t\telse {\r\n\t\t\t\tthis.SetLinePositionReserve(Yline);\r\n\t\t\t\tthis.State = new StateFiendMoveFix(this.LocationLineReserve,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X,null,this.Y);\r\n\t\t\t\t\r\n\t\t}\r\n\t\t*/\r\n\t\tthis.X=StartX;\r\n\t\tthis.Ystatic =this.Y;\r\n\t\tthis.ReserveY = ReserveY;\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t\tthis.TypeUnit = TableMonster.TypeUnit;\r\n\t\tthis.HPlife = TableMonster.HPlife;\r\n\t\tthis.Score = TableMonster.Score;\r\n\t\t\r\n\t};\r\n\tGetLocationLineReserve = function(){\r\n\t\treturn this.LocationLineReserve;\r\n\t}\r\n\tSetLinePositionReserve = function(Yline) {\r\n\t\tif(Yline!=undefined){\r\n\t\t\tif (Yline){\r\n\t\t\t\t\r\n\t\t\t\tthis.LocationLineReserve = true;\r\n\t\t\t\tthis.Y=new GameParam().LineReserve;\r\n\t\t\t} else {\r\n\t\t\t\tthis.LocationLineReserve = false;\r\n\t\t\t\tthis.Y=new GameParam().LineAttack;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tGetId = function() {\r\n\t\treturn this.Id;\r\n\t};\r\n\tUpdateRandomAttack = function(currentFrameTime,HeroModel) {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tif (this.Name !=this.NamePharmacy) {\r\n\t\t\t\tif(this.State.GetAttackFiend()==false){\r\n\t\t\t\t\tif(this.State.Name!=\"MoveJump\"){\r\n\t\t\t\t\t\tvar randomAttack = Math.floor(Math.random() * this.MaxAttack);\r\n\t\t\t\t\t\tif (this.LocationLineReserve == false)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif(randomAttack==1){\r\n\t\t\t\t\t\t\t\t//this.Y = this.Ystatic;\r\n\t\t\t\t\t\t\t\tthis.SetLinePositionReserve(false);\r\n\t\t\t\t\t\t\t\t//\tthis.State =new StateFiend(1,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t\t\t\t\t\tthis.State =new StateFiendAttack(this.LocationLineReserve,false,true,currentFrameTime,this.timeFrame);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\tif(randomAttack==2){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//move\r\n\t\t\t\t\t\t\tthis.State = new StateFiendMove(1,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,this.HeroModel,this.ZONA_ATTACK, this.X);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t//Jump\r\n\t\t\t\t\t\tif(randomAttack==3){\r\n\t\t\t\t\t\t\t//jump StateFiendJump\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.State = new StateFiendJump(this.LocationLineReserve,currentFrameTime,this.timeFrame,this.CANVAS_WIDTH,this.Speed,\r\n\t\t\t\t\t\t\tthis.HeroModel,this.ZONA_ATTACK, this.X, this.Y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//StateFiendBlock\r\n\t\t\t\t\t\tif(randomAttack==4){\r\n\t\t\t\t\t\t\tthis.State = new StateFiendBlock(this.LocationLineReserve,currentFrameTime,this.timeFrame);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t};\r\n\tGetTypeUnit = function(){\r\n\t\treturn this.TypeUnit;\r\n\t}\r\n\tGetState = function(){\r\n\t\treturn this.State.GetState();\r\n\t};\r\n\tGetStateName = function(){\r\n\t\treturn this.State.Name;\r\n\t};\r\n\tGetAttackPlayer = function(){\r\n\t\treturn this.State.GetAttackPlayer();\r\n\t}\r\n\tSetAttackPlayer = function(AttackPlayer,currentFrameTime){\r\n\t\t\r\n\t\tif (this.Name ==this.NamePharmacy) {\r\n\t\t\t//if (this.State.Name ==\"Dead\"){\r\n\t\t\t\tthis.AttackPlayer = true;\r\n\t\t\t\tthis.Dead = true;\r\n\t\t\t\tvar hpLife = this.HPlife;\r\n\t\t\t\tthis.HPlife =0;\r\n\t\t\t\treturn hpLife;\r\n\t\t\t//}\r\n\t\t} else \r\n\t\t{\r\n\t\t\t// block blow\r\n\t\t\tif (this.State.Name !=\"MoveBlow\"){\r\n\t\t\t\t//this.Name =\"Block\"\r\n\t\t\t\tif(this.State.Name !=\"Block\"){\r\n\t\t\t\t//block reserve line\r\n\t\t\t\t\tif(this.LocationLineReserve==false){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tthis.HPlife -=10;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (0>=this.HPlife){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (this.State.Name !=\"Dead\"){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.State =new StateFiendDead(this.LocationLineReserve,true,false,currentFrameTime,this.timeFrame,this.Ystatic);\r\n\t\t\t\t\t\t\t\tthis.AttackPlayer = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn this.Score;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//State,AttackFiendTime,timeFrame,Speed\r\n\t\t\t\t\t\t\tthis.State =new StateFiendBlow(this.LocationLineReserve,currentFrameTime,this.timeFrame,3);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} \r\n\t\treturn 0;\r\n\t}\r\n\t// and Update\r\n\tGetStateTime = function(currentFrameTime) {\r\n\t\tvar stateParam = this.UpdateState(currentFrameTime,this.X,this.Y);\r\n\t\t//var stateParam = this.State.Update(currentFrameTime,this.X,this.Y);\r\n\t\tif(stateParam.ChangeStatus){\r\n\t\t\t\r\n\t\t\tthis.State =new StateFiendOld(this.LocationLineReserve,false,false,currentFrameTime,this.timeFrame,this.Ystatic);\r\n\t\t\t//Update\r\n\t\t}\r\n\t\tthis.X = stateParam.X;\r\n\t\tthis.Y = stateParam.Y;\r\n\t\tif (stateParam.Dead ==true){\r\n\t\t\tthis.Dead = true;\r\n\t\t}\r\n\t\tif(this.Name !=this.NamePharmacy){\r\n\t\t\tthis.SetLinePositionReserve(stateParam.LocationLineReserve);\r\n\t\t}\r\n\t\treturn this.State.GetState();\r\n\t\r\n\t};\r\n\tUpdateState = function(currentFrameTime,X,Y) {\r\n\t\treturn this.State.Update(currentFrameTime,X,Y);\r\n\t}\r\n}\r\n\r\nclass DealerState extends StateFiendBasic {\r\n\t\r\n\tconstructor(X,Y,RandomPharmacy){\r\n\t\tsuper();\r\n\t\tthis.X = X;\r\n\t\tthis.Y = Y;\r\n\t\tthis.Name =\"Dealer\";\r\n\t\tthis.State = RandomPharmacy;\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t//Y += 2;\r\n\t\t\r\n\t\tif (Y>=110)\r\n\t\t{\r\n\t\t\tthis.AttackPlayer = true;\r\n\t\t\treturn new StateParam(false,X,Y,true,false);\r\n\t\t}\r\n\t\t\r\n\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\r\n\t}\r\n}\r\n\r\n// Move\r\nclass StateFiendMove extends StateFiendBasic {\r\n\tXstartJump;\r\n\trandomMoveX;\r\n\tmoveY;\r\n\tlengthMove;\r\n\tSpeed;\r\n\tZONA_ATTACK;\r\n\tHeroModel;\r\n\tJump = false;\r\n\tMoveFix = false;\r\n\tReserveY;\r\n\tAttackY;\r\n\tMoveInAttackLine = false;\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,MoveFix,XfixMove,Y){\r\n\t\tsuper();\r\n\t\tthis.State =8;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Speed = Speed;\r\n\t\tthis.ZONA_ATTACK = ZONA_ATTACK;\r\n\t\tthis.HeroModel = HeroModel;\r\n\t\tthis.XstartJump = Xfiend;\r\n\t\tthis.Name =\"Move\";\r\n\t\tthis.ReserveY = new GameParam().LineReserve;\r\n\t\tthis.AttackY = new GameParam().LineAttack;\r\n\t\tif(LocationLineReserve){\r\n\t\t\t\r\n\t\t\tthis.MoveInAttackLine = true;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif(MoveFix==true){\r\n\t\t\tthis.MoveFix = true;\r\n\t\t\tthis.randomMoveX =XfixMove;\r\n\t\t}\r\n\t\t// move fiend\r\n\t\tvar random = false;\r\n\t\t\r\n\t\tif(this.HeroModel!=undefined){\r\n\t\t\tif(this.MoveFix){\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tif (random){\r\n\t\t\t\t\tthis.randomMoveX = Math.floor(Math.random() * CANVAS_WIDTH);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.randomMoveX = this.HeroModel.X;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.lengthMove = this.randomMoveX - Xfiend;\r\n\t\t\r\n\t}\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}\r\n\t\tif (X!=this.randomMoveX){\r\n\t\t\tif(X>this.randomMoveX){\r\n\t\t\t\tX-=this.Speed;\r\n\t\t\t\tthis.State =12;\r\n\t\t\t}\r\n\t\t\tif(X<this.randomMoveX){\r\n\t\t\t\tX+=this.Speed;\r\n\t\t\t\tthis.State =11;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.Jump) {\r\n\t\t\t//jump  Math.abs   ReserveY\r\n\t\t\tvar pathLength = (this.XstartJump - this.randomMoveX);\r\n\t\t\tvar residual = Math.abs(this.XstartJump - X);\r\n\t\t\tvar proc = Math.abs(residual/pathLength);\r\n\t\t\t\r\n\t\t\tif (proc<.5){\r\n\t\t\t\tY =30-(50*proc);\r\n\t\t\t}\r\n\t\t\tif (proc>=.5){\r\n\t\t\t\tvar procEnd =0.5-(proc-0.5);\r\n\t\t\t\tY =30-(50*procEnd);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tvar setY = Math.sin(proc*10)*50+30;\r\n\t\t\tif(setY<=30){\r\n\t\t\t\t\r\n\t\t\t\tY = setY;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif(proc<.7){\r\n\t\t\t\tthis.SetState(0);\r\n\t\t\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\t}\r\n\t\t\tif(proc>.7&&proc<.8){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\t}\r\n\t\t\tif(proc>.8&&proc<.9){\r\n\t\t\t\tthis.SetState(2);\r\n\t\t\t\treturn new StateParam(false,X,Y,false,false);\r\n\t\t\t}\r\n\t\t\tif(proc>.9){\r\n\t\t\t\tthis.SetState(3);\r\n\t\t\t\tif (this.MoveInAttackLine == true){\r\n\t\t\t\t\t\r\n\t\t\t\t\tY = this.AttackY;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn new StateParam(true,X,Y,false,false);\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\tif(this.MoveFix!=undefined){\r\n\t\t\tif(this.MoveFix){\r\n\t\t\t\tif (new ZonaAttack().ZoneAttack(X,this.randomMoveX,this.ZONA_ATTACK)){\r\n\t\t\t\t\t\t//stop move\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn new StateParam(true,X,Y,false);\r\n\t\t\t\t\t}\r\n\t\t\t} else \r\n\t\t\t{\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tif (new ZonaAttack().ZoneAttack(X,this.HeroModel.X,this.ZONA_ATTACK)){\r\n\t\t\t\t\t\t//stop move\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn new StateParam(true,X,Y,false);\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new StateParam(false,X,Y);\r\n\t}\r\n}\r\n// Blow\r\nclass StateFiendBlow extends StateFiendMove {\r\n\tMoveReserveY;\r\n\tAttackFiendTime;\r\n\ttimeFrame;\r\n\tSpeed;\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,Speed){\r\n\t\tsuper();\r\n\t\tthis.MoveReserveY = new GameParam().LineReserve;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Speed = Speed;\r\n\t\tthis.randomMoveY = new GameParam().LineReserve;\r\n\t\tthis.Name =\"MoveBlow\";\r\n\t\t//this.MoveFix = undefined;\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t/*\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*9)<currentFrameTime){\r\n\t\t\t\tthis.SetState(1);\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t}*/\r\n\t\tif (Y!=this.randomMoveY){\r\n\t\t\tY-=this.Speed;\r\n\t\t\tthis.SetState(15);\r\n\t\t\t/*\r\n\t\t\tif(Y>this.randomMoveY){\r\n\t\t\t\tY-=this.Speed;\r\n\t\t\t\t//11\r\n\t\t\t\tthis.State =0;\r\n\t\t\t}\r\n\t\t\tif(Y<this.randomMoveY){\r\n\t\t\t\tY+=this.Speed;\r\n\t\t\t\t//10\r\n\t\t\t\tthis.State =0;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t}\r\n\t\tif (new ZonaAttack().ZoneAttack(Y,this.randomMoveY,5)){\r\n\t\t\t//stop blow\r\n\t\t\tY = this.MoveReserveY;\r\n\t\t\treturn new StateParam(true,X,Y,false,true);\r\n\t\t}\r\n\t\treturn new StateParam(false,X,Y);\r\n\t};\r\n}\r\nclass StateFiendBlock extends StateFiendMove {\r\n\t\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame){\r\n\t\tsuper();\r\n\t\tthis.MoveReserveY = new GameParam().LineReserve;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.randomMoveY = new GameParam().LineReserve;\r\n\t\tthis.Name =\"Block\";\r\n\t\t//this.MoveFix = undefined;\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(16);\r\n\t\t\t\treturn new StateParam(false,X,Y,false);\r\n\t\t}\r\n\t\treturn new StateParam(true,X,Y,false);\r\n\t};\r\n}\r\n// Move Fix\r\nclass StateFiendMoveFix extends StateFiendMove {\r\n\t\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,XfixMove,Y){\r\n\t\t\r\n\t\tsuper(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,true,XfixMove,Y);\r\n\t\tthis.Name =\"MoveFix\";\r\n\t\tthis.MoveFix = true;\r\n\t\tthis.randomMoveX =XfixMove;\r\n\t\t \r\n\t};\r\n\r\n}\r\n\r\n// Move\r\nclass StateFiendJump extends StateFiendMove {\r\n\t\r\n\tconstructor(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,Y){\r\n\t\t\r\n\t\tsuper(LocationLineReserve,AttackFiendTime,timeFrame,CANVAS_WIDTH,Speed,HeroModel,ZONA_ATTACK,Xfiend,null,null,Y);\r\n\t\tthis.Name =\"MoveJump\";\r\n\t\tthis.Jump = true;\r\n\t};\r\n\r\n}\r\nclass StateFiendAttack extends StateFiendBasic{\r\n\t\r\n\t\tconstructor(LocationLineReserve,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame){\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.State = 7;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Name =\"Attack\";\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\r\n\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(7);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\tthis.SetState(8);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(9);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*4)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*5)>currentFrameTime){\r\n\t\t\t\tthis.SetState(9);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime){\r\n\t\t\t\t//attack\r\n\t\t\t\treturn new StateParam(true,X,Y);\r\n\t\t\t}\r\n\t\t\treturn new StateParam(false,X,Y);\r\n\r\n\t\t\r\n\t\t\r\n\t}\r\n}\r\nclass StateFiendDead extends StateFiendBasic{\r\n\t\r\n\tconstructor(LocationLineReserve,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame,Y){\r\n\t\t\r\n\t\tsuper();\r\n\t\tthis.Y = Y;\r\n\t\tthis.State =12;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Name =\"Dead\";\r\n\t};\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\t\r\n\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\t//11\r\n\t\t\t\tthis.SetState(12);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\t//12\r\n\t\t\t\tthis.SetState(13);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*4)>currentFrameTime){\r\n\t\t\t\tthis.SetState(14);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\r\n\t\t\tthis.State =14;\r\n\t\t\treturn new StateParam(false,X,this.Y,true);\r\n\r\n\t}\r\n\t\r\n}\r\n//statc pose\r\nclass StateFiendOld extends StateFiendBasic{\r\n\t_frameCount;\r\n\tconstructor(LocationLineReserve,AttackPlayer,AttackFiend,AttackFiendTime,timeFrame,Y){\r\n\t\tsuper();\r\n\t\tthis.Y = Y;\r\n\t\tthis.State = 4;\r\n\t\tthis.AttackPlayer = AttackPlayer;\r\n\t\tthis.AttackFiend = AttackFiend;\r\n\t\tthis.AttackFiendTime = AttackFiendTime;\r\n\t\tthis.timeFrame = timeFrame;\r\n\t\tthis.Name =\"StateFiendOld\";\r\n\t};\r\n\t\r\n\t\r\n\tUpdate = function(currentFrameTime,X,Y) {\r\n\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*0)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*2)>currentFrameTime){\r\n\t\t\t\tthis.SetState(4);\r\n\r\n\t\t\t\t\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*2)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*3)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\tthis.SetState(5);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*3)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*5)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\tthis.SetState(6);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*5)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*6)>currentFrameTime){\r\n\t\t\t\tthis.SetState(5);\r\n\r\n\t\t\t\t\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\t\t\tif (this.AttackFiendTime+(this.timeFrame*6)<currentFrameTime&&this.AttackFiendTime+(this.timeFrame*7)>currentFrameTime){\r\n\t\t\t\t\r\n\t\t\t\tthis.SetState(4);\r\n\t\t\t\treturn new StateParam(false,X,Y);\r\n\t\t\t}\r\n\r\n\t\t//0\r\n\t\tthis.State=4;\r\n\t\treturn new StateParam(false,X,this.Y);\r\n\t}\r\n}\r\n\r\n\r\nexport { TemplateFiend, StateFiendOld }"]},"metadata":{},"sourceType":"module"}