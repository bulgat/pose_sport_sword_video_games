{"ast":null,"code":"import FiendModel from \"./FiendModel.js\";\nimport { TemplateFiend, AnotherTemplate } from './Fiend';\nconst CANVAS_WIDTH = 640;\nconst CANVAS_HEIGHT = 300;\nconst ZONA_ATTACK = 30;\nlet LEVEL = 0;\nvar _devilEyeList = {\n  0: {\n    img: [{\n      x: 0,\n      y: 0,\n      w: 90,\n      h: 142\n    }]\n  },\n  1: {\n    img: [{\n      x: 90,\n      y: 0,\n      w: 80,\n      h: 142\n    }]\n  },\n  2: {\n    img: [{\n      x: 170,\n      y: 0,\n      w: 70,\n      h: 142\n    }]\n  },\n  3: {\n    img: [{\n      x: 240,\n      y: 0,\n      w: 70,\n      h: 142\n    }]\n  },\n  4: {\n    img: [{\n      x: 300,\n      y: 0,\n      w: 70,\n      h: 142\n    }]\n  },\n  5: {\n    img: [{\n      x: 360,\n      y: 0,\n      w: 70,\n      h: 142\n    }]\n  },\n  6: {\n    img: [{\n      x: 410,\n      y: 0,\n      w: 70,\n      h: 142\n    }]\n  },\n  7: {\n    img: [{\n      x: 480,\n      y: 0,\n      w: 70,\n      h: 142\n    }]\n  },\n  8: {\n    img: [{\n      x: 635,\n      y: 0,\n      w: 90,\n      h: 142,\n      name: \"dead\"\n    }]\n  }\n};\nsetInterval(() => {\n  draw();\n  drawCanvasHero();\n}, 100);\nvar context = document.getElementById(\"myCanvas\"); ////\n//health.value -= 10; \n//drawHero = true;\n\nvar loadCanvas = false;\nconst base_image = new Image();\nbase_image.src = '/image/women0.png';\n\nbase_image.onload = function () {\n  loadCanvas = true;\n};\n\nconst attack_image = new Image();\nattack_image.src = '/image/women1.png';\n\nattack_image.onload = function () {};\n\nconst shield_image = new Image();\nshield_image.src = '/image/women2.png';\n\nshield_image.onload = function () {}; // ThroneRoom  bigFon\n\n\nconst throneRoom_image = new Image();\nthroneRoom_image.src = '/image/bigFon.png';\n\nthroneRoom_image.onload = function () {}; //DevilEye.png\n\n\nconst devilEye_image = new Image();\ndevilEye_image.src = '/image/DevilEye.png';\n\ndevilEye_image.onload = function () {};\n\nconst devilEyeModel = {\n  X: 139,\n  Y: 139\n};\nvar ModelLevel = {\n  fiendModelList: [],\n  LevelId: 0\n}; //var fiendModelList =[];\n//ModelLevel.fiendModelList.push({X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false});\n\nModelLevel.fiendModelList.push(new TemplateFiend(1, 139, 30, false), new TemplateFiend(2, 239, 30, false));\nvar lastFrameTime = 0;\n\nconst drawCanvasHero = () => {\n  ////\n  //var damage = Math.floor(Math.random()*total);\n  // damage = 100;\n  // var newValue = value - damage;\n  // calculate the percentage of the total width\n  // var barWidth = (newValue / total) * 100;\n  // var hitWidth = (damage / value) * 100 + \"%\";\n  let health = document.getElementById(\"hit\");\n\n  if (health != null) {\n    health.value = 10;\n  } ////\n\n\n  console.log(\"d currentFr  health =\" + health); //var currentFrameTime = Date.now();\n\n  var currentFrameTime = Date.now();\n  var timeElapsed = currentFrameTime - lastFrameTime;\n\n  if (loadCanvas) {\n    var context = document.getElementById(\"myCanvas\");\n    var ctx = context.getContext(\"2d\");\n\n    if (window.Nose != undefined) {\n      ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n      DrawBackground(ctx, ModelLevel.LevelId); //devilEye_image\n      //_devilEyeList\n      //ctx.drawImage(devilEye_image,0,0);\n\n      var modelHero = CreateModelHero(ModelLevel.fiendModelList, currentFrameTime);\n\n      for (var i = 0; i < ModelLevel.fiendModelList.length; i++) {\n        DrawFiend(ctx, ModelLevel.fiendModelList[i], currentFrameTime);\n        ModelLevel.fiendModelList[i].RandomAttack(currentFrameTime);\n      } //drawFiend(ctx,130,30);\n\n\n      drawHero(ctx, modelHero);\n      resetFiendModel(ModelLevel.fiendModelList, currentFrameTime);\n      ModelLevel.fiendModelList = resetNewLevel(ModelLevel);\n    }\n  }\n\n  lastFrameTime = currentFrameTime;\n};\n\nconst DrawBackground = (ctx, Id) => {\n  if (Id == 0) {\n    ctx.drawImage(throneRoom_image, 0, 0, 939, 189, 0, 0, 939, 189);\n  }\n\n  if (Id == 1) {\n    ctx.drawImage(throneRoom_image, 0, 189, 939, 189, 0, 0, 939, 189);\n  }\n};\n\n_c = DrawBackground;\n\nconst CreateModelHero = (FiendModelList, CurrentFrameTime) => {\n  var modelHero = {\n    RightArm: false,\n    LeftArm: false,\n    Nose: 0\n  };\n  modelHero.RightArm = 150 > window.RightArm.position.y;\n  modelHero.LeftArm = 150 > window.LeftArm.position.y;\n  modelHero.Nose = CANVAS_WIDTH - window.Nose.position.x;\n\n  for (var i = 0; i < FiendModelList.length; i++) {\n    if (FiendModelList[i].X > modelHero.Nose - ZONA_ATTACK && FiendModelList[i].X < modelHero.Nose + ZONA_ATTACK) {\n      if (modelHero.RightArm) {\n        if (FiendModelList[i].AttackPlayer == false) {\n          FiendModelList[i].Time = CurrentFrameTime;\n        }\n\n        FiendModelList[i].AttackPlayer = true;\n      } //fiend attack\n\n\n      if (FiendModelList[i].GetState() == 7) {\n        console.log(\" attack w =\");\n      }\n    }\n  }\n\n  return modelHero;\n};\n\n_c2 = CreateModelHero;\n\nconst drawHero = (ctx, ModelHero) => {\n  if (ModelHero.RightArm) {\n    //ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    ctx.drawImage(attack_image, ModelHero.Nose, 100);\n    return;\n  }\n\n  if (ModelHero.LeftArm) {\n    //ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    ctx.drawImage(shield_image, ModelHero.Nose, 100);\n    return;\n  }\n\n  ctx.drawImage(base_image, ModelHero.Nose, 100);\n  return;\n};\n\nconst DrawFiend = (ctx, ModelFiend, currentFrameTime) => {\n  var countAnimInf = ModelFiend.GetStateTime(currentFrameTime); //if(ModelFiend.AttackFiend){\n  //if (ModelFiend.AttackFiendTime<currentFrameTime){\n  //\tcountAnimInf =1;\n  //}\n  //}\n  //if(ModelFiend.AttackPlayer){\n  //\tcountAnimInf =5;\n  //}\n\n  ctx.drawImage(devilEye_image, _devilEyeList[countAnimInf].img[0].x, //x origin\n  _devilEyeList[countAnimInf].img[0].y, //y origin\n  _devilEyeList[countAnimInf].img[0].w, //w origin\n  _devilEyeList[countAnimInf].img[0].h, //h origin\n  ModelFiend.X, //x\n  ModelFiend.Y, //y\n  _devilEyeList[countAnimInf].img[0].w, //w size\n  _devilEyeList[countAnimInf].img[0].h //h size\n  ); //ctx.drawImage(devilEye_image, 150, 0, 124, 124, 210, 20, 50, 50);\n  //\n}; //////////\n\n\n_c3 = DrawFiend;\n\nvar resetNewLevel = function (ModelLevel) {\n  if (ModelLevel.fiendModelList.length == 0) {\n    if (LEVEL == 0) {\n      //ModelLevel.fiendModelList =[{X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false}];\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 139, 30, false), new TemplateFiend(2, 239, 30, false)];\n    }\n\n    if (LEVEL == 1) {\n      //ModelLevel.fiendModelList=[{X:59,Y:30,AttackPlayer:false},{X:339,Y:30,AttackPlayer:false},{X:439,Y:30,AttackPlayer:false}];\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 59, 30, false), new TemplateFiend(2, 339, 30, false), new TemplateFiend(2, 439, 30, false)];\n    }\n\n    if (LEVEL == 2) {\n      //ModelLevel.fiendModelList =[{X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false}];\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 139, 30, false), new TemplateFiend(2, 239, 30, false)];\n      ModelLevel.LevelId = 1;\n    }\n\n    if (LEVEL == 3) {\n      //ModelLevel.fiendModelList=[{X:59,Y:30,AttackPlayer:false},{X:339,Y:30,AttackPlayer:false},{X:439,Y:30,AttackPlayer:false}];\n      ModelLevel.fiendModelList = [new TemplateFiend(1, 59, 30, false), new TemplateFiend(2, 339, 30, false), new TemplateFiend(2, 439, 30, false)];\n      ModelLevel.LevelId = 1;\n    }\n\n    LEVEL += 1;\n    console.log(\"==    LEVEL =\" + LEVEL);\n  }\n\n  return ModelLevel.fiendModelList;\n};\n\nvar resetFiendModel = function (FiendModelList, currentFrameTime) {\n  for (var i = 0; i < FiendModelList.length; i++) {\n    if (FiendModelList[i].AttackPlayer) {\n      var fiendTime = FiendModelList[i].Time + 700;\n\n      if (fiendTime < currentFrameTime) {\n        console.log(fiendTime + \" ------- \" + FiendModelList[i].Time + \"  >    currentFrameTime =  \" + currentFrameTime + \" ooooooo = \" + (fiendTime - currentFrameTime));\n        var kkk = parseInt(fiendTime, 9);\n        var xxx = parseInt(currentFrameTime, 9);\n        console.log(kkk + \"  =   I currentFrameTime =  \" + xxx); //1646496735673 ------- 1646496725673  >   =  1646496725673\n        //parseInt(1646496725673)\n\n        FiendModelList.splice(i, 1);\n        return;\n      }\n    }\n  }\n};\n\nvar draw = function () {\n  var context = document.getElementById(\"myCanvas\");\n  var ctx = context.getContext(\"2d\");\n  ctx.moveTo(0, 0);\n  ctx.lineTo(200, 100);\n  ctx.stroke();\n};\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"DrawBackground\");\n$RefreshReg$(_c2, \"CreateModelHero\");\n$RefreshReg$(_c3, \"DrawFiend\");","map":{"version":3,"sources":["C:/Users/bulga/posenetkol/src/Canvas.js"],"names":["FiendModel","TemplateFiend","AnotherTemplate","CANVAS_WIDTH","CANVAS_HEIGHT","ZONA_ATTACK","LEVEL","_devilEyeList","img","x","y","w","h","name","setInterval","draw","drawCanvasHero","context","document","getElementById","loadCanvas","base_image","Image","src","onload","attack_image","shield_image","throneRoom_image","devilEye_image","devilEyeModel","X","Y","ModelLevel","fiendModelList","LevelId","push","lastFrameTime","health","value","console","log","currentFrameTime","Date","now","timeElapsed","ctx","getContext","window","Nose","undefined","clearRect","DrawBackground","modelHero","CreateModelHero","i","length","DrawFiend","RandomAttack","drawHero","resetFiendModel","resetNewLevel","Id","drawImage","FiendModelList","CurrentFrameTime","RightArm","LeftArm","position","AttackPlayer","Time","GetState","ModelHero","ModelFiend","countAnimInf","GetStateTime","fiendTime","kkk","parseInt","xxx","splice","moveTo","lineTo","stroke"],"mappings":"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","sourcesContent":["import  FiendModel from \"./FiendModel.js\";\r\nimport { TemplateFiend, AnotherTemplate } from './Fiend';\r\n\r\nconst CANVAS_WIDTH =640;\r\nconst CANVAS_HEIGHT =300;\r\nconst ZONA_ATTACK =30;\r\nlet LEVEL =0;\r\n\r\n\r\n\r\n\r\nvar _devilEyeList = {\r\n\t0:{img:[{x:0,y:0,w:90,h:142}]},\r\n\t1:{img:[{x:90,y:0,w:80,h:142}]},\r\n\t2:{img:[{x:170,y:0,w:70,h:142}]},\r\n\t3:{img:[{x:240,y:0,w:70,h:142}]},\r\n\t4:{img:[{x:300,y:0,w:70,h:142}]},\r\n\t5:{img:[{x:360,y:0,w:70,h:142}]},\r\n\t6:{img:[{x:410,y:0,w:70,h:142}]},\r\n\t7:{img:[{x:480,y:0,w:70,h:142}]},\r\n\t8:{img:[{x:635,y:0,w:90,h:142,name:\"dead\"}]}\r\n};\r\n\r\n\tsetInterval(() => {\r\n      draw();\r\n\t  drawCanvasHero ();\r\n    }, 100);\r\n\t\r\n\tvar context = document.getElementById(\"myCanvas\");\r\n\r\n\t////\r\n\t\r\n//health.value -= 10; \r\n\t\r\n\t\t\t\t//drawHero = true;\r\n\tvar loadCanvas=false;\r\n\tconst base_image = new Image();\r\n\tbase_image.src = '/image/women0.png';\r\n\t\r\n\tbase_image.onload = function() \r\n\t{\r\n\t\t \r\n\t\t loadCanvas=true;\r\n\r\n\t}\r\n\tconst attack_image = new Image();\r\n\tattack_image.src = '/image/women1.png';\r\n\tattack_image.onload = function() \r\n\t{\r\n\t\t  \r\n\r\n\t}\r\n\t\tconst shield_image = new Image();\r\n\tshield_image.src = '/image/women2.png';\r\n\tshield_image.onload = function() \r\n\t{\r\n\t\t  \r\n\r\n\t}\r\n\t// ThroneRoom  bigFon\r\n\tconst throneRoom_image = new Image();\r\n\tthroneRoom_image.src = '/image/bigFon.png';\r\n\tthroneRoom_image.onload = function() \r\n\t{\r\n\t\t  \r\n\r\n\t}\r\n\t//DevilEye.png\r\n\tconst devilEye_image = new Image();\r\n\tdevilEye_image.src = '/image/DevilEye.png';\r\n\tdevilEye_image.onload = function() \r\n\t{\r\n\t\t  \r\n\r\n\t}\r\n\tconst devilEyeModel =  {X:139,Y:139};\r\n\t\r\n\tvar ModelLevel = {\r\n\t\tfiendModelList:[],\r\n\t\tLevelId:0\r\n\t};\r\n\t//var fiendModelList =[];\r\n\t//ModelLevel.fiendModelList.push({X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false});\r\nModelLevel.fiendModelList.push(new TemplateFiend(1,139,30,false),new TemplateFiend(2,239,30,false));\r\n\r\n\tvar lastFrameTime=0;\r\n\tconst drawCanvasHero = () =>{\r\n\t\t////\r\n\t\t\r\n\t\t //var damage = Math.floor(Math.random()*total);\r\n    // damage = 100;\r\n   // var newValue = value - damage;\r\n    // calculate the percentage of the total width\r\n   // var barWidth = (newValue / total) * 100;\r\n   // var hitWidth = (damage / value) * 100 + \"%\";\r\n\t\t\r\n\t\tlet health = document.getElementById(\"hit\");\r\n\t\tif(health!=null){\r\n\t\t\thealth.value = 10;\r\n\t\t}\r\n\t\t////\r\n\tconsole.log(\"d currentFr  health =\"+health );\r\n\t\t\r\n\t\t//var currentFrameTime = Date.now();\r\n\t\tvar currentFrameTime = Date.now();\r\n\t\tvar timeElapsed = currentFrameTime-lastFrameTime;\r\n\t\t\r\n\t\t\r\n\t\tif(loadCanvas){\r\n\t\t\tvar context = document.getElementById(\"myCanvas\");\r\n\t\t\tvar ctx = context.getContext(\"2d\");\r\n\r\n\t\t\tif (window.Nose!=undefined){\r\n\t\t\t\tctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\t\t\t\t\r\n\r\n\t\t\t\tDrawBackground(ctx,ModelLevel.LevelId);\r\n\t\t\t\t//devilEye_image\r\n\t\t\t\t//_devilEyeList\r\n\t\t\t\t//ctx.drawImage(devilEye_image,0,0);\r\n\r\n\t\t\t\tvar modelHero =  CreateModelHero(ModelLevel.fiendModelList,currentFrameTime);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tfor(var i=0;i<ModelLevel.fiendModelList.length;i++){\r\n\t\t\t\t\t\r\n\t\t\t\t\tDrawFiend(ctx,ModelLevel.fiendModelList[i],currentFrameTime);\r\n\t\t\t\t\tModelLevel.fiendModelList[i].RandomAttack(currentFrameTime);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t//drawFiend(ctx,130,30);\r\n\t\t\t\t\r\n\t\t\t\tdrawHero (ctx,modelHero);\r\n\t\t\t\t\r\n\t\t\t\tresetFiendModel(ModelLevel.fiendModelList,currentFrameTime);\r\n\t\t\t\tModelLevel.fiendModelList = resetNewLevel(ModelLevel);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tlastFrameTime = currentFrameTime;\r\n\t}\r\n\tconst DrawBackground=(ctx,Id) =>{\r\n\t\t\r\n\t\tif(Id == 0){\r\n\t\t\tctx.drawImage(throneRoom_image, 0, 0, 939, 189, 0, 0, 939, 189);\r\n\t\t}\r\n\t\tif(Id == 1){\r\n\t\t\tctx.drawImage(throneRoom_image, 0, 189, 939, 189, 0, 0, 939, 189);\r\n\t\t}\r\n\t}\r\n\tconst CreateModelHero =(FiendModelList,CurrentFrameTime)=>{\r\n\t\tvar modelHero ={RightArm:false,LeftArm:false,Nose:0};\r\n\t\tmodelHero.RightArm =(150>window.RightArm.position.y);\r\n\t\tmodelHero.LeftArm = (150>window.LeftArm.position.y);\r\n\t\tmodelHero.Nose = CANVAS_WIDTH - window.Nose.position.x;\r\n\t\t\r\n\t\tfor(var i=0;i<FiendModelList.length;i++){\r\n\r\n\t\t\tif(FiendModelList[i].X>modelHero.Nose-ZONA_ATTACK&&FiendModelList[i].X<modelHero.Nose+ZONA_ATTACK){\r\n\t\t\t\tif(modelHero.RightArm){\r\n\t\t\t\t\tif(FiendModelList[i].AttackPlayer ==false){\r\n\t\t\t\t\t\tFiendModelList[i].Time =CurrentFrameTime;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tFiendModelList[i].AttackPlayer = true;\r\n\r\n\t\t\t\t}\r\n\t\t\t\t//fiend attack\r\n\t\t\t\tif (FiendModelList[i].GetState()==7) {\r\n\t\t\t\t\tconsole.log(\" attack w =\"  );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn modelHero;\r\n\t};\r\n\tconst drawHero = (ctx,ModelHero) =>{\r\n\t\t\r\n\t\tif(ModelHero.RightArm) {\r\n\t\t\t//ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\t\t\tctx.drawImage(attack_image,ModelHero.Nose, 100);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(ModelHero.LeftArm) {\r\n\t\t\t//ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\t\t\tctx.drawImage(shield_image,ModelHero.Nose, 100);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tctx.drawImage(base_image,ModelHero.Nose, 100);\r\n\t\treturn;\r\n\t};\r\n\tconst DrawFiend = (ctx,ModelFiend,currentFrameTime) =>{\r\n\t\tvar countAnimInf =ModelFiend.GetStateTime(currentFrameTime);\r\n\t\t\r\n\t\t//if(ModelFiend.AttackFiend){\r\n\t\t\t//if (ModelFiend.AttackFiendTime<currentFrameTime){\r\n\t\t\t//\tcountAnimInf =1;\r\n\t\t\t//}\r\n\t\t//}\r\n\t\t//if(ModelFiend.AttackPlayer){\r\n\t\t//\tcountAnimInf =5;\r\n\t\t//}\r\n\t\t\r\n\t\t\r\n\t\t\tctx.drawImage(devilEye_image, \r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].x,//x origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].y,//y origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].w,//w origin\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].h,//h origin\r\n\t\t\t\tModelFiend.X,//x\r\n\t\t\t\tModelFiend.Y,//y\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].w,//w size\r\n\t\t\t\t_devilEyeList[countAnimInf].img[0].h//h size\r\n\t\t\t\t);\r\n\t\t\t\t//ctx.drawImage(devilEye_image, 150, 0, 124, 124, 210, 20, 50, 50);\r\n\t\t\t\t//\r\n\t};\r\n\t//////////\r\n\tvar resetNewLevel = function(ModelLevel){\r\n\t\tif(ModelLevel.fiendModelList.length==0){\r\n\t\t\tif (LEVEL==0){\r\n\t\t\t\t//ModelLevel.fiendModelList =[{X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false}];\r\n\t\t\t\tModelLevel.fiendModelList =[new TemplateFiend(1,139,30,false),new TemplateFiend(2,239,30,false)];\r\n\t\t\t}\r\n\t\t\tif (LEVEL==1){\r\n\t\t\t\t//ModelLevel.fiendModelList=[{X:59,Y:30,AttackPlayer:false},{X:339,Y:30,AttackPlayer:false},{X:439,Y:30,AttackPlayer:false}];\r\n\t\t\t\tModelLevel.fiendModelList =[new TemplateFiend(1,59,30,false),new TemplateFiend(2,339,30,false),new TemplateFiend(2,439,30,false)];\r\n\t\t\t}\r\n\t\t\tif (LEVEL==2){\r\n\t\t\t\t//ModelLevel.fiendModelList =[{X:139,Y:30,AttackPlayer:false},{X:239,Y:30,AttackPlayer:false}];\r\n\t\t\t\tModelLevel.fiendModelList =[new TemplateFiend(1,139,30,false),new TemplateFiend(2,239,30,false)];\r\n\t\t\t\tModelLevel.LevelId =1;\r\n\t\t\t}\r\n\t\t\tif (LEVEL==3){\r\n\t\t\t\t//ModelLevel.fiendModelList=[{X:59,Y:30,AttackPlayer:false},{X:339,Y:30,AttackPlayer:false},{X:439,Y:30,AttackPlayer:false}];\r\n\t\t\t\tModelLevel.fiendModelList =[new TemplateFiend(1,59,30,false),new TemplateFiend(2,339,30,false),new TemplateFiend(2,439,30,false)];\r\n\t\t\t\tModelLevel.LevelId =1;\r\n\t\t\t}\r\n\t\t\tLEVEL+=1;\r\n\t\t\tconsole.log( \"==    LEVEL =\" +LEVEL);\r\n\t\t}\r\n\t\treturn ModelLevel.fiendModelList\r\n\t}\r\n\tvar resetFiendModel = function(FiendModelList,currentFrameTime){\r\n\t\t\r\n\t\tfor(var i=0;i<FiendModelList.length;i++){\r\n\t\t\tif (FiendModelList[i].AttackPlayer){\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar fiendTime = (FiendModelList[i].Time+700);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (fiendTime<currentFrameTime){\r\n\t\t\t\t\tconsole.log( fiendTime+\" ------- \"+FiendModelList[i].Time+\"  >    currentFrameTime =  \"+currentFrameTime+\" ooooooo = \"+(fiendTime-currentFrameTime) );\r\n\t\t\t\t\tvar kkk =parseInt(fiendTime,9);\r\n\t\t\t\t\tvar xxx =parseInt(currentFrameTime,9);\r\n\t\t\t\t\tconsole.log(kkk+ \"  =   I currentFrameTime =  \" +xxx);\r\n\t\t\t\t\t//1646496735673 ------- 1646496725673  >   =  1646496725673\r\n\t\t\t\t\t\r\n\t\t\t\t\t//parseInt(1646496725673)\r\n\t\t\t\t\t\r\n\t\t\t\t\tFiendModelList.splice(i,1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar draw = function(){\r\n\t\tvar context = document.getElementById(\"myCanvas\");\r\n\t\tvar ctx = context.getContext(\"2d\");\r\n\t\tctx.moveTo(0, 0);\r\n\t\t\tctx.lineTo(200, 100);\r\n\t\t\tctx.stroke();\r\n\t\t\r\n\t};"]},"metadata":{},"sourceType":"module"}